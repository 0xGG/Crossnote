{"version":3,"sources":["lib/localFileSystem.ts","lib/fs.ts","utilities/markdown.ts","lib/reference.ts","lib/search.ts","lib/notebook.ts","lib/crossnote.ts","utilities/utils.ts","utilities/image.ts","generated/graphql.tsx","utilities/history.ts","components/GitHubOAuthCallback.tsx","serviceWorker.ts","components/ServiceWorkerWrapper.tsx","lib/event.ts","containers/crossnote.ts","lib/keymap.ts","lib/tabNode.ts","containers/global.ts","editor/widgets/timer/index.tsx","utilities/image_uploader.ts","editor/widgets/image/index.tsx","editor/widgets/audio/index.tsx","editor/widgets/video/index.tsx","editor/widgets/bilibili/index.tsx","editor/widgets/youtube/index.tsx","editor/widgets/ocr/index.tsx","components/EditImageDialog.tsx","utilities/preview.ts","editor/widgets/kanban/index.tsx","utilities/note.ts","utilities/client.ts","i18n/i18n.ts","i18n/lang/enUS.ts","i18n/lang/zhCN.ts","i18n/lang/zhTW.ts","i18n/lang/jaJP.ts","editor/widgets/comment/CommentMessages.tsx","editor/widgets/comment/CommentEditor.tsx","editor/widgets/comment/CommentDialog.tsx","editor/widgets/widget/WidgetTopPanel.tsx","editor/widgets/comment/index.tsx","editor/widgets/github_gist/index.tsx","editor/index.ts","themes/theme.ts","themes/dark.ts","themes/light.ts","themes/one-dark.ts","themes/solarized-light.ts","themes/manager.ts","containers/settings.ts","components/AddNotebookDialog.tsx","containers/cloud.ts","components/AuthDialog.tsx","components/LanguageSelectorDialog.tsx","pages/Privacy.tsx","lib/graphView.ts","components/GraphView.tsx","lib/editorMode.ts","editor/views/float-win.ts","components/ChangeFilePathDialog.tsx","components/DeleteNoteDialog.tsx","components/NotePopover.tsx","lib/order.ts","components/NoteCard.tsx","components/Notes.tsx","components/NotesPanel.tsx","components/NotePanel.tsx","editor/views/math-preview.ts","_git_commit.js","components/Settings.tsx","components/MainPanel.tsx","components/ConfigureNotebookDialog.tsx","components/PushNotebookDialog.tsx","components/NotebookTreeView.tsx","pages/Home.tsx","App.tsx","containers/notifications.ts","index.tsx"],"names":["verifyPermission","fileHandle","mode","a","options","queryPermission","requestPermission","LocalFileSystem","directoryHandleMap","_prefix","mkdirp","this","mkdir","randomID","rootDir","directoryHandle","startsWith","endsWith","path","pathArr","replace","split","slice","length","opts","encoding","helper","Error","i","getDirectoryHandle","getFileHandle","getFile","file","match","text","Uint8Array","arrayBuffer","data","create","createWritable","writable","write","close","names","values","entry","push","name","removeEntry","recursive","fHandle","dHandle","lastModified","Date","now","stats","isDirectory","isFile","ctimeMs","mtimeMs","oldPath","newPath","readFile","writeFile","unlink","FileSystem","fs","lfs","readdir","exists","rename","rmdir","setUpFSMethods","id","attachLocalDirectory","isPathOfLocalFileSystem","Promise","resolve","reject","error","files","stat","oldPathStat","newPathStat","filePath","dirPath","promises","all","LightningFS","pfs","matter","markdown","endFrontMatterOffset","frontMatter","indexOf","frontMatterString","window","parse","content","matterStringify","yamlStr","stringify","trim","ReferenceMap","map","noteFilePath","referredByNoteFilePath","reference","mentionedBys","filePath1","filePath2","Search","miniSearch","_cache","MiniSearch","fields","storeFields","tokenize","string","title","searchDoc","add","c","doc","remove","docs","removeAll","queryString","search","formatNoteConfig","noteConfig","newObject","Object","assign","createdAt","modifiedAt","Notebook","_id","dir","gitURL","gitBranch","gitCorsProxy","gitUsername","gitPassword","autoFetchPeriod","fetchedAt","remoteSha","localSha","notes","isLocal","loadedNotes","referenceMap","noteHasReferences","rFilePath","getNote","note","getReferences","tokens","md","resolveLink","link","references","traverse","parentToken","results","level","token","type","arr","children","mentions","deleteReferences","addReference","oldFilePath","newFilePath","removeNoteRelations","newDirPath","git","filepath","filepaths","force","refreshNoteRelations","absFilePath","pinned","favorited","oldMentions","oldNote","notebookPath","config","processNoteMentionsAndMentionedBy","includeSubdirectories","refreshNotes","refreshRelations","initSearch","refreshNotesPromises","oMarkdown","writeNote","Crossnote","notebookDB","PouchDB","plugin","PouchdbFind","createIndex","index","corsProxy","branch","username","password","depth","rememberCredentials","cloneNotebook","notebook","put","console","log","http","url","ref","singleBranch","onAuth","auth","getGitSHA","sha","getDefaultNotebookNameFromGitURL","notebookID","get","nb","oldDirName","newDirName","dirName","cache","createCache","stagedFiles","status","authorName","authorEmail","message","onProgress","onMessage","onAuthFailure","onAuthSuccess","pullNotebook","numConflicts","author","email","restoreSHA","progress","pushResult","ok","updateNotebook","logs","oid","deleteNote","dirname","markdownHasConflicts","result","generateChangesCache","localStorage","setItem","JSON","fetchHead","hardResetNotebook","restoreFilesFromCache","LINEBREAKS","markerSize","ourName","theirName","ourContent","baseContent","theirContent","baseContentBlobResult","Buffer","from","blob","toString","theirContentBlobTresult","ours","base","theirs","diff3Merge","mergedText","hasConflict","item","join","conflict","repeat","b","removeItem","tags","m1","m2","m3","find","selector","$gt","notebookEntries","notebooks","n","pendingPull","getItem","filter","sort","x","y","localeCompare","lastIndexOf","UUIDNil","getGraphQLEndpoint","startGitHubOAuth","open","encodeURIComponent","copyToClipboard","clipboardData","setData","document","queryCommandSupported","textarea","createElement","textContent","style","position","body","appendChild","select","execCommand","ex","warn","removeChild","s","reduce","charCodeAt","Math","abs","parseFloat","key","color","hashCode","random","substr","getTodayName","today","moment","format","momentFormat","resolveNoteImageSrc","imageSrc","loadImageAsBase64","imageFilePath","base64","buffer","imageType","NotificationEventType","WidgetType","NotebookOrderBy","PageInfoFieldsFragmentDoc","gql","CommentWidgetMessageFieldsFragmentDoc","CommentWidgetMessageConnectionFieldsFragmentDoc","CommentWidgetFieldsFragmentDoc","NotebookFieldsFragmentDoc","NotificationFieldsFragmentDoc","ViewerFieldsFragmentDoc","SignUpDocument","SignInDocument","SignUpWithGitHubAccountDocument","SignInWithGitHubAccountDocument","SendEmailVerificationCodeDocument","ResetPasswordDocument","CreateCommentWidgetDocument","PostCommentWidgetMessageDocument","UpdateCommentWidgetMessageDocument","AddReactionToCommentWidgetDocument","RemoveReactionFromCommentWidgetDocument","AddReactionToCommentWidgetMessageDocument","RemoveReactionFromCommentWidgetMessageDocument","SubscribeToCommentWidgetDocument","UnsubscribeFromCommentWidgetDocument","LinkWithGitHubAccountDocument","UnlinkGitHubAccountDocument","DeleteNotificationDocument","DeleteAllNotificationsDocument","SetUserInfoDocument","DeleteWidgetDocument","UpdateWidgetDocument","CommentWidgetDocument","CommentWidgetMessagesDocument","GitHubUserDocument","NotificationsDocument","ViewerDocument","browserHistory","createBrowserHistory","useStyles","makeStyles","theme","createStyles","container","width","height","palette","primary","backgroundColor","background","default","wrapper","maxWidth","margin","transform","top","padding","boxSizing","marginBottom","errorMessage","card","GitHubOAuthCallback","props","classes","useTranslation","t","i18n","useState","accessToken","setAccessToken","setTitle","setUsername","setEmail","setErrorMessage","Urql","resLinkWithGitHubAccount","executeLinkWithGitHubAccount","resSignInWithGitHubAccount","executeSignInWithGitHubAccount","resSignUpWithGitHubAccount","executeSignUpWithGitHubAccount","useEffect","code","fetching","Noty","layout","timeout","show","signInWithGitHubAccount","user","location","reload","signUpWithGitHubAccount","backBtn","IconButton","onClick","Box","className","clsx","Fragment","Typography","variant","Card","elevation","TextField","label","value","onChange","event","target","fullWidth","currentTarget","focus","Button","disabled","isLocalhost","Boolean","hostname","register","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","then","response","contentType","headers","serviceWorker","ready","registration","unregister","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","EventType","ServiceWorkerWrapper","React","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","reloadPage","useCallback","postMessage","Snackbar","anchorOrigin","vertical","horizontal","action","size","globalEmitter","subscriptions","eventName","cb","eventCallbacks","findIndex","splice","forEach","callback","offset","SelectedSectionType","HomeSection","KeyMap","CrossnoteContainer","createContainer","initialState","crossnote","initialized","setInitialized","setNotebooks","isAddingNotebook","setIsAddingNotebook","isPushingNotebook","setIsPushingNotebook","isPullingNotebook","setIsPullingNotebook","isLoadingNotebook","setIsLoadingNotebook","isPerformingAutoFetch","setIsPerformingAutoFetch","Unknown","homeSection","setHomeSection","FlexLayout","Model","fromJson","global","splitterSize","tabSetEnableMaximize","tabSetHeaderHeight","tabSetTabStripHeight","borders","weight","selected","layoutModel","setLayoutModel","getNotebookAtPath","addTabNode","tabNode","activeTabset","getActiveTabset","modelChildren","getRoot","getChildren","needsToCreateNewTabSet","child","getType","doAction","Actions","setActiveTabset","getId","TabSetNode","_addChild","singleton","node","getNodeById","selectTab","component","tabs","eTabNode","eNote","_attributes","addNode","DockLocation","CENTER","closeTabNode","deleteTab","updateNoteMarkdown","newNote","emit","ModifiedMarkdown","tabId","updateNoteConfig","DeletedNote","changeNoteFilePath","oldNoteFilePath","ChangedNoteFilePath","newNoteFilePath","createNewNote","fileName","autoGeneratedFileName","untitled","foundToday","count","CreatedNote","openNoteAtPath","openTodayNote","duplicateNote","addNotebook","gitRememberCredentials","openLocalNotebook","showDirectoryPicker","deleteNotebook","DeletedNotebook","selectedNotebook","refreshNotebook","PerformedGitOperation","pushNotebook","args","checkoutNote","togglePin","newConfig","toggleFavorite","getStatus","listNotebooks","selectedNotebookID","useInterval","getTime","fetchNotebook","globalContainers","cloudContainer","settingsContainer","crossnoteContainer","Timer","attributes","useTheme","cursor","secondary","main","contrastText","borderRadius","display","justifyContent","boxShadow","isPreview","toLocaleString","smmsUploadImages","FormData","append","method","referrer","json","spacing","actionButtons","right","section","marginTop","dropArea","darken","paper","ImageWidget","setURL","imageUploaderElement","setImageUploaderElement","uploadingImages","setUploadingImages","Tooltip","removeSelf","Input","placeholder","onKeyDown","which","replaceSelf","e","preventDefault","stopPropagation","onchange","urls","click","multiple","element","AudioWidget","source","setSource","autoplay","setAutoplay","controls","setControls","loop","setLoop","muted","setMuted","autoPlay","src","attrs","setAttributes","FormControlLabel","control","Switch","checked","videoWrapper","paddingTop","video","left","VideoWidget","poster","setPoster","border","BilibiliWidget","setError","scrolling","frameBorder","allowFullScreen","aid","bvid","YoutubeWidget","alt","videoID","canvasWrapper","canvas","OCRWidget","setCanvas","setLink","imageDataURL","setImageDataURL","ocrDataURL","setOCRDataURL","imageDropAreaElement","setImageDropAreaElement","isProcessing","setIsProcessing","ocrProgresses","setOCRProgresses","getInitialLanguages","selectedLanguages","setSelectedLanguages","grayscaleChecked","setGrayscaleChecked","toggleLanguage","lang","imageObject","Image","context","getContext","onload","clearRect","fillStyle","fillRect","globalCompositeOperation","drawImage","toDataURL","onerror","setAttribute","List","ListItem","ListItemText","ListItemSecondaryAction","floor","FormGroup","Checkbox","ButtonGroup","input","worker","createWorker","logger","m","languagesArr","load","loadLanguage","initialize","recognize","terminate","ocr","startOCRFromLink","textAlign","reader","FileReader","readAsDataURL","imageWrapper","imagePreview","maxHeight","EditImageDialog","editor","marker","imageElement","setImageSrc","imageAlt","setImageAlt","imageTitle","setImageTitle","finalImageSrc","setFinalImageSrc","deleteImage","pos","replaceRange","to","onClose","updateImage","getAttribute","Dialog","zIndex","DialogTitle","DialogContent","autoFocus","helperText","DialogActions","openURL","decodeURIComponent","postprocessPreview","previewElement","isPresentationCallback","handleLinksClickEvent","preview","links","getElementsByTagName","onclick","hasAttribute","tag","resolveImages","images","image","childElementCount","tagName","toUpperCase","overflow","contentDocument","VickyMD","require","columnHeader","alignItems","kanbanCard","breakpoints","down","editorWrapper","KanbanColumnHeaderDisplay","column","board","refreshBoard","clickedTitle","setClickedTitle","titleValue","setTitleValue","onBlur","onKeyUp","description","cards","columns","l","KanbanCardDisplay","textAreaElement","setTextAreaElement","setPreviewElement","setEditor","setDescription","editorDialogOpen","setEditDialogOpen","editImageElement","setEditImageElement","editImageTextMarker","setEditImageTextMarker","editImageDialogOpen","setEditImageDialogOpen","fromTextArea","hashtag","keyMap","showCursorWhenSelecting","inputStyle","setValue","setOption","on","getValue","setTheme","themeName","renderPreview","linkIconClickedHandler","imageClickedHandler","loadImage","off","minWidth","KanbanWidget","setBoard","lanes","newBoard","renderColumnHeader","renderCard","dragging","allowAddColumn","allowAddCard","renderColumnAdder","marginLeft","wip","onNewColumnConfirm","newColumn","disableCardDrag","disableColumnDrag","onCardDragEnd","destination","fromPosition","fromColumnId","toPosition","toColumnId","fromColumn","toColumn","onColumnDragEnd","getMentionsFromMarkdown","toLocaleLowerCase","self","username2","contentString","titleMatch","aheadString","coverMatch","coverImagesMatch","mdImage","summary","html","EmptyPageInfo","hasPreviousPage","hasNextPage","startCursor","endCursor","GraphQLClient","createClient","exchanges","defaultExchanges","fetchOptions","Authorization","i18next","use","initReactI18next","init","interpolation","escapeValue","keySeparator","lng","fallbackLng","resources","translation","languageCodeToDateFNSLocale","zhCN","enUS","zhTW","ja","chatMessage","avatarPanel","gridTemplateAreas","gridColumnGap","avatar","gridArea","time","reactions","singleTime","modifiedCaption","reactionChip","actionBtnClass","CommentMessage","previousMessage","anchorEl","setAnchorEl","emojiPickerOpen","setEmojiPickerOpen","resAddReactionToCommentWidgetMessage","executeAddReactionToCommentWidgetMessageMutation","resRemoveReactionFromCommentWidgetMessage","executeRemoveReactionFromCommentWidgetMessageMutation","forceUpdate","setForceUpdate","handleClose","openPopper","modified","updatedAt","updateReactionSummaries","reaction","found","reactionSummaries","selfAuthored","Avatar","Identicon","sha256","formatRelative","locale","language","weightX","weightY","reactionSummary","Chip","marginRight","loggedIn","messageID","setAuthDialogOpen","emoji","Popover","transformOrigin","mentionUser","viewer","onModifyChatMessage","showSkinTones","onSelect","colons","root","flexDirection","bottom","toolbar","toolbarLeft","sendButton","CommentEditor","updateMessageID","updateMessageMarkdown","cancelUpdatingMessage","updateMessage","updatingMessage","sendMessage","sendingMessage","topBar","row","commentWrapper","messages","CommentDialog","fullScreen","useMediaQuery","commentWidget","instance","edges","edge","setMessages","messagesElement","setMessagesElement","pageInfo","latestPulledMessagePageInfo","setLatestPulledMessagePageInfo","setUpdateMessageID","query","useCommentWidgetMessagesQuery","variables","widgetID","before","after","first","last","requestPolicy","pause","resMessagesAfter","executeMessagesAfterQuery","resPostMessage","executePostMessageMutation","resUpdateMessage","executeUpdateMessageMutation","resSubscribeToCommentWidget","executeSubscribeToCommentWidgetMutation","resUnsubscribeFromCommentWidget","executeUnsubscribeFromCommentWidgetMutation","replaceSelection","subscribeToChatGroup","subscribed","unsubscribeFromChatGroup","notifyUsers","addMessage","xC","yC","scrollMessagesToBottom","scrollTop","scrollHeight","fetchPreviousMessages","postCommentWidgetMessage","updateCommentWidgetMessage","connection","widget","paddingBottom","commentMessage","topPanel","widgetTitle","widgetSourceLink","WidgetTopPanel","resDeleteWidget","executeDeleteWidgetMutation","executeUpdateWidgetMutation","widgetSource","setWidgetSource","deleteWidget","updateWidget","closeEditDialog","err","whiteSpace","Link","owner","canConfigure","paddingLeft","paddingRight","interactionPanel","button","CommentWidget","commentDialogOpen","setCommentDialogOpen","resCreateCommentWidget","executeCreateCommentWidgetMutation","useCommentWidgetQuery","resCommentWidget","executeCommentWidgetQuery","executeAddReactionToCommentWidgetMutation","executeRemoveReactionFromCommentWidgetMutation","setCommentWidget","reactionsCount","createWidget","getHeaderFromMarkdown","messagesCount","Badge","actionButtonsGroup","GitHubGistWidget","setGistURL","host","pathname","registerWidgetCreator","el","ReactDOM","render","ThemeProvider","muiTheme","ErrorWidget","VickyMDVersion","dependencies","vickymd","CrossnoteTheme","muiThemeOptions","createMuiTheme","DarkTheme","common","black","white","lighten","light","dark","divider","hint","active","LightTheme","blue","orange","OneDarkTheme","cyan","blueGrey","SolarizedLight","amber","VickyMDSetTheme","baseUri","_themeManager","themes","selectedTheme","selectTheme","addTheme","themeManager","SettingsContainer","v","setLanguage","editorCursorColor","setEditorCursorColor","setAuthorName","setAuthorEmail","getTheme","DEFAULT","VIM","EMACS","setKeyMap","_setLanguage","changeLanguage","_setEditorCursorColor","_setAuthorName","_setAuthorEmail","_setTheme","_setKeyMap","AddNotebookDialog","useContainer","notebookName","setNotebookName","expanded","setExpanded","setGitURL","setGitBranch","setGitUsername","setGitPassword","setGitCorsProxy","rememberCredentialsChecked","setRememberCredentialsChecked","startIcon","Divider","Accordion","AccordionSummary","expandIcon","AccordionDetails","canCancel","Stage","CloudContainer","authDialogOpen","setLoggedIn","setViewer","useViewerQuery","resViewer","executeViewerQuery","resSetUserInfo","executeSetUserInfoMutation","setSelectedNotebook","displayNotebookPreview","setDisplayNotebookPreview","refetchViewer","pollInterval","setUserInfo","cover","bio","reduceNotificationsCountByOne","notifications","totalCount","max","clearNotificationsCount","logout","form","header","authBtn","switchLink","AuthDialog","Signin","stage","setStage","setPassword","passwordConfirmation","setPasswordConfirmation","verificationCode","setVerificationCode","resSignIn","executeSignInMutation","resSignUp","executeSignUpMutation","resSendEmailVerificationCode","executeSendEmailVerificationCodeMutation","resResetPassword","executeResetPasswordMutation","signin","signup","sendEmailVerificationCode","resetPassword","signIn","signUp","setTimeout","Signup","ForgotPassword","icon","LanguageSelectorDialog","languages","setOpen","titleLanguage","setTitleLanguage","chooseLanguage","fontSize","PrivacyPolicy","Hidden","smUp","implementation","toggleDrawer","constructGraphView","nodes","addedNodes","lastIndex","referredByFilePath","hash","graphViewPanel","GraphView","graphViewData","setGraphViewData","useRef","setWidth","setHeight","current","resize","offsetWidth","offsetHeight","removeEventListener","refreshGraphViewData","newGraphViewData","modifiedMarkdownCallback","createdNoteCallback","deletedNoteCallback","changedNoteFilePathCallback","performedGitOperationCallback","deletedNotebookCallback","svg","d3","attr","scaleExtent","zoomHandler","selectAll","enter","d","fixna","isFinite","neigh","n1","n2","hasRelation","updateLink","updateNode","graphLayout","strength","distance","call","o","sourceEvent","alphaTarget","restart","raise","drag","EditorMode","FloatWin","win","closeBtn","visible","titlebar","querySelector","boxX","boxY","mouseX","mouseY","offsetX","offsetY","hide","ev","keyCode","offsetLeft","offsetTop","getMouseXY","move","up","test","documentElement","clientWidth","clientHeight","min","pageX","pageY","clientX","scrollLeft","clientLeft","clientY","clientTop","moveToCenter","moveTo","innerWidth","innerHeight","ChangeFilePathDialog","inputEl","setInputEl","setNewFilePath","changeFilePath","setSelectionRange","start","end","inputRef","DeleteNoteDialog","DialogContentText","secondaryColor","NotePopover","deleteNoteDialogOpen","setDeleteNoteDialogOpen","changeNoteFilePathDialogOpen","setChangeNoteFilePathDialogOpen","needsToPrint","setNeedsToPrint","shareAnchorEl","setShareAnchorEl","tempPreviewElement","classList","bannerElement","innerHTML","currentTheme","printDone","previewIsPresentation","VickyMDPrintPreview","printPreview","anchorElement","keepMounted","ListItemIcon","OrderBy","OrderDirection","noteCard","borderLeft","unselected","leftPanel","duration","rightPanel","borderBottom","wordBreak","imagesWrapper","backgroundSize","backgroundPosition","pin","markdownPreview","NoteCard","setHeader","setSummary","setImages","gitStatus","setGitStatus","popoverElement","setPopoverElement","setNote","setReferences","formatDistanceStrict","openNote","referredNote","generateSummaryFromMarkdown","imageSrcs","arrow","fontWeight","backgroundImage","notesList","updatePanel","Notes","setNotes","masonryInstance","searchValue","unpinned","regexp","RegExp","scrollElement","hack","initialHeight","initialFlex","flex","Skeleton","animation","once","scrollContainer","notesPanel","fixedTopPanel","sectionName","shape","fade","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","loading","sortSelected","NotesPanel","sortMenuAnchorEl","setSortMenuAnchorEl","isCreatingNote","setIsCreatingNote","ModifiedAt","orderBy","setOrderBy","DESC","orderDirection","setOrderDirection","rawNotesMap","setRawNotesMap","needsToRefreshRawNotes","setNeedsToRefreshRawNotes","initialSearchValue","setSearchValue","searchValueInputTimeout","setSearchValueInputTimeout","finalSearchValue","setFinalSearchValue","setFixedTopPanel","onChangeSearchValue","clearTimeout","refreshRawNotes","getReferredByNotes","CreatedAt","Title","containerElement","parentElement","scrollEvent","InputBase","inputProps","autoComplete","autoCorrect","ASC","CircularProgress","HMDFold","math","notePanel","contentPanel","presentation","controlBtn","controlBtnSelected","controlBtnSelectedSecondary","floatWin","floatWinHidden","floatWinTitle","floatWinContent","floatWinClose","bottomPanel","cursorPositionInfo","NotePanel","noteTitle","setNoteTitle","Preview","editorMode","setEditorMode","setPreviewIsPresentation","line","ch","cursorPosition","setCursorPosition","mathPreviewElement","notePopoverElement","setNotePopoverElement","confirmNoteTitle","finalNoteTitle","previewPostprocessPreview","flag","renameTab","hmdFold","hmdClick","info","cm","ctrlKey","altKey","getCursor","winElement","mathRenderer","supressed","onPreview","expr","hmd","FoldMath","createRenderer","getElementById","onChanged","cursorPos","charCoords","isReady","startRender","onPreviewEnd","initMathPreview","innerText","switchToHyperMD","getWrapperElement","refresh","SourceCode","switchToNormal","SplitView","changesHandler","getOption","onChangeHandler","changeObject","getLine","showHint","closeOnUnfocus","completeSingle","getTokenAt","lineStr","currentWord","cur","iconWrapper","iconElement","descriptionElement","commandElement","command","commands","date","filtered","toLowerCase","list","doubleSemiColon","def","EmojiDefinitions","displayText","fuzzy","searchResult","val","aheadStr","withinWikiLink","filtPath","onCursorActivityHandler","aria-label","settingsPanel","settingsCard","loggedInSection","saveBtn","logoutBtn","swatch","editorText","editorCursor","borderLeftStyle","borderLeftWidth","getRGBA","inputStr","r","parseInt","g","Settings","colorPickerAnchorElement","setColorPickerAnchorElement","displayColorPicker","setAvatar","uploadingAvatar","setUploadingAvatar","useGitHubUserQuery","resGitHubUser","resUnlinkGitHubAccount","executeUnlinkGitHubAccount","widgetsCount","InputLabelProps","shrink","githubUser","login","onDelete","Select","MenuItem","borderLeftColor","cursorColor","rgb","GitCommit","mainPanel","borderColor","MainPanel","factory","getConfig","getName","getComponent","renderElement","Layout","model","ConfigureNotebookDialog","setAutoFetchPeriod","clickDeleteCount","setClickDeleteCount","clickHardResetCount","setClickHardResetCount","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","isNaN","endAdornment","InputAdornment","textField","PushNotebookDialog","commitMessage","setCommitMessage","treeItemRoot","treeItemContent","typography","fontWeightMedium","fontWeightRegular","treeItemGroup","treeItemExpanded","treeItemLabel","treeItemLabelRoot","treeItemLabelIcon","treeItemLabelText","flexGrow","NotebookTreeView","notebookConfigurationDialogOpen","setNotebookConfigurationDialogOpen","pushNotebookDialogOpen","setPushNotebookDialogOpen","favoritedNotes","setFavoritedNotes","refreshQuickAccessNotes","handleChange","refreshNotesIfNotLoaded","isFavorited","Notebooks","TreeView","defaultExpandIcon","disableFocusRipple","disableRipple","defaultCollapseIcon","defaultEndIcon","onNodeToggle","TreeItem","nodeId","group","role","onCloseDrawer","page","appBar","drawer","toolBar","displayNone","flexShrink","drawerPaper","notebooksSection","overflowY","controllersSection","listItemIcon","selectedSection","menuButton","editorPanel","toolBarSpace","mixins","fab","Home","addNotebookDialogOpen","setAddNotebookDialogOpen","addNotebookRepo","setAddNotebookRepo","addNotebookBranch","setAddNotebookBranch","drawerOpen","setDrawerOpen","queryParams","repo","disablePadding","disableGutters","badgeContent","CssBaseline","Drawer","ModalProps","xsDown","Fab","is","App","handler","prompt","userChoice","choiceResult","history","exact","qs","safari","copyTitle","copyBody","copyShareButtonLabel","copyAddHomeButtonLabel","copyClosePrompt","NotificationsContainer","setPageInfo","setNotifications","needsRefetch","setNeedsRefetch","useNotificationsQuery","resNotifications","executeNotificationsQuery","resDeleteNotification","executeDeleteNotificationMutation","resDeleteAllNotifications","executeDeleteAllNotificationsMutation","fetchMoreNotifications","deleteNotification","notificationID","notification","deleteAllNotifications","ns","newNotifications","reverse","Provider"],"mappings":"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","file":"static/js/main.85df32c5.chunk.js","sourcesContent":["// Local File System API\n\nimport { Stats } from \"fs\";\nimport { randomID } from \"../utilities/utils\";\n\nexport interface ReadFileOptions {\n  encoding?: string;\n}\n\nexport async function verifyPermission(\n  fileHandle: FileSystemHandle,\n  mode?: FileSystemPermissionMode,\n) {\n  const options: FileSystemHandlePermissionDescriptor = {\n    mode,\n  };\n  // Check if permission was already granted. If so, return true.\n  if ((await fileHandle.queryPermission(options)) === \"granted\") {\n    return true;\n  }\n  // Request permission. If the user grants permission, return true.\n  if ((await fileHandle.requestPermission(options)) === \"granted\") {\n    return true;\n  }\n  // The user didn't grant permission, so return false.\n  return false;\n}\n\nexport default class LocalFileSystem {\n  private directoryHandleMap: { [key: string]: FileSystemDirectoryHandle } = {};\n  private _prefix: string;\n\n  constructor() {\n    this._prefix = randomID();\n  }\n\n  public async attachLocalDirectory(\n    rootDir: string,\n    directoryHandle: FileSystemDirectoryHandle,\n  ): Promise<string> {\n    if (!rootDir) {\n      rootDir = randomID();\n    }\n    if (!rootDir.startsWith(\"/\")) {\n      rootDir = \"/\" + rootDir;\n    }\n    if (!rootDir.startsWith(`/${this._prefix}`)) {\n      rootDir = `/${this._prefix}` + rootDir;\n    }\n    if (!rootDir.endsWith(\"/\")) {\n      rootDir += \"/\";\n    }\n    this.directoryHandleMap[rootDir] = directoryHandle;\n    return rootDir;\n  }\n\n  public isPathOfLocalFileSystem(path: string) {\n    return path.startsWith(\"/\" + this._prefix);\n  }\n\n  private async helper(\n    path: string,\n    mode: FileSystemPermissionMode = \"readwrite\",\n  ): Promise<[FileSystemDirectoryHandle, string[]]> {\n    const pathArr = path.replace(/\\/+$/, \"\").split(\"/\");\n    const rootDir = \"/\" + pathArr[1] + \"/\" + pathArr[2] + \"/\";\n    const directoryHandle = this.directoryHandleMap[rootDir];\n    await verifyPermission(directoryHandle, mode);\n    return [directoryHandle, pathArr.slice(3, pathArr.length)];\n  }\n\n  public async readFile(\n    path: string,\n    opts: ReadFileOptions = { encoding: \"\" },\n  ): Promise<string | Uint8Array> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      const file = await (\n        await directoryHandle.getFileHandle(pathArr[i])\n      ).getFile();\n      if (opts.encoding && opts.encoding.match(/^utf-?8$/i)) {\n        return file.text();\n      } else {\n        return new Uint8Array(await file.arrayBuffer());\n      }\n    }\n  }\n\n  public async writeFile(path: string, data: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i], {\n          create: true,\n        });\n      }\n      const fileHandle = await directoryHandle.getFileHandle(pathArr[i], {\n        create: true,\n      });\n      const writable = await fileHandle.createWritable();\n      await writable.write(data);\n      await writable.close();\n    }\n  }\n\n  public async readdir(path: string): Promise<string[]> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      const names = [];\n      for await (const entry of directoryHandle.values()) {\n        names.push(entry.name);\n      }\n      return names;\n    }\n  }\n\n  public async unlink(path: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      return await directoryHandle.removeEntry(pathArr[i], { recursive: true });\n    }\n  }\n\n  public async stats(path: string): Promise<Stats> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      let fHandle: FileSystemFileHandle = null;\n      let dHandle: FileSystemDirectoryHandle = null;\n      try {\n        dHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      } catch (error) {\n        try {\n          fHandle = await directoryHandle.getFileHandle(pathArr[i]);\n        } catch (error) {\n          throw error;\n        }\n      }\n      const stats: any = {\n        isDirectory: () => {\n          return !!dHandle;\n        },\n        isFile: () => {\n          return !!fHandle;\n        },\n        ctimeMs: fHandle ? (await fHandle.getFile()).lastModified : Date.now(),\n        mtimeMs: fHandle ? (await fHandle.getFile()).lastModified : Date.now(),\n      };\n      return stats;\n    }\n  }\n\n  public async mkdir(path: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      for (let i = 0; i < pathArr.length; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i], {\n          create: true,\n        });\n      }\n    }\n  }\n\n  public async exists(path: string): Promise<boolean> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        try {\n          directoryHandle = await directoryHandle.getDirectoryHandle(\n            pathArr[i],\n          );\n        } catch (error) {\n          return false;\n        }\n      }\n      try {\n        await directoryHandle.getFileHandle(pathArr[i]);\n        return true;\n      } catch (error) {\n        try {\n          await directoryHandle.getDirectoryHandle(pathArr[i]);\n          return true;\n        } catch (error) {\n          return false;\n        }\n      }\n    }\n  }\n\n  public async rmdir(path: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      return await directoryHandle.removeEntry(pathArr[i], { recursive: true });\n    }\n  }\n\n  public mkdirp = this.mkdir;\n\n  /**\n   * Assuming rename only file but not path\n   * @param oldPath\n   * @param newPath\n   */\n  public async rename(oldPath: string, newPath: string): Promise<void> {\n    const data = await this.readFile(oldPath, { encoding: \"utf-8\" }); // Could be buggy for binary file\n    await this.writeFile(newPath, data as any);\n    await this.unlink(oldPath);\n  }\n}\n","// @ts-ignore\nimport LightningFS from \"@isomorphic-git/lightning-fs\";\nimport { Stats } from \"fs\";\nimport * as path from \"path\";\nimport { randomID } from \"../utilities/utils\";\nimport LocalFileSystem, { ReadFileOptions } from \"./localFileSystem\";\n\ninterface AttachLocalDirectory {\n  id: string;\n  directoryHandle: FileSystemDirectoryHandle;\n}\n\nclass FileSystem {\n  private fs: any;\n  private lfs: LocalFileSystem;\n\n  public readFile: (\n    path: string,\n    opts?: ReadFileOptions,\n  ) => Promise<string | Uint8Array>;\n  public writeFile: (path: string, data: string) => Promise<void>;\n  public readdir: (path: string) => Promise<string[]>;\n  public unlink: (path: string) => Promise<void>;\n  public stats: (path: string) => Promise<Stats>;\n  public mkdir: (path: string) => Promise<void>;\n  public exists: (path: string) => Promise<boolean>;\n  public rename: (oldPath: string, newPath: string) => Promise<void>;\n  public rmdir: (path: string) => Promise<void>;\n  public mkdirp: (path: string) => Promise<void>;\n\n  constructor(fs: any) {\n    this.fs = fs;\n    this.lfs = new LocalFileSystem();\n    this.setUpFSMethods();\n  }\n\n  public async attachLocalDirectory({\n    id = randomID(),\n    directoryHandle,\n  }: AttachLocalDirectory) {\n    return await this.lfs.attachLocalDirectory(id, directoryHandle);\n  }\n\n  private setUpFSMethods() {\n    this.readFile = (path: string, opts?: any) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.readFile(path, opts);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.readFile(path, opts, (error: Error, data: string) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve(data);\n            }\n          });\n        });\n      }\n    };\n    this.writeFile = (path: string, data: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.writeFile(path, data);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.writeFile(\n            path,\n            data,\n            { encoding: \"utf8\" },\n            (error: Error) => {\n              if (error) {\n                return reject(error);\n              } else {\n                return resolve();\n              }\n            },\n          );\n        });\n      }\n    };\n    this.readdir = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.readdir(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.readdir(path, (error: Error, files: string[]) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve(files);\n            }\n          });\n        });\n      }\n    };\n    this.unlink = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.unlink(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.unlink(path, (error: Error) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve();\n            }\n          });\n        });\n      }\n    };\n    this.stats = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.stats(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.stat(path, (error: Error, stats: Stats) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve(stats);\n            }\n          });\n        });\n      }\n    };\n    this.mkdir = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.mkdir(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.mkdir(path, \"0777\", (error: Error) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve();\n            }\n          });\n        });\n      }\n    };\n    this.exists = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.exists(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.stat(path, (error: Error, stats: Stats) => {\n            if (error) {\n              return resolve(false);\n            } else {\n              return resolve(true);\n            }\n          });\n        });\n      }\n    };\n    const rename = async (oldPath: string, newPath: string): Promise<void> => {\n      const stats = await this.stats(oldPath);\n      if (stats.isDirectory()) {\n        await this.mkdirp(newPath);\n      } else {\n        await this.mkdirp(path.dirname(newPath));\n      }\n\n      if (this.lfs.isPathOfLocalFileSystem(newPath)) {\n        return this.lfs.rename(oldPath, newPath);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.rename(oldPath, newPath, (error: Error) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve();\n            }\n          });\n        });\n      }\n    };\n    this.rename = async (oldPath: string, newPath: string) => {\n      const oldPathStat = await this.stats(oldPath);\n      let newPathStat: Stats;\n      if (await this.exists(newPath)) {\n        newPathStat = await this.stats(newPath);\n      } else {\n        newPathStat = null;\n      }\n      if (\n        oldPathStat.isDirectory() ||\n        (newPathStat && newPathStat.isDirectory())\n      ) {\n        const files = await this.readdir(oldPath);\n        // const promises = []; // <= It seems to cause bug if run parallel\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const filePath = path.resolve(oldPath, file);\n          const stats = await this.stats(filePath);\n          if (stats.isDirectory()) {\n            await this.rename(filePath, path.resolve(newPath, file));\n          } else {\n            await rename(filePath, path.resolve(newPath, file));\n          }\n        }\n        // await Promise.all(promises);\n        await this.rmdir(oldPath);\n      } else {\n        await rename(oldPath, newPath);\n      }\n    };\n    const rmdir = (path: string): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        this.fs.rmdir(path, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    // Remove the directory recursively\n    this.rmdir = async (dirPath: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(dirPath)) {\n        return this.lfs.rmdir(dirPath);\n      } else {\n        const files = await this.readdir(dirPath);\n        const promises = [];\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const filePath = path.resolve(dirPath, file);\n          const stats = await this.stats(filePath);\n          if (stats.isDirectory()) {\n            promises.push(this.rmdir(filePath));\n          } else {\n            promises.push(this.unlink(filePath));\n          }\n        }\n        await Promise.all(promises);\n        await rmdir(dirPath);\n      }\n    };\n\n    this.mkdirp = async (dirPath: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(dirPath)) {\n        return this.lfs.mkdir(dirPath);\n      } else {\n        if (await this.exists(dirPath)) {\n          return;\n        } else {\n          await this.mkdirp(path.dirname(dirPath));\n          await this.mkdir(dirPath);\n        }\n      }\n    };\n  }\n}\n\nexport const fs = new LightningFS(\"fs\");\nexport const pfs = new FileSystem(fs);\n","// const loadLanguages = require(\"prismjs/components/\");\n// loadLanguages([\"python\"]);\n\nexport const TagStopRegExp = /[@#,.!$%^&*()[\\]-_+=~`<>?\\\\，。]/g;\nexport function getTags(markdown: string): string[] {\n  const tags = new Set(\n    markdown.match(\n      /(#([^#]+?)#[\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\，。])|(#[^\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\，。]+)/g,\n    ) || [],\n  );\n  return Array.from(tags).map(\n    (tag) => tag.replace(TagStopRegExp, \"\").trim(), // Don't remove \\s here\n  );\n}\n\nexport function sanitizeTag(tagName: string): string {\n  let tag = tagName.trim() || \"\";\n  return tag\n    .replace(/\\s+/g, \" \")\n    .replace(TagStopRegExp, \"\")\n    .split(\"/\")\n    .map((t) => t.trim())\n    .filter((x) => x.length > 0)\n    .join(\"/\");\n}\n\nexport function sanitizeNoteTitle(noteTitle: string): string {\n  return sanitizeTag(noteTitle);\n}\n\nexport interface MatterOutput {\n  data: any;\n  content: string;\n}\n\nexport function matter(markdown: string): MatterOutput {\n  let endFrontMatterOffset = 0;\n  let frontMatter = {};\n  if (\n    markdown.startsWith(\"---\") &&\n    /* tslint:disable-next-line:no-conditional-assignment */\n    (endFrontMatterOffset = markdown.indexOf(\"\\n---\")) > 0\n  ) {\n    const frontMatterString = markdown.slice(3, endFrontMatterOffset);\n    try {\n      frontMatter = (window as any)[\"YAML\"].parse(frontMatterString);\n    } catch (error) {}\n    markdown = markdown\n      .slice(endFrontMatterOffset + 4)\n      .replace(/^[ \\t]*\\n/, \"\");\n  }\n  return {\n    data: frontMatter,\n    content: markdown,\n  };\n}\n\nexport function matterStringify(markdown: string, frontMatter: any) {\n  frontMatter = frontMatter || {};\n  const yamlStr = (window as any)[\"YAML\"].stringify(frontMatter).trim();\n  if (yamlStr === \"{}\" || !yamlStr) {\n    return markdown;\n  } else {\n    return `---\n${yamlStr}\n---\n${markdown}`;\n  }\n}\n","import Token from \"markdown-it/lib/token\";\n\nexport interface Reference {\n  parentToken: Token;\n  token: Token;\n  text: string;\n  link: string;\n}\n\nexport class ReferenceMap {\n  public map: { [key: string]: { [key: string]: Reference[] } };\n  constructor() {\n    this.map = {};\n  }\n\n  public addReference(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n    reference?: Reference,\n  ) {\n    if (noteFilePath === referredByNoteFilePath && !reference) {\n      if (!(noteFilePath in this.map)) {\n        this.map[noteFilePath] = {};\n      }\n      return;\n    }\n    if (!reference) {\n      return;\n    }\n    if (noteFilePath in this.map) {\n      const mentionedBys = this.map[noteFilePath];\n      if (referredByNoteFilePath in mentionedBys) {\n        mentionedBys[referredByNoteFilePath].push(reference);\n      } else {\n        mentionedBys[referredByNoteFilePath] = [reference];\n      }\n    } else {\n      this.map[noteFilePath] = {\n        [referredByNoteFilePath]: [reference],\n      };\n    }\n  }\n\n  public deleteReferences(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n  ) {\n    if (noteFilePath === referredByNoteFilePath) {\n      delete this.map[noteFilePath];\n      return;\n    }\n    if (noteFilePath in this.map) {\n      if (referredByNoteFilePath in this.map[noteFilePath]) {\n        delete this.map[noteFilePath][referredByNoteFilePath];\n      }\n    }\n  }\n\n  public hasRelation(filePath1: string, filePath2: string) {\n    return (\n      (filePath1 in this.map && filePath2 in this.map[filePath1]) ||\n      (filePath2 in this.map && filePath1 in this.map[filePath2]) ||\n      filePath1 === filePath2\n    );\n  }\n\n  public getReferences(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n  ): Reference[] {\n    if (noteFilePath in this.map) {\n      if (referredByNoteFilePath in this.map[noteFilePath]) {\n        return this.map[noteFilePath][referredByNoteFilePath];\n      }\n    }\n    return [];\n  }\n\n  public noteHasReferences(filePath: string): boolean {\n    return filePath in this.map;\n  }\n}\n","import MiniSearch, { SearchOptions, SearchResult } from \"minisearch\";\n\nexport interface SearchDoc {\n  id: string;\n  title: string;\n  filePath: string;\n}\n\nexport default class Search {\n  public miniSearch: MiniSearch<SearchDoc>;\n\n  /**\n   * filePath -> title -> SearchDoc\n   */\n  private _cache: { [key: string]: { [key: string]: SearchDoc } };\n  constructor() {\n    this.miniSearch = new MiniSearch<SearchDoc>({\n      fields: [\"title\", \"filePath\"],\n      storeFields: [\"title\", \"filePath\"],\n      tokenize: (string) => {\n        return (\n          string\n            .replace(/[!@#$%^&*()[\\]{},.?/\\\\=+\\-_，。=（）【】]/g, \" \")\n            .match(/([^\\x00-\\x7F]|\\w+)/g) || []\n        );\n      },\n    });\n    this._cache = {};\n  }\n\n  add(filePath: string, title: string) {\n    if (!(filePath in this._cache)) {\n      this._cache[filePath] = {};\n    }\n    if (title in this._cache[filePath]) {\n      return;\n    }\n\n    const searchDoc = {\n      id: filePath + \"#\" + title,\n      filePath,\n      title,\n    };\n    this.miniSearch.add(searchDoc);\n    this._cache[filePath][title] = searchDoc;\n  }\n\n  remove(filePath: string, title: string) {\n    if (filePath in this._cache) {\n      const c = this._cache[filePath];\n      const doc = c[title];\n      if (doc) {\n        this.miniSearch.remove(doc);\n      }\n      delete c[title];\n    }\n  }\n\n  removeAll(filePath: string) {\n    if (filePath in this._cache) {\n      const docs: SearchDoc[] = [];\n      const c = this._cache[filePath];\n      for (const title in c) {\n        const doc = c[title];\n        if (doc) {\n          docs.push(doc);\n        }\n        delete c[title];\n      }\n      this.miniSearch.removeAll(docs);\n    }\n  }\n\n  search(queryString: string, options?: SearchOptions): SearchResult[] {\n    return this.miniSearch.search(queryString, options);\n  }\n}\n","import * as git from \"isomorphic-git\";\nimport Token from \"markdown-it/lib/token\";\nimport * as path from \"path\";\nimport { md } from \"vickymd/preview\";\n// import { isFileAnImage } from \"../utilities/image\";\nimport { matter, matterStringify } from \"../utilities/markdown\";\nimport { fs, pfs } from \"./fs\";\nimport { Mentions, Note, NoteConfig, Notes } from \"./note\";\nimport { Reference, ReferenceMap } from \"./reference\";\nimport Search from \"./search\";\n\n/**\n * Change \"createdAt\" to \"created\", and \"modifiedAt\" to \"modified\"\n * @param noteConfig\n */\nfunction formatNoteConfig(noteConfig: NoteConfig) {\n  const newObject: any = Object.assign({}, noteConfig);\n\n  newObject[\"created\"] = noteConfig.createdAt;\n  delete newObject[\"createdAt\"];\n\n  newObject[\"modified\"] = noteConfig.modifiedAt;\n  delete newObject[\"modifiedAt\"];\n\n  return newObject;\n}\n\ninterface RefreshNotesArgs {\n  dir: string;\n  includeSubdirectories?: boolean;\n  refreshRelations?: boolean;\n}\n\nexport class Notebook {\n  // basic info\n  public _id: string;\n  public dir: string;\n  public name: string;\n\n  // git\n  public gitURL: string;\n  public gitBranch: string;\n  public gitCorsProxy?: string;\n  public gitUsername?: string;\n  public gitPassword?: string;\n  public autoFetchPeriod: number; // in milliseconds\n  public fetchedAt: Date;\n  public remoteSha: string;\n  public localSha: string;\n\n  /**\n   * @param key: file path\n   */\n  public notes: Notes;\n\n  public isLocal: boolean;\n\n  private loadedNotes: boolean;\n\n  public referenceMap: ReferenceMap;\n\n  public search: Search;\n\n  constructor() {\n    this.notes = {};\n    this.isLocal = false;\n    this.loadedNotes = false;\n    this.referenceMap = new ReferenceMap();\n  }\n\n  public initSearch() {\n    this.search = new Search();\n  }\n\n  public noteHasReferences(filePath: string): boolean {\n    return this.referenceMap.noteHasReferences(filePath);\n  }\n\n  public async getReferredByNotes(filePath: string): Promise<Notes> {\n    if (filePath in this.referenceMap.map) {\n      const map = this.referenceMap.map[filePath];\n      const notes: Notes = {};\n      for (let rFilePath in map) {\n        const note = await this.getNote(rFilePath);\n        if (note) {\n          notes[rFilePath] = note;\n        }\n      }\n      return notes;\n    } else {\n      return {};\n    }\n  }\n\n  public getReferences(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n  ): Reference[] {\n    return this.referenceMap.getReferences(\n      noteFilePath,\n      referredByNoteFilePath,\n    );\n  }\n\n  async processNoteMentionsAndMentionedBy(filePath: string) {\n    const note = await this.getNote(filePath);\n    if (!note) {\n      return;\n    }\n    // Get mentions\n    const tokens = md.parse(note.markdown, {});\n    const resolveLink = (link: string) => {\n      if (!link.endsWith(\".md\")) {\n        link = link + \".md\";\n      }\n      if (link.startsWith(\"/\")) {\n        return path.relative(this.dir, path.join(this.dir, \".\" + link));\n      } else {\n        return path.relative(\n          this.dir,\n          path.join(path.dirname(path.join(this.dir, note.filePath)), link),\n        );\n      }\n    };\n    const traverse = function (\n      tokens: Token[],\n      parentToken: Token,\n      results: Reference[],\n      level: number,\n    ): Reference[] {\n      for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i];\n        if (token.type === \"wikilink\") {\n          // TODO: Support normal links\n          const arr = token.content.split(\"|\");\n          const text = (arr.length > 1 ? arr[1] : arr[0]).trim();\n          let link = arr[0].trim();\n          if (link.match(/https?:\\/\\//)) {\n            // TODO: Ignore more protocols\n            continue;\n          }\n          // console.log(\"find link token: \", token, parentToken);\n          results.push({\n            text,\n            link: resolveLink(link),\n            parentToken,\n            token,\n          });\n        } else if (token.type === \"tag\") {\n          const text = token.content.trim();\n          const link = token.content.trim();\n          // console.log(\"find link token: \", token, parentToken);\n          results.push({\n            text,\n            link: resolveLink(link),\n            parentToken,\n            token,\n          });\n        } else if (token.children && token.children.length) {\n          traverse(token.children, token, results, level + 1);\n        }\n      }\n      return results;\n    };\n\n    const references = traverse(tokens, null, [], 0);\n    const mentions: Mentions = {};\n    const oldMentions = note.mentions;\n\n    // Remove old references\n    for (let filePath in oldMentions) {\n      this.referenceMap.deleteReferences(filePath, note.filePath);\n    }\n\n    // Handle new references\n    for (let i = 0; i < references.length; i++) {\n      const { link } = references[i];\n      mentions[link] = true;\n      this.referenceMap.addReference(link, note.filePath, references[i]);\n    }\n\n    // Add self to reference map\n    this.referenceMap.addReference(note.filePath, note.filePath, null);\n\n    // Update the mentions\n    note.mentions = mentions;\n  }\n\n  public async changeNoteFilePath(\n    oldFilePath: string,\n    newFilePath: string,\n  ): Promise<Note> {\n    newFilePath = newFilePath.replace(/^\\/+/, \"\");\n    if (!newFilePath.endsWith(\".md\")) {\n      newFilePath = newFilePath + \".md\";\n    }\n\n    await this.removeNoteRelations(oldFilePath);\n    this.search.removeAll(oldFilePath);\n\n    // git related works\n    const newDirPath = path.dirname(path.resolve(this.dir, newFilePath));\n    await pfs.mkdirp(newDirPath);\n\n    // TODO: Check if newFilePath already exists. If so don't overwrite\n    const exists = await pfs.exists(path.resolve(this.dir, newFilePath));\n    if (exists) {\n      throw new Error(\"error/target-file-already-exists\");\n    }\n\n    await pfs.rename(\n      path.resolve(this.dir, oldFilePath),\n      path.resolve(this.dir, newFilePath),\n    );\n    if (!this.isLocal) {\n      await git.remove({\n        fs: fs,\n        dir: this.dir,\n        filepath: oldFilePath,\n      });\n      await git.add({\n        fs: fs,\n        dir: this.dir,\n        filepath: newFilePath,\n      });\n    }\n\n    return await this.getNote(newFilePath, true);\n  }\n\n  public async checkoutNote(note: Note): Promise<Note> {\n    try {\n      await git.checkout({\n        fs: fs,\n        dir: this.dir,\n        // ref: \"HEAD\"\n        // ref: note.notebook.gitBranch,\n        filepaths: [note.filePath],\n        force: true,\n      });\n      if (await pfs.exists(path.resolve(this.dir, note.filePath))) {\n        await git.add({\n          // .remove is wrong\n          fs: fs,\n          dir: this.dir,\n          filepath: note.filePath,\n        });\n      }\n      return await this.getNote(note.filePath, true);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  public async getNote(\n    filePath: string,\n    refreshNoteRelations = false,\n  ): Promise<Note> {\n    if (!refreshNoteRelations && filePath in this.notes) {\n      return this.notes[filePath];\n    }\n    const absFilePath = path.resolve(this.dir, filePath);\n    let stats;\n    try {\n      stats = await pfs.stats(absFilePath);\n    } catch (error) {\n      return null;\n    }\n    if (stats.isFile() && filePath.endsWith(\".md\")) {\n      let markdown = (await pfs.readFile(absFilePath, {\n        encoding: \"utf8\",\n      })) as string;\n\n      // Read the noteConfig, which is like <!-- note {...} --> at the end of the markdown file\n      let noteConfig: NoteConfig = {\n        // id: \"\",\n        createdAt: new Date(stats.ctimeMs),\n        modifiedAt: new Date(stats.mtimeMs),\n      };\n\n      try {\n        const data = matter(markdown);\n        const frontMatter: any = Object.assign({}, data.data);\n\n        // New note config design in beta 3\n        if (data.data[\"created\"]) {\n          noteConfig.createdAt = new Date(data.data[\"created\"]);\n          delete frontMatter[\"created\"];\n        }\n        if (data.data[\"modified\"]) {\n          noteConfig.modifiedAt = new Date(data.data[\"modified\"]);\n          delete frontMatter[\"modified\"];\n        }\n        if (data.data[\"pinned\"]) {\n          noteConfig.pinned = data.data[\"pinned\"];\n          delete frontMatter[\"pinned\"];\n        }\n        if (data.data[\"favorited\"]) {\n          noteConfig.favorited = data.data[\"favorited\"];\n          delete frontMatter[\"favorited\"];\n        }\n\n        // markdown = matter.stringify(data.content, frontMatter); // <= NOTE: I think gray-matter has bug. Although I delete \"note\" section from front-matter, it still includes it.\n        markdown = matterStringify(data.content, frontMatter);\n      } catch (error) {\n        // Do nothing\n        markdown =\n          \"Please fix front-matter. (👈 Don't forget to delete this line)\\n\\n\" +\n          markdown;\n      }\n\n      let oldMentions = {};\n      const oldNote = this.notes[filePath];\n      if (oldNote) {\n        oldMentions = oldNote.mentions;\n      }\n\n      // Create note\n      const note: Note = {\n        notebookPath: this.dir,\n        filePath: path.relative(this.dir, absFilePath),\n        title: path.basename(absFilePath).replace(/\\.md$/, \"\"),\n        markdown,\n        config: noteConfig,\n        mentions: oldMentions,\n      };\n\n      if (refreshNoteRelations) {\n        this.notes[note.filePath] = note;\n        this.search.add(note.filePath, note.title);\n        await this.processNoteMentionsAndMentionedBy(note.filePath);\n      }\n\n      return note;\n    } else {\n      return null;\n    }\n  }\n\n  public async refreshNotesIfNotLoaded({\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: RefreshNotesArgs): Promise<Notes> {\n    if (!this.loadedNotes) {\n      await this.refreshNotes({\n        dir,\n        includeSubdirectories,\n        refreshRelations: true,\n      });\n      this.loadedNotes = true;\n    }\n    return this.notes;\n  }\n\n  public async refreshNotes({\n    dir = \"./\",\n    includeSubdirectories = false,\n    refreshRelations = true,\n  }: RefreshNotesArgs): Promise<Notes> {\n    if (refreshRelations) {\n      this.notes = {};\n      this.referenceMap = new ReferenceMap();\n      this.initSearch();\n    }\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(this.dir, dir));\n    } catch (error) {\n      files = [];\n    }\n    const refreshNotesPromises = [];\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n\n      // ignore several directories\n      if (file.match(/^(node_modules|\\.git)$/)) {\n        continue;\n      }\n\n      const absFilePath = path.resolve(this.dir, dir, file);\n      const note = await this.getNote(path.relative(this.dir, absFilePath));\n      if (note) {\n        this.notes[note.filePath] = note;\n        this.search.add(note.filePath, note.title);\n      }\n\n      let stats;\n      try {\n        stats = await pfs.stats(absFilePath);\n      } catch (error) {}\n      if (stats && stats.isDirectory() && includeSubdirectories) {\n        refreshNotesPromises.push(\n          this.refreshNotes({\n            dir: path.relative(this.dir, absFilePath),\n            includeSubdirectories,\n            refreshRelations: false,\n          }),\n        );\n      }\n    }\n    await Promise.all(refreshNotesPromises);\n\n    if (refreshRelations) {\n      for (let filePath in this.notes) {\n        await this.processNoteMentionsAndMentionedBy(filePath);\n      }\n    }\n\n    return this.notes;\n  }\n\n  public async writeNote(\n    filePath: string,\n    markdown: string,\n    noteConfig: NoteConfig,\n  ): Promise<Note> {\n    noteConfig.modifiedAt = new Date();\n    const oMarkdown = markdown;\n    try {\n      const data = matter(markdown);\n      if (data.data[\"note\"] && data.data[\"note\"] instanceof Object) {\n        noteConfig = Object.assign({}, noteConfig, data.data[\"note\"] || {});\n      }\n      const frontMatter = Object.assign(\n        data.data || {},\n        formatNoteConfig(noteConfig),\n      );\n      delete frontMatter[\"note\"];\n      markdown = data.content;\n      markdown = matterStringify(markdown, frontMatter);\n    } catch (error) {\n      markdown = matterStringify(markdown, formatNoteConfig(noteConfig));\n    }\n\n    await pfs.writeFile(path.resolve(this.dir, filePath), markdown);\n    if (!this.isLocal) {\n      await git.add({\n        fs: fs,\n        dir: this.dir,\n        filepath: filePath,\n      });\n    }\n\n    const note = await this.getNote(filePath, true);\n    note.markdown = oMarkdown;\n    return note;\n  }\n\n  public async removeNoteRelations(filePath: string) {\n    const note = await this.getNote(filePath);\n    if (!note) {\n      return;\n    }\n    const mentions = note.mentions;\n    for (let filePath in mentions) {\n      this.referenceMap.deleteReferences(filePath, note.filePath);\n    }\n    delete this.notes[note.filePath];\n  }\n\n  public async deleteNote(filePath: string) {\n    if (await pfs.exists(path.resolve(this.dir, filePath))) {\n      await pfs.unlink(path.resolve(this.dir, filePath));\n      if (!this.isLocal) {\n        await git.remove({\n          fs: fs,\n          dir: this.dir,\n          filepath: filePath,\n        });\n      }\n      await this.removeNoteRelations(filePath);\n      this.search.removeAll(filePath);\n    }\n  }\n\n  public async duplicateNote(filePath: string) {\n    const oldNote = await this.getNote(filePath);\n    if (!oldNote) return;\n    const noteConfig = oldNote.config;\n    noteConfig.createdAt = new Date();\n    noteConfig.modifiedAt = new Date();\n    const newFilePath = filePath.replace(/\\.md$/, \".copy.md\");\n    await this.writeNote(newFilePath, oldNote.markdown, noteConfig);\n    return await this.getNote(newFilePath, true);\n  }\n}\n\nexport interface NotebookConfig {\n  repository: string;\n  branch: string;\n  author: string;\n  contributors: string[];\n}\n","// @ts-ignore\nimport diff3Merge from \"diff3\";\nimport * as git from \"isomorphic-git\";\nimport http from \"isomorphic-git/http/web\";\nimport * as path from \"path\";\nimport PouchDB from \"pouchdb\";\nimport PouchdbFind from \"pouchdb-find\";\nimport { randomID } from \"../utilities/utils\";\nimport { fs, pfs } from \"./fs\";\nimport { Notebook } from \"./notebook\";\n\n/*\nexport interface Attachment {\n  notebook: Notebook;\n  filePath: string;\n  content: string;\n  createdAt: Date;\n  modifiedAt: Date;\n}\n*/\n\ninterface CloneNotebookArgs {\n  name?: string;\n  corsProxy?: string;\n  gitURL: string;\n  branch?: string;\n  depth?: number;\n  username?: string;\n  password?: string;\n  rememberCredentials?: boolean;\n  directoryHandle?: FileSystemDirectoryHandle;\n}\n\n// type ListAttachmentsArgs = ListNotesArgs;\n\nexport interface PushNotebookArgs {\n  notebook: Notebook;\n  authorName?: string;\n  authorEmail?: string;\n  username?: string;\n  password?: string;\n  message?: string;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport interface PullNotebookArgs {\n  notebook: Notebook;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport type FetchNotebookArgs = PullNotebookArgs;\n\ninterface PullNotebookResult {\n  numConflicts: number;\n  cache: Cache;\n}\n\ntype Cache = {\n  [key: string]: {\n    status: string;\n    markdown: string;\n  };\n};\n\ninterface NotebookDBEntry {\n  // basic info\n  _id: string;\n  dir: string;\n  name: string;\n\n  // git\n  gitURL: string;\n  gitBranch: string;\n  gitCorsProxy?: string;\n  gitUsername?: string;\n  gitPassword?: string;\n  autoFetchPeriod: number; // in milliseconds\n  fetchedAt: Date;\n  remoteSha: string;\n  localSha: string;\n  directoryHandle?: FileSystemDirectoryHandle;\n}\n\nexport default class Crossnote {\n  private notebookDB: PouchDB.Database<NotebookDBEntry>;\n\n  constructor() {\n    PouchDB.plugin(PouchdbFind);\n    this.notebookDB = new PouchDB(\"notebooks\");\n    this.notebookDB.createIndex({\n      index: {\n        fields: [\"gitURL\"],\n      },\n    });\n  }\n\n  public async addNotebook({\n    name = \"\",\n    corsProxy = \"\",\n    gitURL = \"\",\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 3,\n    rememberCredentials = false,\n    directoryHandle,\n  }: CloneNotebookArgs) {\n    if (gitURL) {\n      return await this.cloneNotebook({\n        name,\n        corsProxy,\n        gitURL,\n        branch,\n        username,\n        password,\n        depth,\n        rememberCredentials,\n      });\n    } else {\n      const _id = randomID();\n      let dir = `/notebooks/${_id}`;\n      if (directoryHandle) {\n        dir = (\n          await pfs.attachLocalDirectory({ id: _id, directoryHandle })\n        ).replace(/\\/+$/, \"\");\n      }\n\n      const notebook = new Notebook();\n      notebook._id = _id;\n      notebook.dir = dir;\n      notebook.name = directoryHandle\n        ? directoryHandle.name.trim()\n        : name.trim() || \"Unnamed\";\n      notebook.gitURL = gitURL.trim();\n      notebook.gitBranch = branch.trim() || \"master\";\n      notebook.gitCorsProxy = corsProxy.trim();\n      notebook.gitUsername = rememberCredentials ? username.trim() : \"\";\n      notebook.gitPassword = rememberCredentials ? password : \"\";\n      notebook.autoFetchPeriod = 0;\n      notebook.fetchedAt = new Date();\n      notebook.remoteSha = \"\";\n      notebook.localSha = \"\";\n\n      if (directoryHandle) {\n        notebook.isLocal = true;\n      }\n\n      if (!(await pfs.exists(\"/notebooks\"))) {\n        await pfs.mkdir(\"/notebooks\");\n      }\n      if (!directoryHandle && !(await pfs.exists(dir))) {\n        await pfs.mkdir(dir);\n      }\n\n      if (!directoryHandle) {\n        await git.init({\n          fs: fs,\n          dir,\n        });\n      }\n\n      // Save to DB\n      try {\n        await this.notebookDB.put(Object.assign({ directoryHandle }, notebook));\n      } catch (error) {\n        console.log(\"failed to save to error\");\n        // Failed to save to DB\n        if (!directoryHandle) {\n          await pfs.rmdir(dir);\n        }\n      }\n\n      return notebook;\n    }\n  }\n\n  public async cloneNotebook({\n    name = \"\",\n    corsProxy,\n    gitURL,\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 10,\n    rememberCredentials = false,\n  }: CloneNotebookArgs): Promise<Notebook> {\n    if (!gitURL.match(/^https?:\\/\\//)) {\n      throw new Error(\"error/invalid-git-url-prefix\");\n    }\n\n    // Check if gitURL exists\n    /*\n    let exists = false;\n    try {\n      const notebooks = await this.notebookDB.find({\n        selector: {\n          gitURL: { $eq: gitURL }\n        }\n      });\n      if (notebooks.docs && notebooks.docs.length) {\n        exists = true;\n      }\n    } catch (error) {\n      exists = false;\n    }\n\n    if (exists) {\n      throw new Error(\"error/repository-already-cloned\");\n    }*/\n\n    const _id = randomID();\n    const dir = `/notebooks/${_id}`;\n\n    await git.clone({\n      fs: fs,\n      http,\n      dir,\n      corsProxy,\n      url: gitURL,\n      ref: branch.trim() || \"master\",\n      depth: depth,\n      singleBranch: true,\n      onAuth: (url, auth) => {\n        return {\n          username,\n          password,\n        };\n      },\n    });\n\n    const sha = await this.getGitSHA(\n      dir,\n      `origin/${branch.trim() || \"master\"}`,\n    );\n\n    const notebook: Notebook = new Notebook();\n    notebook._id = _id;\n    notebook.dir = dir;\n    notebook.name = name || this.getDefaultNotebookNameFromGitURL(gitURL);\n    notebook.gitURL = gitURL;\n    notebook.gitBranch = branch.trim() || \"master\";\n    notebook.gitCorsProxy = corsProxy;\n    notebook.gitUsername = rememberCredentials ? username : \"\";\n    notebook.gitPassword = rememberCredentials ? password : \"\";\n    notebook.autoFetchPeriod = 3600000; // 60 minutes\n    notebook.fetchedAt = new Date();\n    notebook.localSha = sha;\n    notebook.remoteSha = sha;\n\n    // Save to DB\n    try {\n      await this.notebookDB.put(notebook);\n    } catch (error) {\n      // Failed to save to DB\n      await pfs.rmdir(dir);\n    }\n\n    return notebook;\n  }\n\n  public async exportNotebookToJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async importNotebookFromJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async deleteNotebook(notebookID: string) {\n    const notebook = await this.notebookDB.get(notebookID);\n    await pfs.rmdir(notebook.dir);\n    await this.notebookDB.remove(notebook);\n  }\n  public async updateNotebook(notebook: Notebook) {\n    const nb = await this.notebookDB.get(notebook._id);\n    nb.dir = notebook.dir;\n    nb.name = notebook.name;\n    nb.gitURL = notebook.gitURL;\n    nb.gitBranch = notebook.gitBranch;\n    nb.gitCorsProxy = notebook.gitCorsProxy;\n    nb.gitUsername = notebook.gitUsername;\n    nb.gitPassword = notebook.gitPassword;\n    nb.autoFetchPeriod = notebook.autoFetchPeriod;\n    nb.fetchedAt = notebook.fetchedAt;\n    nb.remoteSha = notebook.remoteSha;\n    nb.localSha = notebook.localSha;\n    await this.notebookDB.put(nb, { force: true });\n  }\n\n  public async renameDirectory(\n    notebook: Notebook,\n    oldDirName: string,\n    newDirName: string,\n  ) {\n    await pfs.rename(\n      path.resolve(notebook.dir, oldDirName),\n      path.resolve(notebook.dir, newDirName),\n    );\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: oldDirName,\n    });\n    await git.add({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: newDirName || \".\",\n    });\n  }\n\n  public async deleteDirectory(notebook: Notebook, dirName: string) {\n    await pfs.rmdir(path.resolve(notebook.dir, dirName));\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: dirName,\n    });\n  }\n\n  private async generateChangesCache(notebook: Notebook): Promise<Cache> {\n    const cache: Cache = {};\n    const createCache = async (stagedFiles: string[]) => {\n      for (let i = 0; i < stagedFiles.length; i++) {\n        if (stagedFiles[i] in cache) {\n          continue;\n        }\n        const status = await git.status({\n          fs: fs,\n          dir: notebook.dir,\n          filepath: stagedFiles[i],\n        });\n        if (status.match(/^\\*?(modified|added)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: (await pfs.readFile(\n              path.resolve(notebook.dir, stagedFiles[i]),\n              { encoding: \"utf8\" },\n            )) as string,\n          };\n        } else if (status.match(/^\\*?(deleted)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: \"\",\n          };\n        }\n      }\n    };\n\n    await createCache(\n      // Check previous staged file for `delete` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n        ref: \"HEAD\",\n      }),\n    );\n\n    await createCache(\n      // Check current staged file for `add` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n      }),\n    );\n\n    return cache;\n  }\n\n  public async pushNotebook({\n    notebook,\n    authorName = \"crossnote\",\n    authorEmail = \"anonymous@crossnote.com\",\n    username,\n    password,\n    message = \"doc: Updated docs\",\n    onProgress,\n    onMessage,\n    onAuthFailure,\n    onAuthSuccess,\n  }: PushNotebookArgs): Promise<null | git.PushResult> {\n    // Pull notebook first\n    const pullNotebookResult = await this.pullNotebook({\n      notebook,\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    if (pullNotebookResult.numConflicts > 0) {\n      throw new Error(\"error/please-resolve-conflicts\");\n    }\n\n    const localSha = notebook.localSha;\n\n    const sha = await git.commit({\n      fs: fs,\n      dir: notebook.dir,\n      author: {\n        name: authorName,\n        email: authorEmail,\n      },\n      message,\n    });\n\n    const restoreSHA = async () => {\n      const gitBranch = notebook.gitBranch || \"master\";\n      // Perform a soft reset\n      await pfs.writeFile(\n        path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n        localSha,\n      );\n    };\n\n    // console.log(sha);\n    const pushResult = await git.push({\n      fs: fs,\n      http,\n      onAuth: (url, auth) => {\n        return {\n          username: username, // || notebook.gitUsername,\n          password: password, // || notebook.gitPassword\n        };\n      },\n      onProgress: (progress) => {\n        if (onProgress) {\n          onProgress(progress);\n        }\n      },\n      onMessage: (message) => {\n        if (onMessage) {\n          onMessage(message);\n        }\n      },\n      onAuthFailure: (url, auth) => {\n        if (onAuthFailure) {\n          onAuthFailure(url);\n        }\n        restoreSHA();\n      },\n      onAuthSuccess: (url, auth) => {\n        if (onAuthSuccess) {\n          onAuthSuccess(url);\n        }\n      },\n      url: notebook.gitURL,\n      dir: notebook.dir,\n      ref: notebook.gitBranch,\n      corsProxy: notebook.gitCorsProxy,\n    });\n\n    // console.log(\"pushResult: \", pushResult);\n\n    if (pushResult.error) {\n      restoreSHA();\n    }\n\n    if (pushResult.ok) {\n      // Update notebook\n      notebook.fetchedAt = new Date();\n      notebook.localSha = sha;\n      notebook.remoteSha = sha;\n      await this.updateNotebook(notebook);\n    }\n    return pushResult;\n  }\n\n  public async getGitSHA(dir: string, ref: string = \"master\"): Promise<string> {\n    try {\n      let logs = await git.log({\n        fs: fs,\n        dir: dir,\n        ref: ref,\n        depth: 5,\n      });\n      if (logs.length > 0) {\n        return (logs && logs[0]).oid;\n      } else {\n        return \"\";\n      }\n    } catch (error) {\n      return \"\";\n    }\n  }\n\n  public async hardResetNotebook(notebook: Notebook, sha: string) {\n    await pfs.writeFile(\n      path.resolve(notebook.dir, `.git/refs/heads/${notebook.gitBranch}`),\n      sha,\n    );\n    await pfs.unlink(path.resolve(notebook.dir, `.git/index`));\n    await git.checkout({\n      dir: notebook.dir,\n      fs: fs,\n      ref: notebook.gitBranch || \"master\",\n    });\n  }\n\n  private async restoreFilesFromCache(\n    cache: Cache,\n    notebook: Notebook,\n  ): Promise<number> {\n    let numConflicts = 0;\n    // console.log(\"same\");\n    for (const filePath in cache) {\n      if (cache[filePath].status === \"deleted\") {\n        await notebook.deleteNote(filePath);\n        continue;\n      }\n      const markdown = cache[filePath].markdown;\n      const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n      await pfs.mkdirp(dirname);\n      await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n      await git.add({\n        fs: fs,\n        dir: notebook.dir,\n        filepath: filePath,\n      });\n      if (this.markdownHasConflicts(markdown)) {\n        numConflicts += 1;\n      }\n    }\n    return numConflicts;\n  }\n\n  public async pullNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: PullNotebookArgs): Promise<PullNotebookResult> {\n    // Stop using git.pull as merge will cause error\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      corsProxy: notebook.gitCorsProxy,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // NOTE: Seems like diff3 not working as I expected. Therefore I might create my own type of diff\n    const cache: {\n      [key: string]: {\n        status: string;\n        markdown: string;\n      };\n    } = await this.generateChangesCache(notebook);\n    const localSha = notebook.localSha;\n\n    // Save cache in case of system crash\n    localStorage.setItem(\n      `pending/pull/${notebook._id}`,\n      JSON.stringify({\n        cache,\n        localSha,\n      }),\n    );\n\n    // Perform a hard reset\n    const remoteSha = result.fetchHead;\n    await this.hardResetNotebook(notebook, remoteSha);\n\n    let numConflicts = 0;\n    if (localSha === remoteSha) {\n      // Restore from cache\n      numConflicts = await this.restoreFilesFromCache(cache, notebook);\n    } else {\n      // Check conflicted notes\n      // console.log(\"check conflicted\");\n      const LINEBREAKS = /^.*(\\r?\\n|$)/gm;\n      const markerSize = 7;\n      const ourName = \"ours\";\n      const theirName = \"theirs\";\n      // const baseName = \"base\";\n      for (const filePath in cache) {\n        const ourContent = cache[filePath].markdown;\n        if (await pfs.exists(path.resolve(notebook.dir, filePath))) {\n          let baseContent: string = \"\";\n          let theirContent: string = \"\";\n          try {\n            const baseContentBlobResult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: localSha,\n              filepath: filePath,\n            });\n            baseContent = Buffer.from(baseContentBlobResult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          try {\n            const theirContentBlobTresult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: remoteSha,\n              filepath: filePath,\n            });\n            theirContent = Buffer.from(theirContentBlobTresult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          // console.log(\"ourContent: \", ourContent);\n          // console.log(\"theirContent: \", theirContent);\n          // console.log(\"baseContent: \", baseContent);\n\n          // TODO: clean front-matter\n\n          // Refered from https://github.com/isomorphic-git/isomorphic-git/blob/4e66704d05042624bbc78b85ee5110d5ee7ec3e2/src/utils/mergeFile.js\n          const ours = ourContent.match(LINEBREAKS);\n          const base = baseContent.match(LINEBREAKS);\n          const theirs = theirContent.match(LINEBREAKS);\n\n          // Here we let the diff3 library do the heavy lifting.\n          const result = diff3Merge(ours, base, theirs);\n\n          // Here we note whether there are conflicts and format the results\n          let mergedText = \"\";\n          let hasConflict = false;\n          for (const item of result) {\n            if (item.ok) {\n              mergedText += item.ok.join(\"\");\n            }\n            if (item.conflict) {\n              hasConflict = true;\n              mergedText += `\\\\<${\"<\".repeat(markerSize - 1)} ${ourName}\\n`;\n              mergedText += item.conflict.a.join(\"\") + \"\\n\";\n              // if (format === \"diff3\") {\n              //mergedText += `\\\\|${\"|\".repeat(markerSize - 1)} ${baseName}\\n`;\n              //mergedText += item.conflict.o.join(\"\");\n              // }\n              mergedText += `\\\\=${\"=\".repeat(markerSize - 1)}\\n`;\n              mergedText += item.conflict.b.join(\"\") + \"\\n\";\n              mergedText += `\\\\>${\">\".repeat(markerSize - 1)} ${theirName}\\n`;\n            }\n          }\n          if (hasConflict) {\n            numConflicts += 1;\n          }\n\n          // console.log(\"mergedText: \", mergedText);\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), mergedText);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        } else {\n          const markdown = cache[filePath].markdown;\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        }\n      }\n    }\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = remoteSha;\n    notebook.remoteSha = remoteSha;\n    await this.updateNotebook(notebook);\n\n    localStorage.removeItem(`pending/pull/${notebook._id}`);\n\n    return {\n      numConflicts,\n      cache,\n    };\n  }\n\n  public async fetchNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: FetchNotebookArgs): Promise<boolean> {\n    const localSha = notebook.localSha;\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      tags: false,\n      depth: 1,\n      corsProxy: notebook.gitCorsProxy,\n      url: notebook.gitURL,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = localSha;\n    notebook.remoteSha = result.fetchHead;\n    await this.updateNotebook(notebook);\n\n    return localSha !== result.fetchHead;\n  }\n\n  public markdownHasConflicts(markdown: string): boolean {\n    const m1 = markdown.match(/^\\\\<+\\s/gm);\n    const m2 = markdown.match(/^\\\\=+\\s/gm);\n    const m3 = markdown.match(/^\\\\>+\\s/gm);\n    return m1 && m1.length > 0 && m2 && m2.length > 0 && m3 && m3.length > 0;\n  }\n\n  public async listNotebooks(): Promise<Notebook[]> {\n    const notebookEntries = (\n      await this.notebookDB.find({\n        selector: {\n          gitURL: { $gt: null },\n        },\n      })\n    ).docs;\n    const notebooks: Notebook[] = [];\n    for (let i = 0; i < notebookEntries.length; i++) {\n      const n = notebookEntries[i];\n      const notebook = new Notebook();\n      notebook._id = n._id;\n      notebook.dir = n.dir;\n      notebook.name = n.name;\n      notebook.gitURL = n.gitURL;\n      notebook.gitBranch = n.gitBranch;\n      notebook.gitCorsProxy = n.gitCorsProxy;\n      notebook.gitUsername = n.gitUsername;\n      notebook.gitPassword = n.gitPassword;\n      notebook.autoFetchPeriod = n.autoFetchPeriod;\n      notebook.fetchedAt = n.fetchedAt;\n      notebook.remoteSha = n.remoteSha;\n      notebook.localSha = n.localSha;\n\n      if (n.directoryHandle) {\n        // local notebook\n        const dir = (\n          await pfs.attachLocalDirectory({\n            id: n._id,\n            directoryHandle: n.directoryHandle,\n          })\n        ).replace(/\\/+$/, \"\");\n        notebook.dir = dir;\n        notebook.isLocal = true;\n      }\n\n      notebooks.push(notebook);\n    }\n\n    const promises = notebooks.map((notebook, i) => {\n      return (async (i: number) => {\n        const notebook = notebooks[i];\n        notebook.fetchedAt = new Date(notebook.fetchedAt || 0);\n        if (notebook.gitURL.trim().length <= 0) {\n          // no remote set\n          return;\n        }\n        if (typeof notebook.autoFetchPeriod === \"undefined\") {\n          notebook.autoFetchPeriod = 3600000; // 60 minutes\n        }\n        if (typeof notebook.localSha === \"undefined\") {\n          notebook.localSha = await this.getGitSHA(\n            notebook.dir,\n            `origin/${notebook.gitBranch}`,\n          );\n        }\n        if (typeof notebook.remoteSha === \"undefined\") {\n          notebook.remoteSha = notebook.localSha;\n        }\n        const gitBranch = notebook.gitBranch || \"master\";\n        const sha = notebook.localSha || \"\";\n        try {\n          // Perform a soft reset\n          await pfs.writeFile(\n            path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n            sha,\n          );\n\n          // Restore cached files from failed `git` pull event\n          const pendingPull = localStorage.getItem(\n            `pending/pull/${notebook._id}`,\n          );\n          if (pendingPull) {\n            try {\n              await this.restoreFilesFromCache(\n                JSON.parse(pendingPull).cache,\n                notebook,\n              );\n            } catch (error) {}\n            localStorage.removeItem(`pending/pull/${notebook._id}`);\n          }\n\n          const status = await git.status({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: \".\",\n          });\n\n          // check: absent, deleted, undeleted\n          if (status.match(/(absent|deleted)/) || pendingPull) {\n            // NOTE: Seems like there is a bug somewhere that caused all files to become *undeleted\n            // So we run git.add again.\n            await git.add({\n              fs: fs,\n              dir: notebook.dir,\n              filepath: \".\",\n            });\n          }\n        } catch (error) {\n          notebooks[i] = null;\n        }\n      })(i);\n    });\n\n    await Promise.all(promises);\n\n    return notebooks\n      .filter((nb) => nb)\n      .sort((x, y) => x.name.localeCompare(y.name));\n  }\n\n  /*\n  public async listAttachments({\n    notebook,\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: ListAttachmentsArgs): Promise<Attachment[]> {\n    let attachments: Attachment[] = [];\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(notebook.dir, dir));\n    } catch (error) {\n      files = [];\n    }\n    const listAttachmentsPromises = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const absFilePath = path.resolve(notebook.dir, dir, file);\n      const stats = await pfs.stats(absFilePath);\n      if (\n        stats.isFile() &&\n        !absFilePath.endsWith(\".md\") &&\n        isFileAnImage(file) // TODO: We only support images for now. Supports other types of files in the future\n      ) {\n        const attachment: Attachment = {\n          notebook,\n          filePath: path.relative(notebook.dir, absFilePath),\n          content: isBinarySync(file)\n            ? \"\"\n            : ((await pfs.readFile(absFilePath, {\n                encoding: \"utf8\",\n              })) as string),\n          createdAt: new Date(stats.ctimeMs),\n          modifiedAt: new Date(stats.mtimeMs),\n        };\n        attachments.push(attachment);\n        if (isBinarySync(file)) {\n        } else {\n        }\n      }\n\n      if (stats.isDirectory() && file !== \".git\" && includeSubdirectories) {\n        listAttachmentsPromises.push(\n          this.listAttachments({\n            notebook,\n            dir: path.relative(notebook.dir, absFilePath),\n            includeSubdirectories,\n          }),\n        );\n      }\n    }\n\n    const res = await Promise.all(listAttachmentsPromises);\n    res.forEach((r) => {\n      attachments = attachments.concat(r);\n    });\n\n    return attachments;\n  }\n  */\n\n  private getDefaultNotebookNameFromGitURL(gitURL: string) {\n    const i = gitURL.lastIndexOf(\"/\");\n    return gitURL.slice(i + 1).replace(/\\.git/, \"\");\n  }\n\n  public async getStatus(notebookPath: string, filePath: string) {\n    return await git.status({\n      fs: fs,\n      dir: notebookPath,\n      filepath: filePath,\n    });\n  }\n}\n","import { PeerJSOption } from \"peerjs\";\nimport moment from \"moment\";\n\nexport function waitForTimeout(timeout: number): Promise<void> {\n  return new Promise((resolve, reject) => {\n    return setTimeout(() => {\n      return resolve();\n    }, timeout);\n  });\n}\n\nexport const UUIDNil = \"00000000-0000-0000-0000-000000000000\";\n\nexport const OneDay = 1000 * 60 * 60 * 24;\n\nexport function getGraphQLEndpoint() {\n  if (process.env.NODE_ENV === \"production\") {\n    return `https://crossnote.app/api/graphql`;\n  } else {\n    return `http://${window.location.hostname}:9999/graphql`;\n  }\n}\n\nexport function getPeerJSEndpoint(): PeerJSOption {\n  if (process.env.NODE_ENV === \"production\") {\n    return {\n      host: `crossnote.app`,\n      path: \"/peer\",\n      secure: true,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  } else {\n    return {\n      host: window.location.hostname,\n      port: 9000,\n      path: \"/peer\",\n      secure: false,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  }\n}\n\nexport function getGitHubOAuthClientID() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"3dd81bb2c212b7749761\";\n  } else {\n    return \"c7477b9aa512785936e0\";\n  }\n}\n\nexport function getGitHubOAuthCallbackURL() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"https://crossnote.app/github_oauth_callback\";\n  } else {\n    return `http://${window.location.host}/github_oauth_callback`;\n  }\n}\n\nexport function startGitHubOAuth() {\n  window.open(\n    `https://github.com/login/oauth/authorize?client_id=${getGitHubOAuthClientID()}&redirect_uri=${encodeURIComponent(\n      getGitHubOAuthCallbackURL(),\n    )}`,\n    \"_self\",\n  );\n}\n\nexport const graphqlFetchContext = {\n  fetchOptions: {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n};\nexport function formatDate(dateString: string) {\n  if (!dateString) return \"\";\n  const date = new Date(dateString);\n  const diff = Date.now() - date.getTime();\n  const passedTime = Math.abs(diff);\n\n  if (passedTime <= 1000 * 60 * 60 * 24) {\n    // within 24h\n    if (passedTime <= 1000 * 60 * 60) {\n      // within 1 hour\n      return (\n        (diff < 0 ? \"future \" : \"\") + Math.ceil(passedTime / (1000 * 60)) + \"m\"\n      );\n    } else {\n      return (\n        (diff < 0 ? \"future \" : \"\") +\n        Math.floor(passedTime / (1000 * 60 * 60)) +\n        \"h\"\n      );\n    }\n  } else {\n    const monthNamesShort = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ];\n    return (\n      monthNamesShort[date.getMonth()] +\n      \" \" +\n      date.getDate() +\n      \" \" +\n      date.getFullYear()\n    );\n  }\n}\n\n// https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript\nexport function copyToClipboard(text: string) {\n  if (\"clipboardData\" in window && (window as any).clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    return (window as any).setData(\"Text\", text);\n  } else if (\n    document.queryCommandSupported &&\n    document.queryCommandSupported(\"copy\")\n  ) {\n    var textarea = document.createElement(\"textarea\");\n    textarea.textContent = text;\n    textarea.style.position = \"fixed\"; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand(\"copy\"); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      console.warn(\"Copy to clipboard failed.\", ex);\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n}\n\nexport function generateUUID() {\n  // Public Domain/MIT\n  var d = new Date().getTime(); //Timestamp\n  var d2 = (performance && performance.now && performance.now() * 1000) || 0; //Time in microseconds since page-load or 0 if unsupported\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16; //random number between 0 and 16\n    if (d > 0) {\n      //Use timestamp until depleted\n      r = (d + r) % 16 | 0;\n      d = Math.floor(d / 16);\n    } else {\n      //Use microseconds since page-load if supported\n      r = (d2 + r) % 16 | 0;\n      d2 = Math.floor(d2 / 16);\n    }\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\nexport class RandomColorGenerator {\n  private cache: { [key: string]: string } = {};\n  private hashCode(s: string): number {\n    let n = s.split(\"\").reduce(function (a, b) {\n      a = (a << 5) - a + b.charCodeAt(0);\n      return a & a;\n    }, 0);\n    n = Math.abs(n);\n    const x = \"0.\" + n.toString();\n    return parseFloat(x);\n  }\n  public generateColor(key: string): string {\n    if (key in this.cache) {\n      return this.cache[key];\n    } else {\n      const color =\n        \"#\" +\n        (((1 << 24) * /* Math.random() */ this.hashCode(key)) | 0).toString(16);\n      this.cache[key] = color;\n      return color;\n    }\n  }\n}\n\nexport const randomColorGenerator = new RandomColorGenerator();\n\nexport function randomID() {\n  return Math.random().toString(36).substr(2, 9);\n}\n\nexport function getTodayName() {\n  let today = moment().format(\"YYYY-MM-DD\");\n  const momentFormat = localStorage.getItem(\"settings/moment-format\");\n  if (momentFormat) {\n    try {\n      today = moment().format(momentFormat);\n    } catch (error) {\n      today = moment().format(\"YYYY-MM-DD\");\n    }\n  }\n  return today;\n}\n","import * as path from \"path\";\nimport { NotebookFieldsFragment } from \"../generated/graphql\";\nimport { pfs } from \"../lib/fs\";\nimport { Note } from \"../lib/note\";\n\nexport async function resolveNoteImageSrc(note: Note, imageSrc: string) {\n  if (!note) {\n    return imageSrc;\n  }\n  if (imageSrc.startsWith(\"https://\") || imageSrc.startsWith(\"data:\")) {\n    return imageSrc;\n  } else if (imageSrc.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    return await loadImageAsBase64(note.notebookPath, note.filePath, imageSrc);\n  }\n}\n\nexport function resolveNotebookFilePath(\n  notebook: NotebookFieldsFragment,\n  filePath: string,\n) {\n  if (!notebook) {\n    return filePath;\n  }\n  if (filePath.startsWith(\"https://\") || filePath.startsWith(\"data:\")) {\n    return filePath;\n  } else if (filePath.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    const { gitURL, gitBranch } = notebook;\n    const gitURLArr = gitURL.replace(\"https://\", \"\").split(\"/\");\n    const gitHost = gitURLArr[0].toLowerCase();\n    const gitOwner = gitURLArr[1];\n    const gitRepo = gitURLArr[2].replace(/\\.git$/, \"\");\n    let outFilePath = \"\";\n    filePath = filePath.replace(/^\\/+/, \"\").replace(/^\\.\\/+/, \"\");\n    if (gitHost === \"github.com\") {\n      outFilePath = `https://github.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitlab.com\") {\n      outFilePath = `https://gitlab.com/${gitOwner}/${gitRepo}/-/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitee.com\") {\n      outFilePath = `https://gitee.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitea.com\") {\n      outFilePath = `https://gitea.com/${gitOwner}/${gitRepo}/raw/branch/${gitBranch}/${filePath}`;\n    }\n\n    return outFilePath;\n  }\n}\n\nexport async function loadImageAsBase64(\n  notebookPath: string,\n  noteFilePath: string,\n  imageSrc: string,\n): Promise<string> {\n  let imageFilePath;\n  if (imageSrc.startsWith(\"/\")) {\n    imageFilePath = path.resolve(notebookPath, \".\" + imageSrc);\n  } else {\n    imageFilePath = path.join(\n      notebookPath,\n      path.dirname(noteFilePath),\n      imageSrc,\n    );\n  }\n  if (await pfs.exists(imageFilePath)) {\n    // @ts-ignore\n    const data: Uint8Array = await pfs.readFile(imageFilePath);\n    const base64 = Buffer.from(data.buffer).toString(\"base64\");\n    let imageType = path.extname(imageSrc).slice(1);\n    if (imageType.match(/^svg$/i)) {\n      imageType = \"svg+xml\";\n    } else if (imageType.match(/^jpg$/i)) {\n      imageType = \"jpeg\";\n    }\n    return `data:image/${imageType};base64,${base64}`;\n  } else {\n    return \"\";\n  }\n}\n\nexport function isFileAnImage(fileName: string) {\n  return !!fileName.match(/\\.(jpg|jpeg|png|gif|svg)$/i);\n}\n","import gql from \"graphql-tag\";\nimport * as React from \"react\";\nimport * as Urql from \"urql\";\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n/** All built-in and custom scalars, mapped to their actual values */\nexport interface Scalars {\n  ID: string;\n  String: string;\n  Boolean: boolean;\n  Int: number;\n  Float: number;\n  Time: any;\n  UUID: any;\n  Upload: any;\n}\n\nexport interface NotificationEventCommentWidgetMessagePosting\n  extends NotificationEvent {\n  __typename?: \"NotificationEventCommentWidgetMessagePosting\";\n  type: NotificationEventType;\n  message: CommentWidgetMessage;\n}\n\nexport interface LinkWithGitHubAccount {\n  code: Scalars[\"String\"];\n}\n\nexport interface GitHubUser {\n  __typename?: \"GitHubUser\";\n  login: Scalars[\"String\"];\n  avatar: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n}\n\nexport interface WidgetInstance {\n  type: WidgetType;\n}\n\nexport interface AuthReturn {\n  __typename?: \"AuthReturn\";\n  /** JSON Web Token */\n  token: Scalars[\"String\"];\n  /** User */\n  user: User;\n}\n\nexport interface SendEmailVerificationCode {\n  email: Scalars[\"String\"];\n}\n\nexport interface UnsubscribeFromCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n}\n\nexport interface NotificationEvent {\n  type: NotificationEventType;\n}\n\nexport interface Widget {\n  __typename?: \"Widget\";\n  id: Scalars[\"UUID\"];\n  instance: WidgetInstance;\n  owner: User;\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n  canConfigure: Scalars[\"Boolean\"];\n}\n\nexport interface NotificationConnection {\n  __typename?: \"NotificationConnection\";\n  totalCount: Scalars[\"Int\"];\n  pageInfo: PageInfo;\n  edges: Array<NotificationEdge>;\n}\n\nexport interface ResetPassword {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n}\n\nexport interface UpdateCommentWidgetMessage {\n  messageID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n}\n\nexport interface StarNotebook {\n  notebookID: Scalars[\"UUID\"];\n}\n\nexport enum NotificationEventType {\n  UserFollowing = \"USER_FOLLOWING\",\n  CommentWidgetMessagePosting = \"COMMENT_WIDGET_MESSAGE_POSTING\",\n}\n\nexport interface UserWidget {\n  __typename?: \"UserWidget\";\n  type: WidgetType;\n  count: Scalars[\"Int\"];\n}\n\nexport interface SignUpWithGitHubAccount {\n  username: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n  accessToken: Scalars[\"String\"];\n}\n\nexport interface Query {\n  __typename?: \"Query\";\n  test: Scalars[\"String\"];\n  widget: Widget;\n  notebooks: Array<Notebook>;\n  viewer: User;\n  user: User;\n  stats: Stats;\n}\n\nexport interface QueryWidgetArgs {\n  id: Scalars[\"UUID\"];\n}\n\nexport interface QueryNotebooksArgs {\n  orderBy?: Maybe<NotebookOrderBy>;\n  query?: Maybe<Scalars[\"String\"]>;\n  page?: Maybe<Scalars[\"Int\"]>;\n  perPage?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface QueryUserArgs {\n  id?: Maybe<Scalars[\"UUID\"]>;\n  username?: Maybe<Scalars[\"String\"]>;\n}\n\nexport enum WidgetType {\n  Comment = \"COMMENT\",\n}\n\nexport interface PublishNotebook {\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n}\n\nexport interface PageInfo {\n  __typename?: \"PageInfo\";\n  startCursor: Scalars[\"UUID\"];\n  endCursor: Scalars[\"UUID\"];\n  hasPreviousPage: Scalars[\"Boolean\"];\n  hasNextPage: Scalars[\"Boolean\"];\n}\n\nexport interface WidgetConnection {\n  __typename?: \"WidgetConnection\";\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars[\"Int\"];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<WidgetEdge>;\n}\n\nexport interface CommentWidgetMessageReaction {\n  __typename?: \"CommentWidgetMessageReaction\";\n  message: CommentWidgetMessage;\n  user: User;\n  reaction: Scalars[\"String\"];\n}\n\nexport interface CommentWidgetMessage {\n  __typename?: \"CommentWidgetMessage\";\n  /** Comment message ID */\n  id: Scalars[\"UUID\"];\n  /** The comment widget that this comment belongs to */\n  widget: Widget;\n  /** Author of this comment message */\n  author: User;\n  /** Comment message (markdown content) */\n  markdown: Scalars[\"String\"];\n  /** Created At */\n  createdAt: Scalars[\"Time\"];\n  /** updatedAt at */\n  updatedAt: Scalars[\"Time\"];\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\nexport interface CommentWidgetMessageReactionSummariesArgs {\n  size?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface Notification {\n  __typename?: \"Notification\";\n  id: Scalars[\"UUID\"];\n  createdAt: Scalars[\"Time\"];\n  event: NotificationEvent;\n  meta: Scalars[\"String\"];\n  receiver: User;\n  origin: User;\n}\n\nexport interface SetUserInfo {\n  name: Scalars[\"String\"];\n  avatar: Scalars[\"String\"];\n  cover: Scalars[\"String\"];\n  bio: Scalars[\"String\"];\n  location: Scalars[\"String\"];\n  language: Scalars[\"String\"];\n  editorCursorColor: Scalars[\"String\"];\n}\n\nexport interface FollowUser {\n  userID: Scalars[\"UUID\"];\n}\n\nexport interface SignInWithGitHubAccount {\n  code: Scalars[\"String\"];\n}\n\nexport interface UpdateNotebook {\n  notebookID: Scalars[\"UUID\"];\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n}\n\nexport interface NotificationEventUserFollowing extends NotificationEvent {\n  __typename?: \"NotificationEventUserFollowing\";\n  type: NotificationEventType;\n}\n\nexport interface NotificationEdge {\n  __typename?: \"NotificationEdge\";\n  cursor: Scalars[\"UUID\"];\n  node: Notification;\n}\n\nexport interface Stats {\n  __typename?: \"Stats\";\n  numUsers: Scalars[\"Int\"];\n  numNotebooks: Scalars[\"Int\"];\n}\n\nexport enum NotebookOrderBy {\n  TotalStarsCount = \"TOTAL_STARS_COUNT\",\n  DailyStarsCount = \"DAILY_STARS_COUNT\",\n  WeeklyStarsCount = \"WEEKLY_STARS_COUNT\",\n  MonthlyStarsCount = \"MONTHLY_STARS_COUNT\",\n}\n\nexport interface CommentWidgetMessageEdge {\n  __typename?: \"CommentWidgetMessageEdge\";\n  /** A cursor for use in pagination. */\n  cursor: Scalars[\"UUID\"];\n  /** The item at the end of the edge. */\n  node: CommentWidgetMessage;\n}\n\nexport interface CommentWidgetMessageConnection {\n  __typename?: \"CommentWidgetMessageConnection\";\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars[\"Int\"];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<CommentWidgetMessageEdge>;\n}\n\nexport interface AddReactionToCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface NotebookConnection {\n  __typename?: \"NotebookConnection\";\n  totalCount: Scalars[\"Int\"];\n  pageInfo: PageInfo;\n  edges: Array<NotebookEdge>;\n}\n\nexport interface DeleteNotification {\n  notificationID: Scalars[\"UUID\"];\n}\n\nexport interface ReactionSummary {\n  __typename?: \"ReactionSummary\";\n  count: Scalars[\"Int\"];\n  reaction: Scalars[\"String\"];\n  selfAuthored: Scalars[\"Boolean\"];\n}\n\nexport interface CommentWidget {\n  __typename?: \"CommentWidget\";\n  /** Widget ID */\n  id: Scalars[\"UUID\"];\n  /** Widget creation time */\n  createdAt: Scalars[\"Time\"];\n  /** Widget update time */\n  updatedAt: Scalars[\"Time\"];\n  /** Count of messages in this comment widget */\n  messagesCount: Scalars[\"Int\"];\n  /** Count of reactions in this comment widget */\n  reactionsCount: Scalars[\"Int\"];\n  /** Check if the viewer subscribed to the comment widget */\n  subscribed: Scalars[\"Boolean\"];\n  /** Comment messages */\n  messages: CommentWidgetMessageConnection;\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\nexport interface CommentWidgetMessagesArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface CommentWidgetReactionSummariesArgs {\n  size?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface SignInInput {\n  /** Email */\n  email: Scalars[\"String\"];\n  /** Password */\n  password: Scalars[\"String\"];\n}\n\nexport interface PostCommentWidgetMessage {\n  widgetID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n  notifyUsers: Array<Maybe<Scalars[\"String\"]>>;\n}\n\nexport interface NotebookEdge {\n  __typename?: \"NotebookEdge\";\n  cursor: Scalars[\"UUID\"];\n  node: Notebook;\n}\n\nexport interface UpdateWidget {\n  id: Scalars[\"UUID\"];\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n}\n\nexport interface SignUpInput {\n  /** Username */\n  username: Scalars[\"String\"];\n  /** Email */\n  email: Scalars[\"String\"];\n  /** Password */\n  password: Scalars[\"String\"];\n}\n\nexport interface RemoveReactionFromCommentWidgetMessage {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface UnpublishNotebook {\n  notebookID: Scalars[\"UUID\"];\n}\n\nexport interface CommentWidgetInstance extends WidgetInstance {\n  __typename?: \"CommentWidgetInstance\";\n  type: WidgetType;\n  commentWidget: CommentWidget;\n}\n\nexport interface WidgetEdge {\n  __typename?: \"WidgetEdge\";\n  /** A cursor for use in pagination. */\n  cursor: Scalars[\"UUID\"];\n  /** The item at the end of the edge. */\n  node: Widget;\n}\n\nexport interface CommentWidgetReaction {\n  __typename?: \"CommentWidgetReaction\";\n  widget: Widget;\n  user: User;\n  reaction: Scalars[\"String\"];\n}\n\nexport interface Notebook {\n  __typename?: \"Notebook\";\n  id: Scalars[\"UUID\"];\n  createdAt: Scalars[\"Time\"];\n  updatedAt: Scalars[\"Time\"];\n  owner: User;\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n  markdown: Scalars[\"String\"];\n  starsCount: Scalars[\"Int\"];\n  dailyStarsCount: Maybe<Scalars[\"Int\"]>;\n  weeklyStarsCount: Maybe<Scalars[\"Int\"]>;\n  monthlyStarsCount: Maybe<Scalars[\"Int\"]>;\n  isStarred: Scalars[\"Boolean\"];\n}\n\nexport interface VerifyEmail {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n}\n\nexport interface User {\n  __typename?: \"User\";\n  id: Scalars[\"UUID\"];\n  name: Maybe<Scalars[\"String\"]>;\n  username: Maybe<Scalars[\"String\"]>;\n  email: Maybe<Scalars[\"String\"]>;\n  verifiedEmail: Maybe<Scalars[\"String\"]>;\n  avatar: Maybe<Scalars[\"String\"]>;\n  cover: Maybe<Scalars[\"String\"]>;\n  bio: Maybe<Scalars[\"String\"]>;\n  location: Maybe<Scalars[\"String\"]>;\n  language: Maybe<Scalars[\"String\"]>;\n  createdAt: Maybe<Scalars[\"Time\"]>;\n  updatedAt: Maybe<Scalars[\"Time\"]>;\n  deletedAt: Maybe<Scalars[\"Time\"]>;\n  followingsCount: Maybe<Scalars[\"Int\"]>;\n  followersCount: Maybe<Scalars[\"Int\"]>;\n  widgetsCount: Maybe<Scalars[\"Int\"]>;\n  notebooksCount: Maybe<Scalars[\"Int\"]>;\n  starredNotebooksCount: Maybe<Scalars[\"Int\"]>;\n  isFollowing: Maybe<Scalars[\"Boolean\"]>;\n  areFriends: Maybe<Scalars[\"Boolean\"]>;\n  followings: Maybe<Array<User>>;\n  followers: Maybe<Array<User>>;\n  widgetSummaries: Array<UserWidget>;\n  widgets: WidgetConnection;\n  notifications: NotificationConnection;\n  /** Get user owned notebooks */\n  notebooks: NotebookConnection;\n  /** Get user starred notebooks */\n  starredNotebooks: NotebookConnection;\n  editorCursorColor: Maybe<Scalars[\"String\"]>;\n  githubUser: Maybe<GitHubUser>;\n}\n\nexport interface UserWidgetsArgs {\n  type: WidgetType;\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface UserNotificationsArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface UserNotebooksArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface UserStarredNotebooksArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface CreateWidget {\n  type: WidgetType;\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n}\n\nexport interface DeleteWidget {\n  id: Scalars[\"UUID\"];\n}\n\nexport interface RemoveReactionFromCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface AddReactionToCommentWidgetMessage {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface SubscribeToCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n}\n\nexport interface Mutation {\n  __typename?: \"Mutation\";\n  signUp: AuthReturn;\n  signIn: AuthReturn;\n  signUpWithGitHubAccount: AuthReturn;\n  signInWithGitHubAccount: AuthReturn;\n  deleteNotification: Scalars[\"Boolean\"];\n  deleteAllNotifications: Scalars[\"Boolean\"];\n  setUserInfo: User;\n  followUser: Scalars[\"Boolean\"];\n  unfollowUser: Scalars[\"Boolean\"];\n  sendEmailVerificationCode: Scalars[\"Boolean\"];\n  resetPassword: Scalars[\"Boolean\"];\n  verifyEmail: Scalars[\"Boolean\"];\n  linkWithGitHubAccount: Scalars[\"Boolean\"];\n  unlinkGitHubAccount: Scalars[\"Boolean\"];\n  publishNotebook: Notebook;\n  unpublishNotebook: Scalars[\"Boolean\"];\n  updateNotebook: Notebook;\n  starNotebook: Scalars[\"Boolean\"];\n  unstarNotebook: Scalars[\"Boolean\"];\n  createWidget: Widget;\n  updateWidget: Scalars[\"Boolean\"];\n  deleteWidget: Scalars[\"Boolean\"];\n  postCommentWidgetMessage: CommentWidgetMessage;\n  updateCommentWidgetMessage: CommentWidgetMessage;\n  addReactionToCommentWidget: Scalars[\"Boolean\"];\n  removeReactionFromCommentWidget: Scalars[\"Boolean\"];\n  addReactionToCommentWidgetMessage: Scalars[\"Boolean\"];\n  removeReactionFromCommentWidgetMessage: Scalars[\"Boolean\"];\n  subscribeToCommentWidget: Scalars[\"Boolean\"];\n  unsubscribeFromCommentWidget: Scalars[\"Boolean\"];\n}\n\nexport interface MutationSignUpArgs {\n  input: SignUpInput;\n}\n\nexport interface MutationSignInArgs {\n  input: SignInInput;\n}\n\nexport interface MutationSignUpWithGitHubAccountArgs {\n  input: SignUpWithGitHubAccount;\n}\n\nexport interface MutationSignInWithGitHubAccountArgs {\n  input: SignInWithGitHubAccount;\n}\n\nexport interface MutationDeleteNotificationArgs {\n  input: DeleteNotification;\n}\n\nexport interface MutationSetUserInfoArgs {\n  input: SetUserInfo;\n}\n\nexport interface MutationFollowUserArgs {\n  input: FollowUser;\n}\n\nexport interface MutationUnfollowUserArgs {\n  input: UnfollowUser;\n}\n\nexport interface MutationSendEmailVerificationCodeArgs {\n  input: Maybe<SendEmailVerificationCode>;\n}\n\nexport interface MutationResetPasswordArgs {\n  input: Maybe<ResetPassword>;\n}\n\nexport interface MutationVerifyEmailArgs {\n  input: Maybe<VerifyEmail>;\n}\n\nexport interface MutationLinkWithGitHubAccountArgs {\n  input: Maybe<LinkWithGitHubAccount>;\n}\n\nexport interface MutationPublishNotebookArgs {\n  input: PublishNotebook;\n}\n\nexport interface MutationUnpublishNotebookArgs {\n  input: UnpublishNotebook;\n}\n\nexport interface MutationUpdateNotebookArgs {\n  input: UpdateNotebook;\n}\n\nexport interface MutationStarNotebookArgs {\n  input: StarNotebook;\n}\n\nexport interface MutationUnstarNotebookArgs {\n  input: UnstarNotebook;\n}\n\nexport interface MutationCreateWidgetArgs {\n  input: Maybe<CreateWidget>;\n}\n\nexport interface MutationUpdateWidgetArgs {\n  input: Maybe<UpdateWidget>;\n}\n\nexport interface MutationDeleteWidgetArgs {\n  input: Maybe<DeleteWidget>;\n}\n\nexport interface MutationPostCommentWidgetMessageArgs {\n  input: PostCommentWidgetMessage;\n}\n\nexport interface MutationUpdateCommentWidgetMessageArgs {\n  input: UpdateCommentWidgetMessage;\n}\n\nexport interface MutationAddReactionToCommentWidgetArgs {\n  input: Maybe<AddReactionToCommentWidget>;\n}\n\nexport interface MutationRemoveReactionFromCommentWidgetArgs {\n  input: Maybe<RemoveReactionFromCommentWidget>;\n}\n\nexport interface MutationAddReactionToCommentWidgetMessageArgs {\n  input: Maybe<AddReactionToCommentWidgetMessage>;\n}\n\nexport interface MutationRemoveReactionFromCommentWidgetMessageArgs {\n  input: Maybe<RemoveReactionFromCommentWidgetMessage>;\n}\n\nexport interface MutationSubscribeToCommentWidgetArgs {\n  input: Maybe<SubscribeToCommentWidget>;\n}\n\nexport interface MutationUnsubscribeFromCommentWidgetArgs {\n  input: Maybe<UnsubscribeFromCommentWidget>;\n}\n\nexport interface UnfollowUser {\n  userID: Scalars[\"UUID\"];\n}\n\nexport interface UnstarNotebook {\n  notebookID: Scalars[\"UUID\"];\n}\n\nexport type SignUpMutationVariables = {\n  username: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n};\n\nexport type SignUpMutation = { __typename?: \"Mutation\" } & {\n  signUp: { __typename?: \"AuthReturn\" } & Pick<AuthReturn, \"token\"> & {\n      user: { __typename?: \"User\" } & Pick<User, \"id\">;\n    };\n};\n\nexport type SignInMutationVariables = {\n  email: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n};\n\nexport type SignInMutation = { __typename?: \"Mutation\" } & {\n  signIn: { __typename?: \"AuthReturn\" } & Pick<AuthReturn, \"token\"> & {\n      user: { __typename?: \"User\" } & Pick<User, \"id\">;\n    };\n};\n\nexport type SignUpWithGitHubAccountMutationVariables = {\n  username: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n  accessToken: Scalars[\"String\"];\n};\n\nexport type SignUpWithGitHubAccountMutation = { __typename?: \"Mutation\" } & {\n  signUpWithGitHubAccount: { __typename?: \"AuthReturn\" } & Pick<\n    AuthReturn,\n    \"token\"\n  > & { user: { __typename?: \"User\" } & Pick<User, \"id\"> };\n};\n\nexport type SignInWithGitHubAccountMutationVariables = {\n  code: Scalars[\"String\"];\n};\n\nexport type SignInWithGitHubAccountMutation = { __typename?: \"Mutation\" } & {\n  signInWithGitHubAccount: { __typename?: \"AuthReturn\" } & Pick<\n    AuthReturn,\n    \"token\"\n  > & {\n      user: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"email\">;\n    };\n};\n\nexport type SendEmailVerificationCodeMutationVariables = {\n  email: Scalars[\"String\"];\n};\n\nexport type SendEmailVerificationCodeMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"sendEmailVerificationCode\">;\n\nexport type ResetPasswordMutationVariables = {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n};\n\nexport type ResetPasswordMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"resetPassword\"\n>;\n\nexport type VerifyEmailMutationVariables = {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n};\n\nexport type VerifyEmailMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"verifyEmail\"\n>;\n\nexport type CreateCommentWidgetMutationVariables = {\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n};\n\nexport type CreateCommentWidgetMutation = { __typename?: \"Mutation\" } & {\n  createWidget: { __typename?: \"Widget\" } & Pick<Widget, \"id\">;\n};\n\nexport type PostCommentWidgetMessageMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n  notifyUsers: Array<Scalars[\"String\"]>;\n};\n\nexport type PostCommentWidgetMessageMutation = { __typename?: \"Mutation\" } & {\n  postCommentWidgetMessage: {\n    __typename?: \"CommentWidgetMessage\";\n  } & CommentWidgetMessageFieldsFragment;\n};\n\nexport type UpdateCommentWidgetMessageMutationVariables = {\n  messageID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n};\n\nexport type UpdateCommentWidgetMessageMutation = { __typename?: \"Mutation\" } & {\n  updateCommentWidgetMessage: {\n    __typename?: \"CommentWidgetMessage\";\n  } & CommentWidgetMessageFieldsFragment;\n};\n\nexport type AddReactionToCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type AddReactionToCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"addReactionToCommentWidget\">;\n\nexport type RemoveReactionFromCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type RemoveReactionFromCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"removeReactionFromCommentWidget\">;\n\nexport type AddReactionToCommentWidgetMessageMutationVariables = {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type AddReactionToCommentWidgetMessageMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"addReactionToCommentWidgetMessage\">;\n\nexport type RemoveReactionFromCommentWidgetMessageMutationVariables = {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type RemoveReactionFromCommentWidgetMessageMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"removeReactionFromCommentWidgetMessage\">;\n\nexport type SubscribeToCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n};\n\nexport type SubscribeToCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"subscribeToCommentWidget\">;\n\nexport type UnsubscribeFromCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n};\n\nexport type UnsubscribeFromCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"unsubscribeFromCommentWidget\">;\n\nexport type LinkWithGitHubAccountMutationVariables = {\n  code: Scalars[\"String\"];\n};\n\nexport type LinkWithGitHubAccountMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"linkWithGitHubAccount\"\n>;\n\nexport type UnlinkGitHubAccountMutationVariables = {};\n\nexport type UnlinkGitHubAccountMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"unlinkGitHubAccount\"\n>;\n\nexport type PublishNotebookMutationVariables = {\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n};\n\nexport type PublishNotebookMutation = { __typename?: \"Mutation\" } & {\n  publishNotebook: { __typename?: \"Notebook\" } & NotebookFieldsFragment;\n};\n\nexport type UnpublishNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n};\n\nexport type UnpublishNotebookMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"unpublishNotebook\"\n>;\n\nexport type UpdateNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n};\n\nexport type UpdateNotebookMutation = { __typename?: \"Mutation\" } & {\n  updateNotebook: { __typename?: \"Notebook\" } & NotebookFieldsFragment;\n};\n\nexport type StarNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n};\n\nexport type StarNotebookMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"starNotebook\"\n>;\n\nexport type UnstarNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n};\n\nexport type UnstarNotebookMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"unstarNotebook\"\n>;\n\nexport type DeleteNotificationMutationVariables = {\n  notificationID: Scalars[\"UUID\"];\n};\n\nexport type DeleteNotificationMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"deleteNotification\"\n>;\n\nexport type DeleteAllNotificationsMutationVariables = {};\n\nexport type DeleteAllNotificationsMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"deleteAllNotifications\"\n>;\n\nexport type SetUserInfoMutationVariables = {\n  cover: Scalars[\"String\"];\n  bio: Scalars[\"String\"];\n  location: Scalars[\"String\"];\n  language: Scalars[\"String\"];\n  name: Scalars[\"String\"];\n  avatar: Scalars[\"String\"];\n  editorCursorColor: Scalars[\"String\"];\n};\n\nexport type SetUserInfoMutation = { __typename?: \"Mutation\" } & {\n  setUserInfo: { __typename?: \"User\" } & ViewerFieldsFragment;\n};\n\nexport type DeleteWidgetMutationVariables = {\n  id: Scalars[\"UUID\"];\n};\n\nexport type DeleteWidgetMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"deleteWidget\"\n>;\n\nexport type UpdateWidgetMutationVariables = {\n  id: Scalars[\"UUID\"];\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n};\n\nexport type UpdateWidgetMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"updateWidget\"\n>;\n\nexport type CommentWidgetMessageFieldsFragment = {\n  __typename?: \"CommentWidgetMessage\";\n} & Pick<\n  CommentWidgetMessage,\n  \"id\" | \"markdown\" | \"createdAt\" | \"updatedAt\"\n> & {\n    author: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"avatar\">;\n    reactionSummaries: Array<\n      { __typename?: \"ReactionSummary\" } & Pick<\n        ReactionSummary,\n        \"count\" | \"reaction\" | \"selfAuthored\"\n      >\n    >;\n  };\n\nexport type CommentWidgetMessageConnectionFieldsFragment = {\n  __typename?: \"CommentWidgetMessageConnection\";\n} & {\n  pageInfo: { __typename?: \"PageInfo\" } & PageInfoFieldsFragment;\n  edges: Array<\n    { __typename?: \"CommentWidgetMessageEdge\" } & Pick<\n      CommentWidgetMessageEdge,\n      \"cursor\"\n    > & {\n        node: {\n          __typename?: \"CommentWidgetMessage\";\n        } & CommentWidgetMessageFieldsFragment;\n      }\n  >;\n};\n\nexport type CommentWidgetFieldsFragment = { __typename?: \"Widget\" } & Pick<\n  Widget,\n  \"id\" | \"description\" | \"source\" | \"canConfigure\"\n> & {\n    owner: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"avatar\">;\n    instance: { __typename?: \"CommentWidgetInstance\" } & Pick<\n      CommentWidgetInstance,\n      \"type\"\n    > & {\n        commentWidget: { __typename?: \"CommentWidget\" } & Pick<\n          CommentWidget,\n          | \"id\"\n          | \"createdAt\"\n          | \"updatedAt\"\n          | \"messagesCount\"\n          | \"reactionsCount\"\n          | \"subscribed\"\n        > & {\n            reactionSummaries: Array<\n              { __typename?: \"ReactionSummary\" } & Pick<\n                ReactionSummary,\n                \"count\" | \"reaction\" | \"selfAuthored\"\n              >\n            >;\n            messages: {\n              __typename?: \"CommentWidgetMessageConnection\";\n            } & CommentWidgetMessageConnectionFieldsFragment;\n          };\n      };\n  };\n\nexport type CommentWidgetQueryVariables = {\n  widgetID: Scalars[\"UUID\"];\n};\n\nexport type CommentWidgetQuery = { __typename?: \"Query\" } & {\n  widget: { __typename?: \"Widget\" } & CommentWidgetFieldsFragment;\n};\n\nexport type CommentWidgetMessagesQueryVariables = {\n  widgetID: Scalars[\"UUID\"];\n  before: Scalars[\"UUID\"];\n  after: Scalars[\"UUID\"];\n  first: Scalars[\"Int\"];\n  last: Scalars[\"Int\"];\n};\n\nexport type CommentWidgetMessagesQuery = { __typename?: \"Query\" } & {\n  widget: { __typename?: \"Widget\" } & {\n    instance: { __typename?: \"CommentWidgetInstance\" } & Pick<\n      CommentWidgetInstance,\n      \"type\"\n    > & {\n        commentWidget: { __typename?: \"CommentWidget\" } & {\n          messages: {\n            __typename?: \"CommentWidgetMessageConnection\";\n          } & CommentWidgetMessageConnectionFieldsFragment;\n        };\n      };\n  };\n};\n\nexport type GitHubUserQueryVariables = {};\n\nexport type GitHubUserQuery = { __typename?: \"Query\" } & {\n  viewer: { __typename?: \"User\" } & {\n    githubUser: Maybe<\n      { __typename?: \"GitHubUser\" } & Pick<\n        GitHubUser,\n        \"login\" | \"avatar\" | \"email\"\n      >\n    >;\n  };\n};\n\nexport type NotebookFieldsFragment = { __typename?: \"Notebook\" } & Pick<\n  Notebook,\n  | \"id\"\n  | \"createdAt\"\n  | \"updatedAt\"\n  | \"gitURL\"\n  | \"gitBranch\"\n  | \"markdown\"\n  | \"starsCount\"\n  | \"isStarred\"\n> & {\n    owner: { __typename?: \"User\" } & Pick<User, \"id\" | \"avatar\" | \"username\">;\n  };\n\nexport type NotebooksQueryVariables = {\n  query?: Maybe<Scalars[\"String\"]>;\n  orderBy?: Maybe<NotebookOrderBy>;\n  page?: Maybe<Scalars[\"Int\"]>;\n  perPage?: Maybe<Scalars[\"Int\"]>;\n};\n\nexport type NotebooksQuery = { __typename?: \"Query\" } & {\n  notebooks: Array<{ __typename?: \"Notebook\" } & NotebookFieldsFragment>;\n};\n\nexport type NotificationFieldsFragment = { __typename?: \"Notification\" } & Pick<\n  Notification,\n  \"id\" | \"createdAt\" | \"meta\"\n> & {\n    origin: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"avatar\">;\n    receiver: { __typename?: \"User\" } & Pick<\n      User,\n      \"id\" | \"username\" | \"avatar\"\n    >;\n    event:\n      | ({ __typename?: \"NotificationEventCommentWidgetMessagePosting\" } & Pick<\n          NotificationEventCommentWidgetMessagePosting,\n          \"type\"\n        > & {\n            message: { __typename?: \"CommentWidgetMessage\" } & Pick<\n              CommentWidgetMessage,\n              \"id\" | \"markdown\" | \"createdAt\"\n            > & {\n                widget: { __typename?: \"Widget\" } & Pick<\n                  Widget,\n                  \"description\" | \"source\"\n                > & {\n                    owner: { __typename?: \"User\" } & Pick<\n                      User,\n                      \"id\" | \"username\" | \"avatar\"\n                    >;\n                  };\n              };\n          })\n      | ({ __typename?: \"NotificationEventUserFollowing\" } & Pick<\n          NotificationEventUserFollowing,\n          \"type\"\n        >);\n  };\n\nexport type NotificationsQueryVariables = {\n  before: Scalars[\"UUID\"];\n  after: Scalars[\"UUID\"];\n  first: Maybe<Scalars[\"Int\"]>;\n  last: Maybe<Scalars[\"Int\"]>;\n};\n\nexport type NotificationsQuery = { __typename?: \"Query\" } & {\n  viewer: { __typename?: \"User\" } & {\n    notifications: { __typename?: \"NotificationConnection\" } & {\n      pageInfo: { __typename?: \"PageInfo\" } & PageInfoFieldsFragment;\n      edges: Array<\n        { __typename?: \"NotificationEdge\" } & Pick<\n          NotificationEdge,\n          \"cursor\"\n        > & {\n            node: { __typename?: \"Notification\" } & NotificationFieldsFragment;\n          }\n      >;\n    };\n  };\n};\n\nexport type PageInfoFieldsFragment = { __typename?: \"PageInfo\" } & Pick<\n  PageInfo,\n  \"startCursor\" | \"endCursor\" | \"hasNextPage\" | \"hasPreviousPage\"\n>;\n\nexport type ViewerFieldsFragment = { __typename?: \"User\" } & Pick<\n  User,\n  | \"avatar\"\n  | \"bio\"\n  | \"cover\"\n  | \"createdAt\"\n  | \"deletedAt\"\n  | \"id\"\n  | \"language\"\n  | \"name\"\n  | \"username\"\n  | \"email\"\n  | \"verifiedEmail\"\n  | \"updatedAt\"\n  | \"widgetsCount\"\n  | \"notebooksCount\"\n  | \"starredNotebooksCount\"\n  | \"editorCursorColor\"\n> & {\n    notifications: { __typename?: \"NotificationConnection\" } & Pick<\n      NotificationConnection,\n      \"totalCount\"\n    >;\n  };\n\nexport type ViewerQueryVariables = {};\n\nexport type ViewerQuery = { __typename?: \"Query\" } & {\n  viewer: { __typename?: \"User\" } & ViewerFieldsFragment;\n};\n\nexport const PageInfoFieldsFragmentDoc = gql`\n  fragment PageInfoFields on PageInfo {\n    startCursor\n    endCursor\n    hasNextPage\n    hasPreviousPage\n  }\n`;\nexport const CommentWidgetMessageFieldsFragmentDoc = gql`\n  fragment CommentWidgetMessageFields on CommentWidgetMessage {\n    id\n    author {\n      id\n      username\n      avatar\n    }\n    markdown\n    createdAt\n    updatedAt\n    reactionSummaries {\n      count\n      reaction\n      selfAuthored\n    }\n  }\n`;\nexport const CommentWidgetMessageConnectionFieldsFragmentDoc = gql`\n  fragment CommentWidgetMessageConnectionFields on CommentWidgetMessageConnection {\n    pageInfo {\n      ...PageInfoFields\n    }\n    edges {\n      cursor\n      node {\n        ...CommentWidgetMessageFields\n      }\n    }\n  }\n  ${PageInfoFieldsFragmentDoc}\n  ${CommentWidgetMessageFieldsFragmentDoc}\n`;\nexport const CommentWidgetFieldsFragmentDoc = gql`\n  fragment CommentWidgetFields on Widget {\n    id\n    owner {\n      id\n      username\n      avatar\n    }\n    description\n    source\n    canConfigure\n    instance {\n      type\n      ... on CommentWidgetInstance {\n        type\n        commentWidget {\n          id\n          createdAt\n          updatedAt\n          messagesCount\n          reactionsCount\n          subscribed\n          reactionSummaries {\n            count\n            reaction\n            selfAuthored\n          }\n          messages(first: 20) {\n            ...CommentWidgetMessageConnectionFields\n          }\n        }\n      }\n    }\n  }\n  ${CommentWidgetMessageConnectionFieldsFragmentDoc}\n`;\nexport const NotebookFieldsFragmentDoc = gql`\n  fragment NotebookFields on Notebook {\n    id\n    createdAt\n    updatedAt\n    owner {\n      id\n      avatar\n      username\n    }\n    gitURL\n    gitBranch\n    markdown\n    starsCount\n    isStarred\n  }\n`;\nexport const NotificationFieldsFragmentDoc = gql`\n  fragment NotificationFields on Notification {\n    id\n    createdAt\n    origin {\n      id\n      username\n      avatar\n    }\n    receiver {\n      id\n      username\n      avatar\n    }\n    meta\n    event {\n      type\n      ... on NotificationEventUserFollowing {\n        type\n      }\n      ... on NotificationEventCommentWidgetMessagePosting {\n        type\n        message {\n          id\n          markdown\n          createdAt\n          widget {\n            owner {\n              id\n              username\n              avatar\n            }\n            description\n            source\n          }\n        }\n      }\n    }\n  }\n`;\nexport const ViewerFieldsFragmentDoc = gql`\n  fragment ViewerFields on User {\n    avatar\n    bio\n    cover\n    createdAt\n    deletedAt\n    id\n    language\n    name\n    username\n    email\n    verifiedEmail\n    updatedAt\n    widgetsCount\n    notebooksCount\n    starredNotebooksCount\n    notifications(last: 1) {\n      totalCount\n    }\n    editorCursorColor\n  }\n`;\nexport const SignUpDocument = gql`\n  mutation SignUp($username: String!, $email: String!, $password: String!) {\n    signUp(input: { username: $username, email: $email, password: $password }) {\n      token\n      user {\n        id\n      }\n    }\n  }\n`;\n\nexport const SignUpComponent = (\n  props: Omit<\n    Urql.MutationProps<SignUpMutation, SignUpMutationVariables>,\n    \"query\"\n  > & { variables?: SignUpMutationVariables },\n) => <Urql.Mutation {...props} query={SignUpDocument} />;\n\nexport function useSignUpMutation() {\n  return Urql.useMutation<SignUpMutation, SignUpMutationVariables>(\n    SignUpDocument,\n  );\n}\nexport const SignInDocument = gql`\n  mutation SignIn($email: String!, $password: String!) {\n    signIn(input: { email: $email, password: $password }) {\n      token\n      user {\n        id\n      }\n    }\n  }\n`;\n\nexport const SignInComponent = (\n  props: Omit<\n    Urql.MutationProps<SignInMutation, SignInMutationVariables>,\n    \"query\"\n  > & { variables?: SignInMutationVariables },\n) => <Urql.Mutation {...props} query={SignInDocument} />;\n\nexport function useSignInMutation() {\n  return Urql.useMutation<SignInMutation, SignInMutationVariables>(\n    SignInDocument,\n  );\n}\nexport const SignUpWithGitHubAccountDocument = gql`\n  mutation SignUpWithGitHubAccount(\n    $username: String!\n    $email: String!\n    $accessToken: String!\n  ) {\n    signUpWithGitHubAccount(\n      input: { username: $username, email: $email, accessToken: $accessToken }\n    ) {\n      token\n      user {\n        id\n      }\n    }\n  }\n`;\n\nexport const SignUpWithGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SignUpWithGitHubAccountMutation,\n      SignUpWithGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SignUpWithGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={SignUpWithGitHubAccountDocument} />;\n\nexport function useSignUpWithGitHubAccountMutation() {\n  return Urql.useMutation<\n    SignUpWithGitHubAccountMutation,\n    SignUpWithGitHubAccountMutationVariables\n  >(SignUpWithGitHubAccountDocument);\n}\nexport const SignInWithGitHubAccountDocument = gql`\n  mutation SignInWithGitHubAccount($code: String!) {\n    signInWithGitHubAccount(input: { code: $code }) {\n      token\n      user {\n        id\n        username\n        email\n      }\n    }\n  }\n`;\n\nexport const SignInWithGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SignInWithGitHubAccountMutation,\n      SignInWithGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SignInWithGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={SignInWithGitHubAccountDocument} />;\n\nexport function useSignInWithGitHubAccountMutation() {\n  return Urql.useMutation<\n    SignInWithGitHubAccountMutation,\n    SignInWithGitHubAccountMutationVariables\n  >(SignInWithGitHubAccountDocument);\n}\nexport const SendEmailVerificationCodeDocument = gql`\n  mutation SendEmailVerificationCode($email: String!) {\n    sendEmailVerificationCode(input: { email: $email })\n  }\n`;\n\nexport const SendEmailVerificationCodeComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SendEmailVerificationCodeMutation,\n      SendEmailVerificationCodeMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SendEmailVerificationCodeMutationVariables },\n) => <Urql.Mutation {...props} query={SendEmailVerificationCodeDocument} />;\n\nexport function useSendEmailVerificationCodeMutation() {\n  return Urql.useMutation<\n    SendEmailVerificationCodeMutation,\n    SendEmailVerificationCodeMutationVariables\n  >(SendEmailVerificationCodeDocument);\n}\nexport const ResetPasswordDocument = gql`\n  mutation ResetPassword(\n    $email: String!\n    $verificationCode: String!\n    $password: String!\n  ) {\n    resetPassword(\n      input: {\n        email: $email\n        verificationCode: $verificationCode\n        password: $password\n      }\n    )\n  }\n`;\n\nexport const ResetPasswordComponent = (\n  props: Omit<\n    Urql.MutationProps<ResetPasswordMutation, ResetPasswordMutationVariables>,\n    \"query\"\n  > & { variables?: ResetPasswordMutationVariables },\n) => <Urql.Mutation {...props} query={ResetPasswordDocument} />;\n\nexport function useResetPasswordMutation() {\n  return Urql.useMutation<\n    ResetPasswordMutation,\n    ResetPasswordMutationVariables\n  >(ResetPasswordDocument);\n}\nexport const VerifyEmailDocument = gql`\n  mutation VerifyEmail($email: String!, $verificationCode: String!) {\n    verifyEmail(input: { email: $email, verificationCode: $verificationCode })\n  }\n`;\n\nexport const VerifyEmailComponent = (\n  props: Omit<\n    Urql.MutationProps<VerifyEmailMutation, VerifyEmailMutationVariables>,\n    \"query\"\n  > & { variables?: VerifyEmailMutationVariables },\n) => <Urql.Mutation {...props} query={VerifyEmailDocument} />;\n\nexport function useVerifyEmailMutation() {\n  return Urql.useMutation<VerifyEmailMutation, VerifyEmailMutationVariables>(\n    VerifyEmailDocument,\n  );\n}\nexport const CreateCommentWidgetDocument = gql`\n  mutation CreateCommentWidget($description: String!, $source: String!) {\n    createWidget(\n      input: { description: $description, source: $source, type: COMMENT }\n    ) {\n      id\n    }\n  }\n`;\n\nexport const CreateCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      CreateCommentWidgetMutation,\n      CreateCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: CreateCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={CreateCommentWidgetDocument} />;\n\nexport function useCreateCommentWidgetMutation() {\n  return Urql.useMutation<\n    CreateCommentWidgetMutation,\n    CreateCommentWidgetMutationVariables\n  >(CreateCommentWidgetDocument);\n}\nexport const PostCommentWidgetMessageDocument = gql`\n  mutation PostCommentWidgetMessage(\n    $widgetID: UUID!\n    $markdown: String!\n    $notifyUsers: [String!]!\n  ) {\n    postCommentWidgetMessage(\n      input: {\n        widgetID: $widgetID\n        markdown: $markdown\n        notifyUsers: $notifyUsers\n      }\n    ) {\n      ...CommentWidgetMessageFields\n    }\n  }\n  ${CommentWidgetMessageFieldsFragmentDoc}\n`;\n\nexport const PostCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      PostCommentWidgetMessageMutation,\n      PostCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: PostCommentWidgetMessageMutationVariables },\n) => <Urql.Mutation {...props} query={PostCommentWidgetMessageDocument} />;\n\nexport function usePostCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    PostCommentWidgetMessageMutation,\n    PostCommentWidgetMessageMutationVariables\n  >(PostCommentWidgetMessageDocument);\n}\nexport const UpdateCommentWidgetMessageDocument = gql`\n  mutation UpdateCommentWidgetMessage($messageID: UUID!, $markdown: String!) {\n    updateCommentWidgetMessage(\n      input: { messageID: $messageID, markdown: $markdown }\n    ) {\n      ...CommentWidgetMessageFields\n    }\n  }\n  ${CommentWidgetMessageFieldsFragmentDoc}\n`;\n\nexport const UpdateCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UpdateCommentWidgetMessageMutation,\n      UpdateCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UpdateCommentWidgetMessageMutationVariables },\n) => <Urql.Mutation {...props} query={UpdateCommentWidgetMessageDocument} />;\n\nexport function useUpdateCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    UpdateCommentWidgetMessageMutation,\n    UpdateCommentWidgetMessageMutationVariables\n  >(UpdateCommentWidgetMessageDocument);\n}\nexport const AddReactionToCommentWidgetDocument = gql`\n  mutation AddReactionToCommentWidget($widgetID: UUID!, $reaction: String!) {\n    addReactionToCommentWidget(\n      input: { widgetID: $widgetID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const AddReactionToCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      AddReactionToCommentWidgetMutation,\n      AddReactionToCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: AddReactionToCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={AddReactionToCommentWidgetDocument} />;\n\nexport function useAddReactionToCommentWidgetMutation() {\n  return Urql.useMutation<\n    AddReactionToCommentWidgetMutation,\n    AddReactionToCommentWidgetMutationVariables\n  >(AddReactionToCommentWidgetDocument);\n}\nexport const RemoveReactionFromCommentWidgetDocument = gql`\n  mutation RemoveReactionFromCommentWidget(\n    $widgetID: UUID!\n    $reaction: String!\n  ) {\n    removeReactionFromCommentWidget(\n      input: { widgetID: $widgetID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const RemoveReactionFromCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      RemoveReactionFromCommentWidgetMutation,\n      RemoveReactionFromCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: RemoveReactionFromCommentWidgetMutationVariables },\n) => (\n  <Urql.Mutation {...props} query={RemoveReactionFromCommentWidgetDocument} />\n);\n\nexport function useRemoveReactionFromCommentWidgetMutation() {\n  return Urql.useMutation<\n    RemoveReactionFromCommentWidgetMutation,\n    RemoveReactionFromCommentWidgetMutationVariables\n  >(RemoveReactionFromCommentWidgetDocument);\n}\nexport const AddReactionToCommentWidgetMessageDocument = gql`\n  mutation AddReactionToCommentWidgetMessage(\n    $messageID: UUID!\n    $reaction: String!\n  ) {\n    addReactionToCommentWidgetMessage(\n      input: { messageID: $messageID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const AddReactionToCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      AddReactionToCommentWidgetMessageMutation,\n      AddReactionToCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: AddReactionToCommentWidgetMessageMutationVariables },\n) => (\n  <Urql.Mutation {...props} query={AddReactionToCommentWidgetMessageDocument} />\n);\n\nexport function useAddReactionToCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    AddReactionToCommentWidgetMessageMutation,\n    AddReactionToCommentWidgetMessageMutationVariables\n  >(AddReactionToCommentWidgetMessageDocument);\n}\nexport const RemoveReactionFromCommentWidgetMessageDocument = gql`\n  mutation RemoveReactionFromCommentWidgetMessage(\n    $messageID: UUID!\n    $reaction: String!\n  ) {\n    removeReactionFromCommentWidgetMessage(\n      input: { messageID: $messageID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const RemoveReactionFromCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      RemoveReactionFromCommentWidgetMessageMutation,\n      RemoveReactionFromCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: RemoveReactionFromCommentWidgetMessageMutationVariables },\n) => (\n  <Urql.Mutation\n    {...props}\n    query={RemoveReactionFromCommentWidgetMessageDocument}\n  />\n);\n\nexport function useRemoveReactionFromCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    RemoveReactionFromCommentWidgetMessageMutation,\n    RemoveReactionFromCommentWidgetMessageMutationVariables\n  >(RemoveReactionFromCommentWidgetMessageDocument);\n}\nexport const SubscribeToCommentWidgetDocument = gql`\n  mutation SubscribeToCommentWidget($widgetID: UUID!) {\n    subscribeToCommentWidget(input: { widgetID: $widgetID })\n  }\n`;\n\nexport const SubscribeToCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SubscribeToCommentWidgetMutation,\n      SubscribeToCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SubscribeToCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={SubscribeToCommentWidgetDocument} />;\n\nexport function useSubscribeToCommentWidgetMutation() {\n  return Urql.useMutation<\n    SubscribeToCommentWidgetMutation,\n    SubscribeToCommentWidgetMutationVariables\n  >(SubscribeToCommentWidgetDocument);\n}\nexport const UnsubscribeFromCommentWidgetDocument = gql`\n  mutation UnsubscribeFromCommentWidget($widgetID: UUID!) {\n    unsubscribeFromCommentWidget(input: { widgetID: $widgetID })\n  }\n`;\n\nexport const UnsubscribeFromCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UnsubscribeFromCommentWidgetMutation,\n      UnsubscribeFromCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UnsubscribeFromCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={UnsubscribeFromCommentWidgetDocument} />;\n\nexport function useUnsubscribeFromCommentWidgetMutation() {\n  return Urql.useMutation<\n    UnsubscribeFromCommentWidgetMutation,\n    UnsubscribeFromCommentWidgetMutationVariables\n  >(UnsubscribeFromCommentWidgetDocument);\n}\nexport const LinkWithGitHubAccountDocument = gql`\n  mutation LinkWithGitHubAccount($code: String!) {\n    linkWithGitHubAccount(input: { code: $code })\n  }\n`;\n\nexport const LinkWithGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      LinkWithGitHubAccountMutation,\n      LinkWithGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: LinkWithGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={LinkWithGitHubAccountDocument} />;\n\nexport function useLinkWithGitHubAccountMutation() {\n  return Urql.useMutation<\n    LinkWithGitHubAccountMutation,\n    LinkWithGitHubAccountMutationVariables\n  >(LinkWithGitHubAccountDocument);\n}\nexport const UnlinkGitHubAccountDocument = gql`\n  mutation UnlinkGitHubAccount {\n    unlinkGitHubAccount\n  }\n`;\n\nexport const UnlinkGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UnlinkGitHubAccountMutation,\n      UnlinkGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UnlinkGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={UnlinkGitHubAccountDocument} />;\n\nexport function useUnlinkGitHubAccountMutation() {\n  return Urql.useMutation<\n    UnlinkGitHubAccountMutation,\n    UnlinkGitHubAccountMutationVariables\n  >(UnlinkGitHubAccountDocument);\n}\nexport const PublishNotebookDocument = gql`\n  mutation PublishNotebook($gitURL: String!, $gitBranch: String!) {\n    publishNotebook(input: { gitURL: $gitURL, gitBranch: $gitBranch }) {\n      ...NotebookFields\n    }\n  }\n  ${NotebookFieldsFragmentDoc}\n`;\n\nexport const PublishNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      PublishNotebookMutation,\n      PublishNotebookMutationVariables\n    >,\n    \"query\"\n  > & { variables?: PublishNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={PublishNotebookDocument} />;\n\nexport function usePublishNotebookMutation() {\n  return Urql.useMutation<\n    PublishNotebookMutation,\n    PublishNotebookMutationVariables\n  >(PublishNotebookDocument);\n}\nexport const UnpublishNotebookDocument = gql`\n  mutation UnpublishNotebook($notebookID: UUID!) {\n    unpublishNotebook(input: { notebookID: $notebookID })\n  }\n`;\n\nexport const UnpublishNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UnpublishNotebookMutation,\n      UnpublishNotebookMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UnpublishNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={UnpublishNotebookDocument} />;\n\nexport function useUnpublishNotebookMutation() {\n  return Urql.useMutation<\n    UnpublishNotebookMutation,\n    UnpublishNotebookMutationVariables\n  >(UnpublishNotebookDocument);\n}\nexport const UpdateNotebookDocument = gql`\n  mutation UpdateNotebook(\n    $notebookID: UUID!\n    $gitURL: String!\n    $gitBranch: String!\n  ) {\n    updateNotebook(\n      input: { notebookID: $notebookID, gitURL: $gitURL, gitBranch: $gitBranch }\n    ) {\n      ...NotebookFields\n    }\n  }\n  ${NotebookFieldsFragmentDoc}\n`;\n\nexport const UpdateNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<UpdateNotebookMutation, UpdateNotebookMutationVariables>,\n    \"query\"\n  > & { variables?: UpdateNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={UpdateNotebookDocument} />;\n\nexport function useUpdateNotebookMutation() {\n  return Urql.useMutation<\n    UpdateNotebookMutation,\n    UpdateNotebookMutationVariables\n  >(UpdateNotebookDocument);\n}\nexport const StarNotebookDocument = gql`\n  mutation StarNotebook($notebookID: UUID!) {\n    starNotebook(input: { notebookID: $notebookID })\n  }\n`;\n\nexport const StarNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<StarNotebookMutation, StarNotebookMutationVariables>,\n    \"query\"\n  > & { variables?: StarNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={StarNotebookDocument} />;\n\nexport function useStarNotebookMutation() {\n  return Urql.useMutation<StarNotebookMutation, StarNotebookMutationVariables>(\n    StarNotebookDocument,\n  );\n}\nexport const UnstarNotebookDocument = gql`\n  mutation UnstarNotebook($notebookID: UUID!) {\n    unstarNotebook(input: { notebookID: $notebookID })\n  }\n`;\n\nexport const UnstarNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<UnstarNotebookMutation, UnstarNotebookMutationVariables>,\n    \"query\"\n  > & { variables?: UnstarNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={UnstarNotebookDocument} />;\n\nexport function useUnstarNotebookMutation() {\n  return Urql.useMutation<\n    UnstarNotebookMutation,\n    UnstarNotebookMutationVariables\n  >(UnstarNotebookDocument);\n}\nexport const DeleteNotificationDocument = gql`\n  mutation DeleteNotification($notificationID: UUID!) {\n    deleteNotification(input: { notificationID: $notificationID })\n  }\n`;\n\nexport const DeleteNotificationComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      DeleteNotificationMutation,\n      DeleteNotificationMutationVariables\n    >,\n    \"query\"\n  > & { variables?: DeleteNotificationMutationVariables },\n) => <Urql.Mutation {...props} query={DeleteNotificationDocument} />;\n\nexport function useDeleteNotificationMutation() {\n  return Urql.useMutation<\n    DeleteNotificationMutation,\n    DeleteNotificationMutationVariables\n  >(DeleteNotificationDocument);\n}\nexport const DeleteAllNotificationsDocument = gql`\n  mutation DeleteAllNotifications {\n    deleteAllNotifications\n  }\n`;\n\nexport const DeleteAllNotificationsComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      DeleteAllNotificationsMutation,\n      DeleteAllNotificationsMutationVariables\n    >,\n    \"query\"\n  > & { variables?: DeleteAllNotificationsMutationVariables },\n) => <Urql.Mutation {...props} query={DeleteAllNotificationsDocument} />;\n\nexport function useDeleteAllNotificationsMutation() {\n  return Urql.useMutation<\n    DeleteAllNotificationsMutation,\n    DeleteAllNotificationsMutationVariables\n  >(DeleteAllNotificationsDocument);\n}\nexport const SetUserInfoDocument = gql`\n  mutation SetUserInfo(\n    $cover: String!\n    $bio: String!\n    $location: String!\n    $language: String!\n    $name: String!\n    $avatar: String!\n    $editorCursorColor: String!\n  ) {\n    setUserInfo(\n      input: {\n        cover: $cover\n        bio: $bio\n        location: $location\n        language: $language\n        name: $name\n        avatar: $avatar\n        editorCursorColor: $editorCursorColor\n      }\n    ) {\n      ...ViewerFields\n    }\n  }\n  ${ViewerFieldsFragmentDoc}\n`;\n\nexport const SetUserInfoComponent = (\n  props: Omit<\n    Urql.MutationProps<SetUserInfoMutation, SetUserInfoMutationVariables>,\n    \"query\"\n  > & { variables?: SetUserInfoMutationVariables },\n) => <Urql.Mutation {...props} query={SetUserInfoDocument} />;\n\nexport function useSetUserInfoMutation() {\n  return Urql.useMutation<SetUserInfoMutation, SetUserInfoMutationVariables>(\n    SetUserInfoDocument,\n  );\n}\nexport const DeleteWidgetDocument = gql`\n  mutation DeleteWidget($id: UUID!) {\n    deleteWidget(input: { id: $id })\n  }\n`;\n\nexport const DeleteWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<DeleteWidgetMutation, DeleteWidgetMutationVariables>,\n    \"query\"\n  > & { variables?: DeleteWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={DeleteWidgetDocument} />;\n\nexport function useDeleteWidgetMutation() {\n  return Urql.useMutation<DeleteWidgetMutation, DeleteWidgetMutationVariables>(\n    DeleteWidgetDocument,\n  );\n}\nexport const UpdateWidgetDocument = gql`\n  mutation UpdateWidget($id: UUID!, $description: String!, $source: String!) {\n    updateWidget(input: { id: $id, description: $description, source: $source })\n  }\n`;\n\nexport const UpdateWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<UpdateWidgetMutation, UpdateWidgetMutationVariables>,\n    \"query\"\n  > & { variables?: UpdateWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={UpdateWidgetDocument} />;\n\nexport function useUpdateWidgetMutation() {\n  return Urql.useMutation<UpdateWidgetMutation, UpdateWidgetMutationVariables>(\n    UpdateWidgetDocument,\n  );\n}\nexport const CommentWidgetDocument = gql`\n  query CommentWidget($widgetID: UUID!) {\n    widget(id: $widgetID) {\n      ...CommentWidgetFields\n    }\n  }\n  ${CommentWidgetFieldsFragmentDoc}\n`;\n\nexport const CommentWidgetComponent = (\n  props: Omit<\n    Urql.QueryProps<CommentWidgetQuery, CommentWidgetQueryVariables>,\n    \"query\"\n  > & { variables: CommentWidgetQueryVariables },\n) => <Urql.Query {...props} query={CommentWidgetDocument} />;\n\nexport function useCommentWidgetQuery(\n  options: Omit<Urql.UseQueryArgs<CommentWidgetQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<CommentWidgetQuery>({\n    query: CommentWidgetDocument,\n    ...options,\n  });\n}\nexport const CommentWidgetMessagesDocument = gql`\n  query CommentWidgetMessages(\n    $widgetID: UUID!\n    $before: UUID!\n    $after: UUID!\n    $first: Int!\n    $last: Int!\n  ) {\n    widget(id: $widgetID) {\n      instance {\n        type\n        ... on CommentWidgetInstance {\n          type\n          commentWidget {\n            messages(\n              before: $before\n              after: $after\n              first: $first\n              last: $last\n            ) {\n              ...CommentWidgetMessageConnectionFields\n            }\n          }\n        }\n      }\n    }\n  }\n  ${CommentWidgetMessageConnectionFieldsFragmentDoc}\n`;\n\nexport const CommentWidgetMessagesComponent = (\n  props: Omit<\n    Urql.QueryProps<\n      CommentWidgetMessagesQuery,\n      CommentWidgetMessagesQueryVariables\n    >,\n    \"query\"\n  > & { variables: CommentWidgetMessagesQueryVariables },\n) => <Urql.Query {...props} query={CommentWidgetMessagesDocument} />;\n\nexport function useCommentWidgetMessagesQuery(\n  options: Omit<\n    Urql.UseQueryArgs<CommentWidgetMessagesQueryVariables>,\n    \"query\"\n  > = {},\n) {\n  return Urql.useQuery<CommentWidgetMessagesQuery>({\n    query: CommentWidgetMessagesDocument,\n    ...options,\n  });\n}\nexport const GitHubUserDocument = gql`\n  query GitHubUser {\n    viewer {\n      githubUser {\n        login\n        avatar\n        email\n      }\n    }\n  }\n`;\n\nexport const GitHubUserComponent = (\n  props: Omit<\n    Urql.QueryProps<GitHubUserQuery, GitHubUserQueryVariables>,\n    \"query\"\n  > & { variables?: GitHubUserQueryVariables },\n) => <Urql.Query {...props} query={GitHubUserDocument} />;\n\nexport function useGitHubUserQuery(\n  options: Omit<Urql.UseQueryArgs<GitHubUserQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<GitHubUserQuery>({\n    query: GitHubUserDocument,\n    ...options,\n  });\n}\nexport const NotebooksDocument = gql`\n  query Notebooks(\n    $query: String = \"\"\n    $orderBy: NotebookOrderBy = TOTAL_STARS_COUNT\n    $page: Int = 0\n    $perPage: Int = 10\n  ) {\n    notebooks(\n      query: $query\n      orderBy: $orderBy\n      page: $page\n      perPage: $perPage\n    ) {\n      ...NotebookFields\n    }\n  }\n  ${NotebookFieldsFragmentDoc}\n`;\n\nexport const NotebooksComponent = (\n  props: Omit<\n    Urql.QueryProps<NotebooksQuery, NotebooksQueryVariables>,\n    \"query\"\n  > & { variables?: NotebooksQueryVariables },\n) => <Urql.Query {...props} query={NotebooksDocument} />;\n\nexport function useNotebooksQuery(\n  options: Omit<Urql.UseQueryArgs<NotebooksQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<NotebooksQuery>({\n    query: NotebooksDocument,\n    ...options,\n  });\n}\nexport const NotificationsDocument = gql`\n  query Notifications($before: UUID!, $after: UUID!, $first: Int, $last: Int) {\n    viewer {\n      notifications(\n        before: $before\n        after: $after\n        first: $first\n        last: $last\n      ) {\n        pageInfo {\n          ...PageInfoFields\n        }\n        edges {\n          cursor\n          node {\n            ...NotificationFields\n          }\n        }\n      }\n    }\n  }\n  ${PageInfoFieldsFragmentDoc}\n  ${NotificationFieldsFragmentDoc}\n`;\n\nexport const NotificationsComponent = (\n  props: Omit<\n    Urql.QueryProps<NotificationsQuery, NotificationsQueryVariables>,\n    \"query\"\n  > & { variables: NotificationsQueryVariables },\n) => <Urql.Query {...props} query={NotificationsDocument} />;\n\nexport function useNotificationsQuery(\n  options: Omit<Urql.UseQueryArgs<NotificationsQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<NotificationsQuery>({\n    query: NotificationsDocument,\n    ...options,\n  });\n}\nexport const ViewerDocument = gql`\n  query Viewer {\n    viewer {\n      ...ViewerFields\n    }\n  }\n  ${ViewerFieldsFragmentDoc}\n`;\n\nexport const ViewerComponent = (\n  props: Omit<Urql.QueryProps<ViewerQuery, ViewerQueryVariables>, \"query\"> & {\n    variables?: ViewerQueryVariables;\n  },\n) => <Urql.Query {...props} query={ViewerDocument} />;\n\nexport function useViewerQuery(\n  options: Omit<Urql.UseQueryArgs<ViewerQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<ViewerQuery>({ query: ViewerDocument, ...options });\n}\n","import { createHashHistory, createBrowserHistory } from \"history\";\n\n// const hashHistory = createHashHistory();\n// export default hashHistory;\n\nexport const browserHistory = createBrowserHistory();\n","import {\n  Box,\n  Button,\n  Card,\n  IconButton,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { ChevronLeft } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  useLinkWithGitHubAccountMutation,\n  useSignInWithGitHubAccountMutation,\n  useSignUpWithGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { browserHistory } from \"../utilities/history\";\nimport { UUIDNil } from \"../utilities/utils\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"100%\",\n      color: theme.palette.text.primary,\n      backgroundColor: theme.palette.background.default,\n    },\n    wrapper: {\n      position: \"relative\",\n      width: \"960px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n      transform: \"translateY(-60%)\",\n      top: \"50%\",\n      padding: \"16px\",\n      boxSizing: \"border-box\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n    card: {\n      position: \"relative\",\n      width: \"300px\",\n      maxWidth: \"100%\",\n      padding: \"16px\",\n      margin: \"32px auto\",\n    },\n  }),\n);\n\ninterface Props {\n  code: string;\n}\nexport function GitHubOAuthCallback(props: Props) {\n  const classes = useStyles(props);\n  const { t, i18n } = useTranslation();\n  const [accessToken, setAccessToken] = useState<string>(\"\");\n  const [title, setTitle] = useState<string>(t(\"github-oauth/wait\"));\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [\n    resLinkWithGitHubAccount,\n    executeLinkWithGitHubAccount,\n  ] = useLinkWithGitHubAccountMutation();\n  const [\n    resSignInWithGitHubAccount,\n    executeSignInWithGitHubAccount,\n  ] = useSignInWithGitHubAccountMutation();\n  const [\n    resSignUpWithGitHubAccount,\n    executeSignUpWithGitHubAccount,\n  ] = useSignUpWithGitHubAccountMutation();\n\n  useEffect(() => {\n    if (props.code) {\n      if (localStorage.getItem(\"token\")) {\n        // Link with GitHub account\n        executeLinkWithGitHubAccount({ code: props.code });\n      } else {\n        // Sign in with GitHub account\n        executeSignInWithGitHubAccount({ code: props.code });\n      }\n    }\n  }, [props.code]);\n\n  useEffect(() => {\n    if (resLinkWithGitHubAccount.fetching) {\n    } else if (resLinkWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/link-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/link-with-github-account-failure\"));\n    } else if (resLinkWithGitHubAccount.data) {\n      browserHistory.replace(\"/settings\");\n    }\n  }, [resLinkWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignInWithGitHubAccount.fetching) {\n    } else if (resSignInWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/sign-in-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/sign-in-with-github-account-failure\"));\n    } else if (\n      resSignInWithGitHubAccount.data &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount.token\n    ) {\n      if (\n        resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.id ===\n        UUIDNil\n      ) {\n        // Ask user to register for new account\n        setAccessToken(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        setUsername(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.username,\n        );\n        setEmail(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.email,\n        );\n      } else {\n        localStorage.setItem(\n          \"token\",\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }\n    }\n  }, [resSignInWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignUpWithGitHubAccount.error) {\n      setErrorMessage(\n        resSignUpWithGitHubAccount.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSignUpWithGitHubAccount.data) {\n      localStorage.setItem(\n        \"token\",\n        resSignUpWithGitHubAccount.data.signUpWithGitHubAccount.token,\n      );\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUpWithGitHubAccount]);\n\n  const signUpWithGitHubAccessToken = () => {\n    executeSignUpWithGitHubAccount({\n      email,\n      username,\n      accessToken,\n    });\n  };\n\n  const backBtn = (\n    <IconButton\n      onClick={() => {\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }}\n      color={\"inherit\"}\n    >\n      <ChevronLeft></ChevronLeft>\n    </IconButton>\n  );\n\n  return (\n    <Box className={clsx(classes.container)}>\n      <Box className={clsx(classes.wrapper)}>\n        {accessToken ? (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant=\"h4\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in\")}\n            </Typography>\n            <Typography variant=\"h5\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in-small\")}\n            </Typography>\n            <Card elevation={2} className={clsx(classes.card)}>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Username\")}\n                variant=\"outlined\"\n                value={username}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setUsername(event.target.value);\n                }}\n                fullWidth={true}\n              ></TextField>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Email\")}\n                variant=\"outlined\"\n                value={email}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setEmail(event.target.value);\n                }}\n                onClick={(event) => {\n                  event.currentTarget.focus();\n                }}\n                fullWidth={true}\n              ></TextField>\n              {errorMessage.length ? (\n                <Typography className={clsx(classes.errorMessage)}>\n                  {errorMessage}\n                </Typography>\n              ) : null}\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => signUpWithGitHubAccessToken()}\n                fullWidth={true}\n                disabled={resSignUpWithGitHubAccount.fetching}\n              >\n                {t(\"general/Continue\")}\n              </Button>\n            </Card>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant={\"h2\"}>{title}</Typography>\n            <Typography>{props.code}</Typography>\n          </React.Fragment>\n        )}\n      </Box>\n    </Box>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { Button, Snackbar } from \"@material-ui/core\";\nimport React, { FC, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport * as serviceWorker from \"../serviceWorker\";\n\nconst ServiceWorkerWrapper: FC = () => {\n  const { t } = useTranslation();\n  const [showReload, setShowReload] = React.useState(false);\n  const [\n    waitingWorker,\n    setWaitingWorker,\n  ] = React.useState<ServiceWorker | null>(null);\n\n  const onSWUpdate = (registration: ServiceWorkerRegistration) => {\n    setShowReload(true);\n    setWaitingWorker(registration.waiting);\n  };\n\n  useEffect(() => {\n    serviceWorker.register({ onUpdate: onSWUpdate });\n  }, []);\n\n  const reloadPage = useCallback(() => {\n    waitingWorker?.postMessage({ type: \"SKIP_WAITING\" });\n    setShowReload(false);\n    window.location.reload(true);\n  }, [waitingWorker]);\n\n  return (\n    <Snackbar\n      open={showReload}\n      message={t(\"notifications/new-version-available\")}\n      onClick={reloadPage}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n      action={\n        <Button color=\"inherit\" size=\"small\" onClick={reloadPage}>\n          {t(\"general/update\")}\n        </Button>\n      }\n    />\n  );\n};\n\nexport default ServiceWorkerWrapper;\n","import { NoteConfig } from \"./note\";\n\nexport enum EventType {\n  ModifiedMarkdown = \"ModifiedMarkdown\",\n  CreatedNote = \"CreatedNote\",\n  DeletedNote = \"DeletedNote\",\n  ChangedNoteFilePath = \"ChangedNoteFilePath\",\n  PerformedGitOperation = \"PerformedGitOperation\",\n  DeletedNotebook = \"DeletedNotebook\",\n}\n\nexport interface ModifiedMarkdownEventData {\n  tabId: string;\n  notebookPath: string;\n  noteFilePath: string;\n  markdown: string;\n  noteConfig: NoteConfig;\n}\n\nexport interface CreatedNoteEventData {\n  notebookPath: string;\n}\n\nexport interface DeletedNoteEventData {\n  tabId: string;\n  notebookPath: string;\n  noteFilePath: string;\n}\n\nexport interface ChangedNoteFilePathEventData {\n  tabId: string;\n  notebookPath: string;\n  oldNoteFilePath: string;\n  newNoteFilePath: string;\n}\n\nexport interface PerformedGitOperationEventData {\n  notebookPath: string;\n}\n\nexport interface DeletedNotebookEventData {\n  notebookPath: string;\n}\n\nexport type EventData =\n  | ModifiedMarkdownEventData\n  | CreatedNoteEventData\n  | DeletedNoteEventData\n  | ChangedNoteFilePathEventData\n  | PerformedGitOperationEventData;\n\nexport type EventCallback = (data: any) => void;\n\nexport class Emitter {\n  private subscriptions: { [key: string]: EventCallback[] } = {};\n  constructor() {\n    this.subscriptions = {};\n  }\n\n  public on(eventName: EventType, cb: EventCallback) {\n    if (eventName in this.subscriptions) {\n      this.subscriptions[eventName].push(cb);\n    } else {\n      this.subscriptions[eventName] = [cb];\n    }\n  }\n\n  public off(eventName: EventType, cb: EventCallback) {\n    const eventCallbacks = this.subscriptions[eventName] || [];\n    const index = eventCallbacks.findIndex((x) => x === cb);\n    if (index >= 0) {\n      eventCallbacks.splice(index, 1);\n    }\n  }\n\n  public emit(eventName: EventType, data: EventData) {\n    const eventCallbacks = (this.subscriptions[eventName] || []).slice() || [];\n    eventCallbacks.forEach((callback, offset) => {\n      callback(data);\n    });\n  }\n}\n\nexport const globalEmitter = new Emitter();\n\n(window as any)[\"globalEmitter\"] = globalEmitter;\n","import useInterval from \"@use-it/interval\";\nimport FlexLayout, {\n  Actions,\n  DockLocation,\n  Model,\n  TabNode,\n  TabSetNode,\n} from \"flexlayout-react\";\nimport moment from \"moment\";\nimport * as path from \"path\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { createContainer } from \"unstated-next\";\nimport Crossnote, {\n  PullNotebookArgs,\n  PushNotebookArgs,\n} from \"../lib/crossnote\";\nimport { EventType, globalEmitter } from \"../lib/event\";\nimport { pfs } from \"../lib/fs\";\nimport { Note, NoteConfig } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport { CrossnoteTabNode, TabHeight } from \"../lib/tabNode\";\nimport { getTodayName } from \"../utilities/utils\";\n\nexport enum SelectedSectionType {\n  Notes = \"Notes\",\n  Today = \"Today\",\n  Todo = \"Todo\",\n  Tagged = \"Tagged\",\n  Untagged = \"Untagged\",\n  Directory = \"Directory\",\n  Tag = \"Tag\",\n  Conflicted = \"Conflicted\",\n  Encrypted = \"Encrypted\",\n  Wiki = \"Wiki\",\n  Attachments = \"Attachments\",\n}\n\nexport interface SelectedSection {\n  type: SelectedSectionType;\n  path?: string;\n}\n\nexport enum HomeSection {\n  Notebooks = \"Notebooks\",\n  Explore = \"Explore\",\n  Settings = \"Settings\",\n  Notifications = \"Notifications\",\n  Privacy = \"Privacy\",\n  Unknown = \"Unknown\",\n}\n\n/**\n * The note to open\n */\nexport interface PendingNote {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath: string;\n}\n\ninterface InitialState {\n  crossnote: Crossnote;\n}\n\nfunction useCrossnoteContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n  const crossnote = initialState.crossnote;\n  const [initialized, setInitialized] = useState<boolean>(false);\n  const [notebooks, setNotebooks] = useState<Notebook[]>([]);\n  const [isAddingNotebook, setIsAddingNotebook] = useState<boolean>(false);\n  const [isPushingNotebook, setIsPushingNotebook] = useState<boolean>(false);\n  const [isPullingNotebook, setIsPullingNotebook] = useState<boolean>(false);\n  const [isLoadingNotebook, setIsLoadingNotebook] = useState<boolean>(false);\n  const [isPerformingAutoFetch, setIsPerformingAutoFetch] = useState<boolean>(\n    false,\n  );\n  const [homeSection, setHomeSection] = useState<HomeSection>(\n    HomeSection.Unknown,\n  );\n  const [layoutModel, setLayoutModel] = useState<Model>(\n    FlexLayout.Model.fromJson({\n      global: {\n        splitterSize: 4,\n        tabSetEnableMaximize: false,\n        tabSetHeaderHeight: TabHeight,\n        tabSetTabStripHeight: TabHeight,\n      },\n      borders: [],\n      layout: {\n        type: \"row\",\n        weight: 100,\n        children: [\n          {\n            type: \"tabset\",\n            weight: 50,\n            selected: 0,\n            children: [],\n          },\n        ],\n      },\n    }),\n  );\n\n  const getNotebookAtPath = useCallback(\n    (notebookPath: string) => {\n      return notebooks.find((x) => x.dir === notebookPath);\n    },\n    [notebooks],\n  );\n\n  const addTabNode = useCallback(\n    (tabNode: CrossnoteTabNode) => {\n      if (!layoutModel) {\n        return;\n      }\n      let activeTabset: TabSetNode = layoutModel.getActiveTabset();\n      if (!activeTabset) {\n        const modelChildren = layoutModel.getRoot().getChildren();\n        let needsToCreateNewTabSet = true;\n        if (modelChildren.length) {\n          modelChildren.forEach((child) => {\n            if (child.getType() === \"tabset\") {\n              needsToCreateNewTabSet = false;\n              layoutModel.doAction(Actions.setActiveTabset(child.getId()));\n            }\n          });\n        }\n\n        if (needsToCreateNewTabSet) {\n          activeTabset = new FlexLayout.TabSetNode();\n          (layoutModel.getRoot() as any)._addChild(activeTabset);\n          layoutModel.doAction(Actions.setActiveTabset(activeTabset.getId()));\n        } else {\n          activeTabset = layoutModel.getActiveTabset();\n        }\n      }\n\n      if (tabNode.config.singleton) {\n        const node = layoutModel.getNodeById(tabNode.id);\n        if (node) {\n          return layoutModel.doAction(Actions.selectTab(node.getId()));\n        }\n      }\n      if (tabNode.component === \"Note\") {\n        const note = tabNode.config.note;\n        const tabs = activeTabset.getChildren();\n        for (let i = 0; i < tabs.length; i++) {\n          const eTabNode: any = tabs[i];\n          const eNote: Note = eTabNode._attributes.config.note;\n          if (\n            eNote &&\n            note &&\n            eNote.notebookPath === note.notebookPath &&\n            eNote.filePath === note.filePath\n          ) {\n            return layoutModel.doAction(Actions.selectTab(eTabNode.getId()));\n          }\n        }\n      }\n      if (!activeTabset) {\n        return;\n      }\n      layoutModel.doAction(\n        Actions.addNode(tabNode, activeTabset.getId(), DockLocation.CENTER, 0),\n      );\n    },\n    [layoutModel],\n  );\n\n  const closeTabNode = useCallback(\n    (id: string) => {\n      if (!layoutModel) {\n        return;\n      }\n      layoutModel.doAction(Actions.deleteTab(id));\n    },\n    [layoutModel],\n  );\n\n  const updateNoteMarkdown = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      filePath: string,\n      markdown: string,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      const note = await notebook.getNote(filePath);\n      if (!notebook) {\n        return;\n      }\n      if (note.markdown !== markdown) {\n        const newNote = await notebook.writeNote(\n          note.filePath,\n          markdown,\n          note.config,\n        );\n        globalEmitter.emit(EventType.ModifiedMarkdown, {\n          tabId: tabNode.getId(),\n          markdown: newNote.markdown,\n          notebookPath: note.notebookPath,\n          noteFilePath: note.filePath,\n          noteConfig: newNote.config,\n        });\n        /*\n          if (newNote !== note) {\n            console.log(\"new note created\");\n          }\n          */\n      }\n    },\n    [getNotebookAtPath],\n  );\n\n  const updateNoteConfig = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      filePath: string,\n      noteConfig: NoteConfig,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(filePath);\n      if (JSON.stringify(note.config) !== JSON.stringify(noteConfig)) {\n        const newNote = await notebook.writeNote(\n          note.filePath,\n          note.markdown,\n          noteConfig,\n        );\n        globalEmitter.emit(EventType.ModifiedMarkdown, {\n          tabId: tabNode.getId(),\n          markdown: newNote.markdown,\n          notebookPath: note.notebookPath,\n          noteFilePath: note.filePath,\n          noteConfig: newNote.config,\n        });\n      }\n    },\n    [getNotebookAtPath],\n  );\n\n  const deleteNote = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      await notebook.deleteNote(noteFilePath);\n      await notebook.refreshNotes({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      globalEmitter.emit(EventType.DeletedNote, {\n        tabId: tabNode.getId(),\n        notebookPath: notebookPath,\n        noteFilePath: noteFilePath,\n      });\n    },\n    [getNotebookAtPath],\n  );\n\n  const changeNoteFilePath = useCallback(\n    async (tabNode: TabNode, note: Note, newFilePath: string) => {\n      const notebook = notebooks.find((x) => x.dir === note.notebookPath);\n      if (notebook) {\n        const oldNoteFilePath = note.filePath;\n        const newNote = await notebook.changeNoteFilePath(\n          oldNoteFilePath,\n          newFilePath,\n        );\n        globalEmitter.emit(EventType.ChangedNoteFilePath, {\n          tabId: tabNode.getId(),\n          notebookPath: note.notebookPath,\n          oldNoteFilePath: oldNoteFilePath,\n          newNoteFilePath: newFilePath,\n        });\n        return newNote;\n      } else {\n        throw new Error(\"Notebook \" + note.notebookPath + \" not found\");\n      }\n    },\n    [notebooks],\n  );\n\n  const createNewNote = useCallback(\n    async (\n      notebook: Notebook,\n      fileName: string = \"\",\n      markdown: string = \"\",\n    ) => {\n      if (!notebook) {\n        return null;\n      }\n\n      let autoGeneratedFileName = !fileName;\n      if (!fileName) {\n        let today = moment().format(\"YYYY-MM-DD\"); // TODO: Allow user to customize this\n        let untitled = t(\"general/Untitled\");\n\n        let foundToday = false;\n        let count = 0;\n        for (let key in notebook.notes) {\n          const note = notebook.notes[key];\n          if (note.title === today) {\n            foundToday = true;\n          }\n          if (note.title.startsWith(untitled)) {\n            count++;\n          }\n        }\n        if (foundToday) {\n          if (count === 0) {\n            fileName = `${untitled}.md`;\n          } else {\n            fileName = `${untitled} ${count}.md`;\n          }\n        } else {\n          fileName = `${today}.md`;\n        }\n      }\n      if (!fileName.endsWith(\".md\")) {\n        fileName = fileName + \".md\";\n      }\n      let filePath = path.relative(\n        notebook.dir,\n        path.resolve(notebook.dir, fileName),\n      );\n\n      const noteConfig: NoteConfig = {\n        modifiedAt: new Date(),\n        createdAt: new Date(),\n      };\n      let note = await notebook.writeNote(filePath, markdown, noteConfig);\n      if (!autoGeneratedFileName) {\n        await notebook.refreshNotes({\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n      }\n      note = await notebook.getNote(filePath);\n      globalEmitter.emit(EventType.CreatedNote, {\n        notebookPath: notebook.dir,\n      });\n      return note;\n    },\n    [t],\n  );\n\n  const openNoteAtPath = useCallback(\n    async (notebook: Notebook, filePath: string) => {\n      if (!filePath.endsWith(\".md\")) {\n        filePath += \".md\";\n      }\n      let note: Note;\n      if (filePath in notebook.notes) {\n        note = notebook.notes[filePath];\n      } else {\n        note = await createNewNote(notebook, filePath, \"\");\n      }\n      addTabNode({\n        type: \"tab\",\n        component: \"Note\",\n        name: `📝 ` + note.title,\n        config: {\n          singleton: false,\n          note,\n          notebook,\n        },\n      });\n    },\n    [createNewNote, addTabNode],\n  );\n\n  const openTodayNote = useCallback(\n    (notebook: Notebook) => {\n      const today = getTodayName();\n      return openNoteAtPath(notebook, `${today}.md`);\n    },\n    [openNoteAtPath],\n  );\n\n  const duplicateNote = useCallback(\n    async (note: Note) => {\n      /*\n      if (!crossnote) return;\n      const duplicatedNote = await crossnote.duplicateNote(\n        note.notebook,\n        note.filePath,\n      );\n      setNotebookNotes((notes) => [duplicatedNote, ...notes]);\n      setSelectedNote(duplicatedNote);\n      */\n    },\n    [crossnote],\n  );\n\n  const addNotebook = useCallback(\n    async (\n      name: string,\n      gitURL: string,\n      gitBranch: string,\n      gitUsername: string,\n      gitPassword: string,\n      gitRememberCredentials: boolean,\n      gitCorsProxy: string,\n    ) => {\n      setIsAddingNotebook(true);\n      try {\n        if (\n          gitURL.length &&\n          notebooks.find(\n            (nb) => nb.gitBranch === gitBranch && nb.gitURL === gitURL,\n          )\n        ) {\n          setIsAddingNotebook(false);\n          throw new Error(t(\"error/notebook-already-exists\"));\n        }\n        const notebook = await crossnote.addNotebook({\n          name,\n          gitURL,\n          branch: gitBranch,\n          username: gitUsername,\n          password: gitPassword,\n          corsProxy: gitCorsProxy,\n          rememberCredentials: gitRememberCredentials,\n        });\n        setNotebooks((notebooks) => [notebook, ...notebooks]);\n        setIsAddingNotebook(false);\n      } catch (error) {\n        setIsAddingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote, notebooks, t],\n  );\n\n  const openLocalNotebook = useCallback(async () => {\n    const directoryHandle = await window.showDirectoryPicker();\n    (window as any)[\"directoryHandle\"] = directoryHandle;\n    const notebook = await crossnote.addNotebook({\n      name: directoryHandle.name,\n      gitURL: \"\",\n      directoryHandle,\n    });\n    setNotebooks((notebooks) => [notebook, ...notebooks]);\n  }, [crossnote]);\n\n  const updateNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.updateNotebook(notebook);\n        setNotebooks((notebooks) => [...notebooks]);\n      } catch (error) {}\n    },\n    [crossnote],\n  );\n\n  const deleteNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        globalEmitter.emit(EventType.DeletedNotebook, {\n          notebookPath: notebook.dir,\n        });\n        await crossnote.deleteNotebook(notebook._id);\n      } catch (error) {}\n      let selectedNotebook: Notebook = null;\n      setNotebooks((notebooks) =>\n        notebooks.filter((n) => {\n          if (!selectedNotebook && n._id !== notebook._id) {\n            selectedNotebook = n;\n          }\n          return n._id !== notebook._id;\n        }),\n      );\n    },\n    [crossnote],\n  );\n\n  const refreshNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      setIsLoadingNotebook(true);\n      await notebook.refreshNotes({ dir: \"./\", includeSubdirectories: true });\n      globalEmitter.emit(EventType.PerformedGitOperation, {\n        notebookPath: notebook.dir,\n      });\n      setIsLoadingNotebook(false);\n    },\n    [crossnote],\n  );\n\n  const hardResetNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.hardResetNotebook(notebook, notebook.localSha);\n        await refreshNotebook(notebook);\n      } catch (error) {}\n    },\n    [crossnote, refreshNotebook],\n  );\n\n  const pushNotebook = useCallback(\n    async (args: PushNotebookArgs) => {\n      if (!crossnote) {\n        return;\n      }\n      setIsPushingNotebook(true);\n      try {\n        await crossnote.pushNotebook(args);\n        await args.notebook.refreshNotes({\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        globalEmitter.emit(EventType.PerformedGitOperation, {\n          notebookPath: args.notebook.dir,\n        });\n        setIsPushingNotebook(false);\n      } catch (error) {\n        setIsPushingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote],\n  );\n\n  const pullNotebook = useCallback(\n    async (args: PullNotebookArgs) => {\n      if (!crossnote) {\n        return;\n      }\n      setIsPullingNotebook(true);\n      try {\n        // NOTE: Code here might have bug\n        await crossnote.pullNotebook(args);\n        await args.notebook.refreshNotes({\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        globalEmitter.emit(EventType.PerformedGitOperation, {\n          notebookPath: args.notebook.dir,\n        });\n        setIsPullingNotebook(false);\n      } catch (error) {\n        setIsPullingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote],\n  );\n\n  const checkoutNote = useCallback(\n    async (note: Note) => {\n      const notebook = getNotebookAtPath(note.notebookPath);\n      if (!notebook || notebook.isLocal) {\n        return;\n      }\n      const newNote = await notebook.checkoutNote(note);\n      await notebook.refreshNotes({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      globalEmitter.emit(EventType.PerformedGitOperation, {\n        notebookPath: note.notebookPath,\n      });\n      return newNote;\n    },\n    [getNotebookAtPath],\n  );\n\n  const getNote = useCallback(\n    async (notebookPath: string, filePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      return await notebook.getNote(filePath);\n    },\n    [getNotebookAtPath],\n  );\n\n  const togglePin = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const newConfig = Object.assign({}, note.config, {\n        pinned: !note.config.pinned,\n      });\n      if (!newConfig.pinned) {\n        delete newConfig.pinned;\n      }\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const toggleFavorite = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const newConfig = Object.assign({}, note.config, {\n        favorited: !note.config.favorited,\n      });\n      if (!newConfig.favorited) {\n        delete newConfig.favorited;\n      }\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const getStatus = useCallback(\n    async (notebookPath: string, filePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook || !crossnote || notebook.isLocal) {\n        return \"\";\n      } else {\n        return await crossnote.getStatus(notebookPath, filePath);\n      }\n    },\n    [crossnote, getNotebookAtPath],\n  );\n\n  useEffect(() => {\n    if (!crossnote || initialized) {\n      return;\n    }\n\n    (async () => {\n      const notebooks = await crossnote.listNotebooks();\n      let notebook: Notebook = null;\n      if (notebooks.length) {\n        setNotebooks(notebooks);\n        const selectedNotebookID = localStorage.getItem(\"selectedNotebookID\");\n        notebook = notebooks.find((n) => n._id === selectedNotebookID);\n        if (!notebook) {\n          notebook = notebooks[0];\n        }\n        setInitialized(true);\n      } else {\n        /*\n        notebook = await crossnote.cloneNotebook({\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"https://github.com/0xGG/crossnote-doc.git\"\n        });\n        */\n        notebook = await crossnote.addNotebook({\n          name: \"Drafts\",\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"\",\n        });\n        await pfs.writeFile(\n          path.resolve(notebook.dir, \"README.md\"),\n          `# Welcome to Crossnote 😊\n\nIf you want to know more about this project,  \nplease download and read the [Welcome notebook](https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md).\n\nPlease also check the [Explore](https://crossnote.app/explore) section to discover the public notebooks shared by other users ;)\n`,\n        );\n        setNotebooks([notebook]);\n        setInitialized(true);\n        // TODO: create empty note and add `We suggest you to add [Welcome to crossnote]() notebook ;)`\n      }\n    })();\n  }, [crossnote, initialized]);\n\n  useEffect(() => {\n    if (!crossnote) {\n      return;\n    }\n    (async () => {\n      setIsLoadingNotebook(true);\n      /*\n      await selectedNotebook.refreshNotes({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      console.log(\"end loading notes: \", selectedNotebook);\n      */\n      setIsLoadingNotebook(false);\n    })();\n  }, [crossnote]);\n\n  /*\n  useEffect(() => {\n    if (crossnote && selectedNotebook) {\n      setSelectedSection({ type: SelectedSectionType.Notes });\n    }\n  }, [crossnote, selectedNotebook]);\n\n  useEffect(() => {\n    if (crossnote && selectedNotebook && notebookNotes) {\n      if (\n        notebookNotes.length &&\n        notebookNotes[0].notebook._id !== selectedNotebook._id\n      ) {\n        return;\n      }\n\n      let notes: Note[] = [];\n      if (selectedSection.type === SelectedSectionType.Notes) {\n        notes = [...notebookNotes];\n      } else if (selectedSection.type === SelectedSectionType.Todo) {\n        notes = notebookNotes.filter((note) =>\n          note.markdown.match(/(\\*|-|\\d+\\.)\\s\\[(\\s+|x|X)\\]\\s/gm),\n        );\n      } else if (selectedSection.type === SelectedSectionType.Today) {\n        notes = notebookNotes.filter(\n          (note) => Date.now() - note.config.modifiedAt.getTime() <= OneDay,\n        );\n      } else if (selectedSection.type === SelectedSectionType.Tagged) {\n        notes = notebookNotes.filter((note) => note.config.tags.length > 0);\n      } else if (selectedSection.type === SelectedSectionType.Untagged) {\n        notes = notebookNotes.filter((note) => note.config.tags.length === 0);\n      } else if (selectedSection.type === SelectedSectionType.Tag) {\n        notes = notebookNotes.filter((note) => {\n          const tags = note.config.tags;\n          return tags.find(\n            (tag) =>\n              (tag.toLocaleLowerCase() + \"/\").indexOf(\n                selectedSection.path + \"/\",\n              ) === 0,\n          );\n        });\n      } else if (selectedSection.type === SelectedSectionType.Conflicted) {\n        notes = notebookNotes.filter((note) => {\n          return crossnote.markdownHasConflicts(note.markdown);\n        });\n      } else if (selectedSection.type === SelectedSectionType.Encrypted) {\n        notes = notebookNotes.filter((note) => {\n          return note.config.encryption;\n        });\n      } else if (selectedSection.type === SelectedSectionType.Wiki) {\n        // Do nothing here\n      } else {\n        // SelectedSectionType.Directory\n        if (includeSubdirectories) {\n          notes = notebookNotes.filter(\n            (note) => note.filePath.indexOf(selectedSection.path + \"/\") === 0,\n          );\n        } else {\n          notes = notebookNotes.filter(\n            (note) => path.dirname(note.filePath) === selectedSection.path,\n          );\n        }\n      }\n\n      if (orderBy === OrderBy.ModifiedAt) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort(\n            (a, b) =>\n              b.config.modifiedAt.getTime() - a.config.modifiedAt.getTime(),\n          );\n        } else {\n          notes.sort(\n            (a, b) =>\n              a.config.modifiedAt.getTime() - b.config.modifiedAt.getTime(),\n          );\n        }\n      } else if (orderBy === OrderBy.CreatedAt) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort(\n            (a, b) =>\n              b.config.createdAt.getTime() - a.config.createdAt.getTime(),\n          );\n        } else {\n          notes.sort(\n            (a, b) =>\n              a.config.createdAt.getTime() - b.config.createdAt.getTime(),\n          );\n        }\n      } else if (orderBy === OrderBy.Title) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort((a, b) => b.title.localeCompare(a.title));\n        } else {\n          notes.sort((a, b) => a.title.localeCompare(b.title));\n        }\n      }\n\n      setNotes(notes);\n    }\n  }, [\n    selectedSection,\n    crossnote,\n    selectedNotebook,\n    includeSubdirectories,\n    notebookNotes,\n    orderBy,\n    orderDirection,\n  ]);\n\n  useEffect(() => {\n    if (\n      notes.length &&\n      !selectedNote &&\n      !pendingNote &&\n      homeSection === HomeSection.Notebooks\n    ) {\n      _setSelectedNote(notes[0]);\n    }\n  }, [notes, selectedNote, pendingNote, _setSelectedNote, homeSection]);\n\n  useEffect(() => {\n    if (selectedNote) {\n      if (selectedNote.markdown.length) {\n        setEditorMode(EditorMode.Preview);\n      } else {\n        setEditorMode(EditorMode.VickyMD);\n      }\n    } else {\n      setEditorMode(EditorMode.Preview);\n    }\n  }, [selectedNote]);\n\n  // Find and select the pending note\n  useEffect(() => {\n    if (!pendingNote || !initialized || isLoadingNotebook) {\n      return;\n    }\n    if (selectedNote && selectedNote.filePath === pendingNote.filePath) {\n      setPendingNote(null);\n      return;\n    }\n\n    // TODO: Also check if the notebook matches\n    const note = notebookNotes.find((n) => n.filePath === pendingNote.filePath);\n    if (note) {\n      setSelectedNote(note);\n    }\n    setPendingNote(null); // note doesn't exist\n  }, [\n    initialized,\n    isLoadingNotebook,\n    pendingNote,\n    selectedNote,\n    notebookNotes,\n  ]);\n  */\n\n  // TODO: This script should be moved to background (serviceWorker?)\n  useInterval(async () => {\n    if (isPerformingAutoFetch) {\n      return;\n    }\n    setIsPerformingAutoFetch(true);\n    for (let i = 0; i < notebooks.length; i++) {\n      const notebook = notebooks[i];\n      if (\n        notebook.autoFetchPeriod >= 1000 &&\n        Date.now() - notebook.fetchedAt.getTime() >= notebook.autoFetchPeriod &&\n        notebook.gitURL.length > 0 &&\n        notebook.localSha === notebook.remoteSha\n      ) {\n        // TODO:  Run tasks in parallel instead of running one by one\n        try {\n          const changed = await crossnote.fetchNotebook({ notebook });\n          if (changed) {\n            globalEmitter.emit(EventType.PerformedGitOperation, {\n              notebookPath: notebook.dir,\n            });\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n    setIsPerformingAutoFetch(false);\n  }, 60000); // Check every 1 minute\n\n  return {\n    crossnote,\n    initialized,\n    notebooks,\n    updateNoteMarkdown,\n    updateNoteConfig,\n    createNewNote,\n    deleteNote,\n    changeNoteFilePath,\n    duplicateNote,\n    addNotebook,\n    openLocalNotebook,\n    togglePin,\n    toggleFavorite,\n    isAddingNotebook,\n    isPushingNotebook,\n    isPullingNotebook,\n    updateNotebook,\n    deleteNotebook,\n    hardResetNotebook,\n    refreshNotebook,\n    pushNotebook,\n    pullNotebook,\n    checkoutNote,\n    getNote,\n    isLoadingNotebook,\n    openNoteAtPath,\n    openTodayNote,\n    homeSection,\n    setHomeSection,\n    layoutModel,\n    setLayoutModel,\n    addTabNode,\n    closeTabNode,\n    getNotebookAtPath,\n    getStatus,\n  };\n}\n\nexport const CrossnoteContainer = createContainer(useCrossnoteContainer);\n","export enum KeyMap {\n  \"DEFAULT\" = \"hypermd\",\n  \"VIM\" = \"vim\",\n  \"EMACS\" = \"emacs\",\n}\n\nexport function getKeyMap(v: string): KeyMap {\n  if (v === \"hypermd\") {\n    return KeyMap.DEFAULT;\n  } else if (v === \"vim\") {\n    return KeyMap.VIM;\n  } else if (v === \"emacs\") {\n    return KeyMap.EMACS;\n  } else {\n    return KeyMap.DEFAULT;\n  }\n}\n","import { Note } from \"./note\";\nimport { Notebook } from \"./notebook\";\n\nexport type TabNodeComponent =\n  | \"Settings\"\n  | \"Note\"\n  | \"Notes\"\n  | \"Today\"\n  | \"Todo\"\n  | \"Conflicted\"\n  | \"Privacy\"\n  | \"Graph\";\n\nexport interface TabNodeConfig {\n  singleton: boolean;\n  note?: Note;\n  notebook?: Notebook;\n}\n\nexport interface CrossnoteTabNode {\n  type: \"tab\";\n  name: string;\n  component: TabNodeComponent;\n  config: TabNodeConfig;\n  id?: string;\n}\n\nexport const TabHeight = 24;\n","import { CloudContainer } from \"./cloud\";\nimport { CrossnoteContainer } from \"./crossnote\";\nimport { SettingsContainer } from \"./settings\";\n\ninterface GlobalContainers {\n  cloudContainer: ReturnType<typeof CloudContainer.useContainer>;\n  settingsContainer: ReturnType<typeof SettingsContainer.useContainer>;\n  crossnoteContainer: ReturnType<typeof CrossnoteContainer.useContainer>;\n}\n\nexport const globalContainers: GlobalContainers = {\n  cloudContainer: null,\n  settingsContainer: null,\n  crossnoteContainer: null,\n};\n","// 0xGG Team\n// Distributed under AGPL3\n//\n// DESCRIPTION: This widget displays time related information\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { WidgetArgs, WidgetCreator } from \"vickymd/widget\";\nimport { ErrorWidget } from \"vickymd/widget/error/error\";\nimport { useTheme, ThemeProvider } from \"@material-ui/core\";\nimport { themeManager } from \"../../../themes/manager\";\nimport { globalContainers } from \"../../../containers/global\";\n\nfunction Timer(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const theme = useTheme();\n\n  return (\n    <div\n      style={{\n        cursor: \"default\",\n        padding: \"4px 12px\",\n        backgroundColor:\n          attributes[\"backgroundColor\"] ||\n          theme.palette.secondary.main ||\n          \"rgb(250, 145, 1)\",\n        color:\n          attributes[\"color\"] || theme.palette.secondary.contrastText || \"#fff\",\n        borderRadius: \"16px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        width: \"375px\",\n        maxWidth: \"100%\",\n        boxShadow: \"0 1px 3px 1px #aaa\",\n        marginBottom: props.isPreview ? \"16px\" : \"0\",\n      }}\n    >\n      <div className={\"widget-timer-date\"}>\n        {\"⌚ \" + new Date(attributes[\"date\"]).toLocaleString()}\n      </div>\n      <div className={\"widget-timer-duration\"}>\n        {attributes[\"duration\"] ? \"🎬 \" + attributes[\"duration\"] : \"\"}\n      </div>\n    </div>\n  );\n}\n\nexport const TimerWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  if (!args.attributes[\"date\"]) {\n    return ErrorWidget({\n      ...args,\n      ...{\n        attributes: {\n          message: \"Field 'date' is missing\",\n        },\n      },\n    });\n  }\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <Timer attributes={args.attributes} isPreview={args.isPreview}></Timer>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","/**\n * Upload image to sm.ms\n * @param filePath\n */\nexport async function smmsUploadImages(files: File[] = []): Promise<string[]> {\n  const promises = [];\n  for (let i = 0; i < files.length; i++) {\n    const file = files[i];\n    if (!file.type.match(\"image.*\")) {\n      continue;\n    }\n    promises.push(\n      new Promise<string>((resolve, reject) => {\n        const headers = {\n          // \"Content-Type\": \"multipart/form-data\" // <= Adding this will cause problem.\n        };\n        const data = new FormData();\n        data.append(\"smfile\", file);\n        data.append(\"format\", \"json\");\n        fetch(\"https://sm.ms/api/v2/upload\", {\n          method: \"POST\",\n          mode: \"cors\",\n          headers,\n          referrer: \"\",\n          body: data,\n        })\n          .then((response) => response.json())\n          .then((json) => {\n            if (json[\"success\"]) {\n              return resolve(json[\"data\"][\"url\"]);\n            } else if (\n              json[\"code\"] === \"image_repeated\" ||\n              (json[\"code\"] === \"exception\" &&\n                json[\"message\"].match(/this image exists at:/))\n            ) {\n              return resolve(json[\"message\"].match(/https:\\/\\/.+$/)[0]);\n            } else {\n              return reject(json[\"message\"]);\n            }\n          })\n          .catch((error) => {\n            return reject(\"Failed to connect to sm.ms host\");\n          });\n      }),\n    );\n  }\n  return await Promise.all(promises);\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { smmsUploadImages } from \"../../../utilities/image_uploader\";\nimport Noty from \"noty\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction ImageWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [imageUploaderElement, setImageUploaderElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [uploadingImages, setUploadingImages] = useState<boolean>(false);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageUploaderElement || uploadingImages) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: t(\"utils/uploading-image\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setUploadingImages(true);\n      smmsUploadImages(files)\n        .then((urls) => {\n          let markdown = ``;\n          urls.forEach((url) => {\n            markdown = markdown + `![](${url})  \\n`;\n          });\n          props.replaceSelf(markdown);\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          setUploadingImages(false);\n          new Noty({\n            type: \"error\",\n            text: t(\"utils/upload-image-failure\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n        });\n    };\n    imageUploaderElement.click();\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.image/image-helper\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      {!uploadingImages && (\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {\"URL\"}\n          </Typography>\n          <Input\n            margin={\"dense\"}\n            placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n            value={url}\n            onChange={(event) => {\n              setURL(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                props.replaceSelf(`![](${url})\\n`);\n              }\n            }}\n            fullWidth={true}\n          ></Input>\n        </Box>\n      )}\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Upload\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            uploadingImages ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {uploadingImages\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"caption\"}>\n          {t(\"widget/crossnote.image/thanks_sm_ms\")}\n        </Typography>\n      </Box>\n      <input\n        type=\"file\"\n        multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageUploaderElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const ImageWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <ImageWidget {...args}></ImageWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  fade,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction AudioWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <audio\n          autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n          controls={attributes[\"controls\"]}\n          loop={attributes[\"loop\"]}\n          muted={attributes[\"muted\"]}\n          style={attributes[\"style\"]}\n        >\n          {t(\"widget/crossnote.audio/audio_element_fail\")}\n          <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n        </audio>\n        {!props.isPreview && !attributes[\"controls\"] && \"🎵\"}\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Audio\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.audio/source-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const AudioWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <AudioWidget {...args}></AudioWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n  }),\n);\n\nfunction VideoWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n  const [poster, setPoster] = useState<string>(attributes[\"poster\"] || \"\");\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <video\n            className={clsx(classes.video)}\n            autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n            controls={attributes[\"controls\"]}\n            loop={attributes[\"loop\"]}\n            muted={attributes[\"muted\"]}\n            style={attributes[\"style\"]}\n            poster={attributes[\"poster\"]}\n          >\n            {t(\"widget/crossnote.video/video_element_fail\")}\n            <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n          </video>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Video\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/video-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                  poster,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.video/poster-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/poster-url-placeholder\")}\n          value={poster}\n          onChange={(event) => {\n            setPoster(event.target.value);\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const VideoWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <VideoWidget {...args}></VideoWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction BilibiliWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"aid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?aid=${attributes[\"aid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n  if (attributes[\"bvid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?bvid=BV${attributes[\"bvid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.bilibili/Bilibili\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.bilibili/bilibili-video-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.bilibili/url-placeholder\")}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\/av(\\d+)/)) {\n                const aid = url.match(/\\/av(\\d+)/)[1];\n                const attrs = {\n                  aid,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/BV(.+?)($|\\/|\\?)/)) {\n                const bvid = url.match(/\\/BV(.+?)($|\\/|\\?)/)[1];\n                const attrs = {\n                  bvid,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.bilibili/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const BilibiliWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <BilibiliWidget {...args}></BilibiliWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction YoutubeWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"videoID\"]) {\n    if (!props.isPreview) {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <img\n            alt={\"Youtube: \" + attributes[\"videoID\"]}\n            src={`https://img.youtube.com/vi/${attributes[\"videoID\"]}/0.jpg`}\n            onClick={() => {\n              window.open(\n                `https://www.youtube.com/watch?v=${attributes[\"videoID\"]}`,\n                \"_blank\",\n              );\n            }}\n            style={{\n              cursor: \"pointer\",\n              width: \"100%\",\n            }}\n          ></img>\n        </span>\n      );\n    } else {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <Box className={clsx(classes.videoWrapper)}>\n            <iframe\n              title={\"youtube_\" + attributes[\"videoID\"]}\n              className={clsx(classes.video)}\n              src={`https://www.youtube.com/embed/${attributes[\"videoID\"]}`}\n              scrolling={\"no\"}\n              frameBorder={\"no\"}\n              allowFullScreen={true}\n            ></iframe>\n          </Box>\n        </span>\n      );\n    }\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"Youtube\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"Youtube video URL\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\n            \"widget/crossnote.youtube/youtube-video-url-placeholder\",\n          )}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\?v=(.+?)(&|$)/)) {\n                const videoID = url.match(/\\?v=(.+?)(&|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)) {\n                const videoID = url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.youtube/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const YoutubeWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <YoutubeWidget {...args}></YoutubeWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n  ListItem,\n  ListItemText,\n  List,\n  ListItemSecondaryAction,\n  FormGroup,\n  Checkbox,\n  ButtonGroup,\n  Button,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { createWorker } from \"tesseract.js\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    canvasWrapper: {\n      marginTop: theme.spacing(2),\n      // height: 0,\n      // paddingTop: \"56.25%\" // 16:9\n    },\n    canvas: {\n      maxWidth: \"100%\",\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\ninterface OCRProgress {\n  status: string;\n  progress: number;\n  workerId?: string;\n}\n\nfunction getInitialLanguages() {\n  try {\n    return JSON.parse(\n      localStorage.getItem(\"widget/crossnote.ocr/languages\") || '[\"eng\"]',\n    );\n  } catch (error) {\n    return [\"eng\"];\n  }\n}\n\nfunction OCRWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [canvas, setCanvas] = useState<HTMLCanvasElement>(null);\n  // https://github.com/tesseract-ocr/tesseract/wiki/Data-Files#data-files-for-version-400-november-29-2016\n  const [link, setLink] = useState<string>(\"\");\n  const [imageDataURL, setImageDataURL] = useState<string>(\"\");\n  const [ocrDataURL, setOCRDataURL] = useState<string>(\"\");\n  const [imageDropAreaElement, setImageDropAreaElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n  const [ocrProgresses, setOCRProgresses] = useState<OCRProgress[]>([]);\n  const [selectedLanguages, setSelectedLanguages] = useState<string[]>(\n    getInitialLanguages(),\n  );\n  const [grayscaleChecked, setGrayscaleChecked] = useState<boolean>(\n    !!localStorage.getItem(\"widget/crossnote.ocr/grayscale\") || true,\n  );\n\n  useEffect(() => {\n    if (canvas && imageDataURL) {\n      const imageObject = new Image();\n      const context = canvas.getContext(\"2d\");\n      imageObject.onload = function () {\n        canvas.width = imageObject.width;\n        canvas.height = imageObject.height;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        if (grayscaleChecked) {\n          context.fillStyle = \"#FFF\";\n          context.fillRect(0, 0, canvas.width, canvas.height);\n          context.globalCompositeOperation = \"luminosity\";\n        }\n        context.drawImage(imageObject, 0, 0);\n        setOCRDataURL(canvas.toDataURL());\n      };\n      imageObject.onerror = (error) => {\n        throw error;\n      };\n      imageObject.setAttribute(\"crossOrigin\", \"anonymous\");\n      imageObject.src = imageDataURL;\n    }\n  }, [canvas, imageDataURL, grayscaleChecked]);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageDropAreaElement || isProcessing) return;\n    imageDropAreaElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      if (files.length) {\n        try {\n          const file = files[0] as File;\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => {\n            setImageDataURL(reader.result as string);\n          };\n          reader.onerror = (error) => {\n            throw error;\n          };\n        } catch (error) {}\n      }\n    };\n    imageDropAreaElement.click();\n  }\n\n  function startOCRFromLink() {\n    try {\n      setImageDataURL(link);\n    } catch (error) {}\n  }\n\n  function ocr(input: File | string | HTMLCanvasElement) {\n    const worker = createWorker({\n      logger: (m: OCRProgress) => {\n        setOCRProgresses((ocrProgresses) => {\n          if (\n            ocrProgresses.length &&\n            ocrProgresses[ocrProgresses.length - 1].status === m.status\n          ) {\n            return [...ocrProgresses.slice(0, ocrProgresses.length - 1), m];\n          } else {\n            return [...ocrProgresses, m];\n          }\n        });\n      },\n    });\n\n    (async () => {\n      setIsProcessing(true);\n      let languagesArr = selectedLanguages;\n      if (languagesArr.length === 0) {\n        languagesArr = [\"eng\"];\n      }\n\n      await worker.load();\n      await worker.loadLanguage(languagesArr.join(\"+\"));\n      await worker.initialize(languagesArr.join(\"+\"));\n      const {\n        data: { text },\n      } = await worker.recognize(input);\n      props.replaceSelf(\"\\n\" + text);\n      await worker.terminate();\n      setIsProcessing(false);\n    })();\n  }\n\n  function toggleLanguage(lang: string) {\n    setSelectedLanguages((selectedLanguages) => {\n      const offset = selectedLanguages.indexOf(lang);\n      if (offset >= 0) {\n        selectedLanguages.splice(offset, 1);\n        selectedLanguages = [...selectedLanguages];\n      } else {\n        selectedLanguages = [...selectedLanguages, lang];\n      }\n      localStorage.setItem(\n        \"widget/crossnote.ocr/languages\",\n        JSON.stringify(selectedLanguages),\n      );\n      return selectedLanguages;\n    });\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  if (isProcessing) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Typography variant={\"h5\"}>{t(\"general/Processing\")}</Typography>\n        {/*<Typography variant={\"body1\"}>{t(\"general/please-wait\")}</Typography>*/}\n        <List>\n          {ocrProgresses.length > 0 && (\n            <ListItem>\n              <ListItemText>\n                {t(\n                  \"tesseract/\" + ocrProgresses[ocrProgresses.length - 1].status,\n                )}\n              </ListItemText>\n              <ListItemSecondaryAction>\n                {Math.floor(\n                  ocrProgresses[ocrProgresses.length - 1].progress * 100,\n                ).toString() + \"%\"}\n              </ListItemSecondaryAction>\n            </ListItem>\n          )}\n        </List>\n      </Card>\n    );\n  }\n\n  if (imageDataURL) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/recognize-text-in-languages\")}\n          </Typography>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"eng\") >= 0}\n                  onChange={() => toggleLanguage(\"eng\")}\n                  value=\"eng\"\n                />\n              }\n              label=\"English\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_sim\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_sim\")}\n                  value=\"chi_sim\"\n                />\n              }\n              label=\"简体中文\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_tra\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_tra\")}\n                  value=\"chi_tra\"\n                />\n              }\n              label=\"繁體中文\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"jpn\") >= 0}\n                  onChange={() => toggleLanguage(\"jpn\")}\n                  value=\"jpn\"\n                />\n              }\n              label=\"日本語\"\n            />\n          </FormGroup>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/extra-settings\")}\n          </Typography>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={grayscaleChecked}\n                onChange={() => {\n                  if (grayscaleChecked) {\n                    localStorage.removeItem(\"widget/crossnote.ocr/grayscale\");\n                  } else {\n                    localStorage.setItem(\n                      \"widget/crossnote.ocr/grayscale\",\n                      \"true\",\n                    );\n                  }\n                  setGrayscaleChecked(!grayscaleChecked);\n                }}\n                color={\"primary\"}\n              ></Switch>\n            }\n            label={t(\"widget/crossnote.ocr/grayscale\")}\n          ></FormControlLabel>\n        </Box>\n        <Box className={clsx(classes.canvasWrapper)}>\n          <canvas\n            className={clsx(classes.canvas)}\n            ref={(element) => setCanvas(element)}\n          ></canvas>\n        </Box>\n        <ButtonGroup>\n          <Button\n            onClick={() => {\n              setImageDataURL(\"\");\n              setOCRDataURL(\"\");\n            }}\n          >\n            {t(\"general/go-back\")}\n          </Button>\n          <Button\n            color={\"primary\"}\n            onClick={() => ocr(ocrDataURL)}\n            disabled={!ocrDataURL}\n          >\n            {t(\"widget/crossnote.ocr/start-ocr\")}\n          </Button>\n        </ButtonGroup>\n      </Card>\n    );\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"widget/crossnote.ocr/ocr\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Link\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n          value={link}\n          onChange={(event) => {\n            setLink(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              startOCRFromLink();\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Typography\n        variant={\"subtitle1\"}\n        style={{ marginTop: \"16px\", textAlign: \"center\" }}\n      >\n        {t(\"widget/crossnote.auth/Or\")}\n      </Typography>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.ocr/local-image\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            isProcessing ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {isProcessing\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <input\n        type=\"file\"\n        // multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageDropAreaElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const OCRWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <OCRWidget {...args}></OCRWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  TextField,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Note } from \"../lib/note\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  editor: CodeMirrorEditor;\n  marker: TextMarker;\n  imageElement: HTMLImageElement;\n  note: Note;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    imageWrapper: {\n      textAlign: \"center\",\n    },\n    imagePreview: {\n      maxWidth: \"100%\",\n      maxHeight: \"400px\",\n    },\n  }),\n);\n\nexport default function EditImageDialog(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const editor = props.editor;\n  const marker = props.marker;\n  const imageElement = props.imageElement;\n  const [imageSrc, setImageSrc] = useState<string>(\"\");\n  const [imageAlt, setImageAlt] = useState<string>(\"\");\n  const [imageTitle, setImageTitle] = useState<string>(\"\");\n  const [finalImageSrc, setFinalImageSrc] = useState<string>(\"\");\n\n  const deleteImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    editor.replaceRange(\"\", pos.from, pos.to);\n    props.onClose();\n  }, [imageElement, editor, marker, props]);\n\n  const updateImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    if (!pos) return;\n    if (imageTitle.trim().length) {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()} ${JSON.stringify(\n          imageTitle,\n        )})`,\n        pos.from,\n        pos.to,\n      );\n    } else {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()})`,\n        pos.from,\n        pos.to,\n      );\n    }\n    props.onClose();\n  }, [imageElement, editor, marker, props, imageAlt, imageSrc, imageTitle]);\n\n  useEffect(() => {\n    if (imageElement && marker && editor) {\n      setFinalImageSrc(\"\");\n      setImageSrc(\n        imageElement.getAttribute(\"data-src\") || imageElement.src || \"\",\n      );\n      setImageTitle(imageElement.title || \"\");\n      setImageAlt(imageElement.alt || \"\");\n    }\n  }, [imageElement, marker, editor]);\n\n  useEffect(() => {\n    if (!props.note) {\n      return;\n    }\n    resolveNoteImageSrc(props.note, imageSrc)\n      .then((finalImageSrc) => {\n        setFinalImageSrc(finalImageSrc);\n      })\n      .catch((error) => {\n        setFinalImageSrc(\"\");\n      });\n  }, [imageSrc, props.note]);\n\n  if (!editor || !marker || !imageElement) {\n    return null;\n  }\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose} style={{ zIndex: 3001 }}>\n      <DialogTitle>{t(\"edit-image-dialog/title\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        <Box className={clsx(classes.imageWrapper)}>\n          <img\n            className={clsx(classes.imagePreview)}\n            src={finalImageSrc}\n            alt={imageAlt}\n            title={imageTitle}\n          ></img>{\" \"}\n        </Box>\n        <TextField\n          autoFocus={true}\n          value={imageSrc}\n          helperText={t(\"edit-image-dialog/image-url\")}\n          fullWidth={true}\n          onChange={(event) => setImageSrc(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageTitle}\n          helperText={t(\"edit-image-dialog/image-title\")}\n          fullWidth={true}\n          onChange={(event) => setImageTitle(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageAlt}\n          helperText={t(\"edit-image-dialog/image-alt-text\")}\n          fullWidth={true}\n          onChange={(event) => setImageAlt(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button variant={\"contained\"} color={\"primary\"} onClick={updateImage}>\n          {t(\"general/update\")}\n        </Button>\n        <Button variant={\"contained\"} color={\"secondary\"} onClick={deleteImage}>\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}> {t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import * as path from \"path\";\nimport { printPreview as VickyMDPrintPreview } from \"vickymd/preview\";\nimport { globalContainers } from \"../containers/global\";\nimport { Note } from \"../lib/note\";\nimport { browserHistory } from \"./history\";\nimport { resolveNoteImageSrc } from \"./image\";\n\nexport function printPreview(\n  previewElement: HTMLElement,\n  bannerElement?: HTMLElement,\n  timeout = 2000,\n) {\n  return VickyMDPrintPreview(\n    previewElement,\n    bannerElement,\n    [\"body\"],\n    `\n  .App,\n  .editor-bottom-panel,\n  .drawer,\n  .CodeMirror,\n  .editor-textarea,\n  .editor-toolbar,\n  .Pane.vertical.Pane1,\n  .notes-panel,\n  .control-panel-wrapper {\n    display: none;\n  }\n`,\n    timeout,\n  );\n}\n\nexport function openURL(url: string = \"\", note: Note) {\n  if (!note || !url) {\n    return;\n  }\n  if (url.match(/https?:\\/\\//)) {\n    if (url.startsWith(window.location.origin)) {\n      browserHistory.push(url.replace(window.location.origin, \"\"));\n    } else {\n      window.open(url, \"_blank\"); // TODO: opener bug, check zhihu\n    }\n  } else if (url.startsWith(\"/\")) {\n    let filePath = path.relative(\n      note.notebookPath,\n      path.resolve(note.notebookPath, url.replace(/^\\//, \"\")),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      globalContainers.crossnoteContainer.getNotebookAtPath(note.notebookPath),\n      decodeURIComponent(filePath),\n    );\n  } else {\n    let filePath = path.relative(\n      note.notebookPath,\n      path.resolve(\n        path.dirname(path.resolve(note.notebookPath, note.filePath)),\n        url,\n      ),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      globalContainers.crossnoteContainer.getNotebookAtPath(note.notebookPath),\n      decodeURIComponent(filePath),\n    );\n  }\n}\n\nexport function postprocessPreview(\n  previewElement: HTMLElement,\n  note: Note,\n  isPresentationCallback?: (isPresentation: boolean) => void,\n) {\n  if (!previewElement) {\n    return;\n  }\n  const handleLinksClickEvent = (preview: HTMLElement) => {\n    // Handle link click event\n    const links = preview.getElementsByTagName(\"A\");\n    for (let i = 0; i < links.length; i++) {\n      const link = links[i] as HTMLAnchorElement;\n      link.onclick = (event) => {\n        event.preventDefault();\n        if (link.hasAttribute(\"data-topic\")) {\n          const tag = link.getAttribute(\"data-topic\");\n          if (tag.length) {\n            globalContainers.crossnoteContainer.openNoteAtPath(\n              globalContainers.crossnoteContainer.getNotebookAtPath(\n                note.notebookPath,\n              ),\n              tag,\n            );\n          }\n        } else {\n          openURL(link.getAttribute(\"href\"), note);\n        }\n      };\n    }\n  };\n  const resolveImages = async (preview: HTMLElement) => {\n    const images = preview.getElementsByTagName(\"IMG\");\n    for (let i = 0; i < images.length; i++) {\n      const image = images[i] as HTMLImageElement;\n      const imageSrc = image.getAttribute(\"src\");\n      image.setAttribute(\n        \"src\",\n        await resolveNoteImageSrc(note, decodeURIComponent(imageSrc)),\n      );\n    }\n  };\n\n  if (\n    previewElement.childElementCount &&\n    previewElement.children[0].tagName.toUpperCase() === \"IFRAME\"\n  ) {\n    // presentation\n    previewElement.style.maxWidth = \"100%\";\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    resolveImages(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    if (isPresentationCallback) {\n      isPresentationCallback(true);\n    }\n  } else {\n    // normal\n    // previewElement.style.maxWidth = `${EditorPreviewMaxWidth}px`;\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(previewElement);\n    resolveImages(previewElement);\n    if (isPresentationCallback) {\n      isPresentationCallback(false);\n    }\n  }\n}\n","// @ts-ignore\nimport Board from \"@lourenci/react-kanban\";\nimport {\n  Box,\n  Button,\n  Card,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  IconButton,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport {\n  Cancel,\n  CardPlus,\n  Close,\n  ContentSave,\n  Pencil,\n  Plus,\n  TrashCan,\n} from \"mdi-material-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { WidgetArgs, WidgetCreator } from \"vickymd/widget\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { Note } from \"../../../lib/note\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport { openURL, postprocessPreview } from \"../../../utilities/preview\";\n\nconst VickyMD = require(\"vickymd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    columnHeader: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      color: \"#000\", // BUG: TODO: Wait for react-kanban styling support\n    },\n    kanbanCard: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      [theme.breakpoints.down(\"sm\")]: {\n        marginTop: \"4px\",\n        marginBottom: \"4px\",\n      },\n    },\n    editorWrapper: {\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      padding: theme.spacing(2),\n    },\n  }),\n);\n\ninterface KanbanCard {\n  id: number;\n  title: string;\n  description: string;\n}\n\ninterface kanbanColumn {\n  id: number;\n  title: string;\n  wip: boolean;\n  cards: KanbanCard[];\n}\n\ninterface KanbanBoard {\n  columns: kanbanColumn[];\n}\n\ninterface KanbanColumnHeaderProps {\n  column: kanbanColumn;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\n\nfunction KanbanColumnHeaderDisplay(props: KanbanColumnHeaderProps) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const column = props.column;\n  const board = props.board;\n  const isPreview = props.isPreview;\n  const refreshBoard = props.refreshBoard;\n  const [clickedTitle, setClickedTitle] = useState<boolean>(false);\n  const [titleValue, setTitleValue] = useState<string>(column.title);\n\n  useEffect(() => {\n    if (!clickedTitle && titleValue !== column.title) {\n      column.title = titleValue || t(\"general/Untitled\");\n      setTitleValue(column.title);\n      refreshBoard(board);\n    }\n  }, [clickedTitle, board, column.title, titleValue, t, refreshBoard]);\n\n  return (\n    <Box className={clsx(classes.columnHeader)}>\n      <Box>\n        {clickedTitle ? (\n          <TextField\n            value={titleValue}\n            onChange={(event) => {\n              setTitleValue(event.target.value);\n            }}\n            onBlur={() => {\n              setClickedTitle(false);\n            }}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                setClickedTitle(false);\n              }\n            }}\n          ></TextField>\n        ) : (\n          <Typography\n            variant={\"body1\"}\n            style={{ cursor: \"text\" }}\n            onClick={() => {\n              if (!isPreview) {\n                setClickedTitle(true);\n              }\n            }}\n          >\n            {titleValue}\n          </Typography>\n        )}\n      </Box>\n      {!isPreview && (\n        <Box>\n          <IconButton\n            onClick={() => {\n              const card: KanbanCard = {\n                id: Date.now(),\n                title: \"\", //\"Card \" + column.cards.length,\n                description: t(\"general/empty\"),\n              };\n              if (column) {\n                column.cards.push(card);\n              }\n              props.refreshBoard(board);\n            }}\n          >\n            <CardPlus></CardPlus>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns = board.columns.filter((l) => column.id !== l.id);\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface KanbanCardProps {\n  card: KanbanCard;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\nfunction KanbanCardDisplay(props: KanbanCardProps) {\n  const classes = useStyles(props);\n  const board = props.board;\n  const card = props.card;\n  const isPreview = props.isPreview;\n  const note: Note = null; // = globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [description, setDescription] = useState<string>(card.description);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    setDescription(card.description);\n  }, [card.description]);\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(card.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      if (isPreview) {\n        editor.setOption(\"readOnly\", \"nocursor\");\n      }\n      editor.on(\"changes\", () => {\n        setDescription(editor.getValue());\n      });\n      editor.focus();\n      /*\n      // Cause save not working\n      editor.on(\"blur\", () => {\n        setClickedPreview(false);\n        setEditor(null);\n      });\n      */\n      // editor.display.input.blur();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, card.description);\n      postprocessPreview(\n        previewElement,\n        null, // globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, card.description]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  return (\n    <Card className={clsx(classes.kanbanCard)}>\n      <div\n        className={clsx(\"preview\", classes.preview)}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      {!isPreview && (\n        <Box style={{ position: \"absolute\", top: \"0\", right: \"0\", zIndex: 99 }}>\n          <IconButton onClick={() => setEditDialogOpen(true)}>\n            <Pencil></Pencil>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns.forEach((column) => {\n                column.cards = column.cards.filter((c) => c.id !== card.id);\n              });\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n      <Dialog\n        open={editorDialogOpen}\n        onClose={() => setEditDialogOpen(false)}\n        style={{ zIndex: 3000 }}\n      >\n        <DialogContent>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton\n            onClick={() => {\n              card.description = description;\n              props.refreshBoard(props.board);\n              setEditDialogOpen(false);\n            }}\n          >\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              if (editor) {\n                editor.setValue(card.description);\n              }\n              setDescription(card.description);\n              setEditDialogOpen(false);\n            }}\n          >\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Card>\n  );\n}\n\nfunction KanbanWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [board, setBoard] = useState<KanbanBoard>(\n    props.attributes[\"board\"] || {\n      columns: [],\n    },\n  );\n\n  if (\"lanes\" in (board as any)) {\n    board.columns = (board as any).lanes;\n  }\n\n  const refreshBoard = (board: KanbanBoard) => {\n    const newBoard = Object.assign({}, board);\n    props.setAttributes({ board: newBoard });\n    setBoard(newBoard as KanbanBoard);\n  };\n\n  return (\n    <div>\n      <Board\n        renderColumnHeader={(column: kanbanColumn) => (\n          <KanbanColumnHeaderDisplay\n            column={column}\n            board={board}\n            refreshBoard={refreshBoard}\n            isPreview={props.isPreview}\n          ></KanbanColumnHeaderDisplay>\n        )}\n        renderCard={(card: KanbanCard, { dragging }: { dragging: boolean }) => {\n          return (\n            <KanbanCardDisplay\n              card={card}\n              board={board}\n              refreshBoard={refreshBoard}\n              isPreview={props.isPreview}\n            ></KanbanCardDisplay>\n          );\n        }}\n        allowAddColumn={!props.isPreview}\n        allowAddCard={!props.isPreview}\n        renderColumnAdder={(): any => {\n          return (\n            <Box style={{ marginLeft: \"16px\", marginTop: \"16px\" }}>\n              <Button\n                color={\"primary\"}\n                variant={\"outlined\"}\n                onClick={() => {\n                  board.columns.push({\n                    id: Date.now(),\n                    title: t(\"general/untitled\"),\n                    cards: [],\n                    wip: false,\n                  });\n                  refreshBoard(board);\n                }}\n              >\n                <Plus></Plus>\n                {t(\"widget/crossnote.kanban/add-column\")}\n              </Button>\n              <Button color={\"primary\"} onClick={() => props.removeSelf()}>\n                <TrashCan></TrashCan>\n              </Button>\n            </Box>\n          );\n          // return <ColumnAdder addColumn={addColumn} />;\n        }}\n        onNewColumnConfirm={(newColumn: any) => {\n          board.columns.push({ id: Date.now(), ...newColumn });\n          refreshBoard(board);\n        }}\n        disableCardDrag={props.isPreview}\n        disableColumnDrag={props.isPreview}\n        onCardDragEnd={(\n          card: KanbanCard,\n          source: { fromPosition: number; fromColumnId: number },\n          destination: { toPosition: number; toColumnId: number },\n        ) => {\n          const { fromPosition, fromColumnId } = source;\n          let { toPosition, toColumnId } = destination;\n          const fromColumn = board.columns.filter(\n            (l) => l.id === fromColumnId,\n          )[0];\n          const toColumn = board.columns.filter((l) => l.id === toColumnId)[0];\n          fromColumn.cards.splice(fromPosition, 1);\n          toColumn.cards = [\n            ...toColumn.cards.slice(0, toPosition),\n            card,\n            ...toColumn.cards.slice(toPosition, toColumn.cards.length),\n          ];\n\n          refreshBoard(board);\n        }}\n        onColumnDragEnd={(\n          b: KanbanBoard,\n          source: { fromPosition: number },\n          destination: { toPosition: number },\n        ) => {\n          const fromPosition: number = source.fromPosition;\n          const toPosition: number = destination.toPosition;\n          const fromColumn = board.columns[fromPosition];\n          const toColumn = board.columns[toPosition];\n          board.columns[toPosition] = fromColumn;\n          board.columns[fromPosition] = toColumn;\n          refreshBoard(board);\n        }}\n      >\n        {board}\n      </Board>\n    </div>\n  );\n}\n\nexport const KanbanWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <KanbanWidget {...args}></KanbanWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { UUIDNil } from \"./utils\";\n\nexport interface Summary {\n  title: string;\n  summary: string;\n  images: string[]; // If has `title`, then images[0] is cover.\n  tags: string[]; // TODO: support tags\n  html: string; // original html\n}\n\n/*\nexport async function getTopicsAndMentionsFromHTML(\n  html: string,\n  ribbit: Ribbit\n): Promise<{\n  topics: string[];\n  mentions: { name: string; address: string }[];\n}> {\n  const div = document.createElement(\"div\");\n  const topics = [];\n  const mentions = [];\n  div.innerHTML = html;\n\n  const tagElems = div.getElementsByClassName(\"tag\");\n  for (let i = 0; i < tagElems.length; i++) {\n    const tagElem = tagElems[i] as HTMLAnchorElement;\n    if (tagElem.classList.contains(\"tag-mention\")) {\n      const mention = tagElem.getAttribute(\"data-mention\");\n      const userInfo = await ribbit.getUserInfoFromUsername(mention);\n      mentions.push({\n        name: userInfo.username,\n        address: userInfo.address\n      });\n    } else if (tagElem.classList.contains(\"tag-topic\")) {\n      const topic = tagElem.getAttribute(\"data-topic\");\n      topics.push(topic);\n    }\n  }\n  div.remove();\n\n  return {\n    topics: Array.from(new Set(topics)),\n    mentions\n  };\n}\n*/\n\nexport function getHeaderFromMarkdown(markdown: string): string {\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    return titleMatch[0].replace(/^#/, \"\").trim();\n  }\n  return \"\";\n}\n\nexport function getMentionsFromMarkdown(markdown: string): string[] {\n  return (markdown.match(/@(?:[a-zA-Z\\d]+-)*[a-zA-Z\\d]+/g) || [])\n    .map((username) => username.replace(/^@/, \"\").toLocaleLowerCase())\n    .filter(\n      (username, index, self) =>\n        index === self.findIndex((username2) => username === username2),\n    );\n}\n\nexport async function generateSummaryFromMarkdown(\n  markdown: string,\n): Promise<Summary> {\n  let title = \"\",\n    summary = \"\",\n    images: string[] = [];\n  markdown = markdown.replace(/^---([\\w\\W]+?\\n---)/, \"\").trim(); // Remove front matter\n  let contentString = markdown;\n\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    title = titleMatch[0].replace(/^#/, \"\").trim();\n    const aheadString = markdown\n      .slice(0, markdown.indexOf(titleMatch[0]))\n      .trim();\n    contentString = markdown.slice(\n      markdown.indexOf(titleMatch[0]) + titleMatch[0].length,\n      markdown.length,\n    );\n    const coverMatch = aheadString.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n    if (coverMatch && coverMatch.length) {\n      images.push(coverMatch[0].match(/\\(([^)\"]+?)\\)/)[1].trim());\n    }\n  }\n\n  const coverImagesMatch = markdown.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n  if (coverImagesMatch && coverImagesMatch.length) {\n    coverImagesMatch.forEach((mdImage) => {\n      images.push(mdImage.match(/\\(([^)\"]+?)\\)/)[1].trim());\n    });\n    images = images.filter(\n      (image, index, self) => index === self.findIndex((m) => m === image),\n    );\n  }\n\n  summary = contentString\n    .split(\"\\n\")\n    .filter(\n      (x) =>\n        x.trim().length > 0 &&\n        !x.match(/!\\[.*?\\]\\(.+?\\)/) && // Remove image\n        !x.match(/<!--\\s*@.+?-->/), // Remove widget\n    )\n    .map((x) => x.replace(/#+\\s(.+)\\s*$/, \"**$1**\").trim()) // Replace headers to bold\n    .slice(0, 10)\n    .join(\"  \\n\");\n\n  return {\n    title,\n    summary,\n    images,\n    tags: [],\n    html: \"\",\n  };\n}\n\nexport const EmptyPageInfo = {\n  hasPreviousPage: false,\n  hasNextPage: false,\n  startCursor: UUIDNil,\n  endCursor: UUIDNil,\n};\n","import { createClient, defaultExchanges, subscriptionExchange } from \"urql\";\nimport { getGraphQLEndpoint } from \"./utils\";\n// import { SubscriptionClient } from \"subscriptions-transport-ws\";\n\n/*\nconst subscriptionClient = new SubscriptionClient(\n  getGraphQLEndpoint().replace(/^http/, \"ws\"),\n  {\n    connectionParams: () => {\n      const auth = { Authorization: `Bearer ${localStorage.getItem(\"token\")}` };\n      return auth;\n    },\n    reconnect: true\n  }\n);\n*/\n\nexport const GraphQLClient = createClient({\n  url: getGraphQLEndpoint(),\n  exchanges: [\n    ...defaultExchanges,\n    // Disable subscriptions for now\n    /*\n    subscriptionExchange({\n      forwardSubscription: operation => subscriptionClient.request(operation)\n    })*/\n  ],\n  fetchOptions: {\n    cache: \"no-cache\",\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n});\n","import i18next from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { zhCN, enUS, zhTW, ja } from \"date-fns/locale\";\nimport { enUS as enUSLanguage } from \"./lang/enUS\";\nimport { zhCN as zhCNLanguage } from \"./lang/zhCN\";\nimport { zhTW as zhTWLanguage } from \"./lang/zhTW\";\nimport { jaJP as jaJPLanguage } from \"./lang/jaJP\";\n\ni18next.use(initReactI18next).init({\n  interpolation: {\n    // React already does escaping\n    escapeValue: false,\n  },\n  keySeparator: false, // we do not use keys in form messages.welcome\n  lng: localStorage.getItem(\"settings/language\") || \"en-US\", // \"en-US\" | \"zh-CN\"\n  fallbackLng: \"en-US\",\n  resources: {\n    \"en-US\": enUSLanguage,\n    \"zh-CN\": zhCNLanguage,\n    \"zh-TW\": zhTWLanguage,\n    \"ja-JP\": jaJPLanguage,\n  },\n});\n\nexport default i18next;\n\nexport function languageCodeToLanguageName(code: string) {\n  if (code === \"zh-CN\") {\n    return \"简体中文\";\n  } else if (code === \"zh-TW\") {\n    return \"繁体中文\";\n  } else if (code === \"ja-JP\") {\n    return \"日本語\";\n  } else {\n    return \"English\";\n  }\n}\n\nexport function languageCodeToDateFNSLocale(code: string) {\n  if (code === \"zh-CN\") {\n    return zhCN;\n  } else if (code === \"en-US\") {\n    return enUS;\n  } else if (code === \"zh-HK\") {\n    return zhTW;\n  } else if (code === \"ja-JP\") {\n    return ja;\n  } else {\n    return enUS;\n  }\n}\n","export const enUS = {\n  translation: {\n    \"title/Crossnote\": \"Crossnote\",\n    \"search/notes\": \"Search Notes\",\n    \"search/notebooks\": \"Search Notebooks\",\n    \"search/attachments\": \"Search Attachments\",\n\n    // Account\n    \"account/Anonymous\": \"Anonymous\",\n    \"account/anonymous\": \"anonymous\",\n\n    // General\n    \"general/go-back\": \"Go back\",\n    \"general/sending\": \"Sending\",\n    \"general/send\": \"Send\",\n    \"general/cancel\": \"Cancel\",\n    \"general/add\": \"Add\",\n    \"general/adding\": \"Adding\",\n    \"general/backed-up-at\": \"Backed up at\",\n    \"general/created-at\": \"Created at\",\n    \"general/modified-at\": \"Modified at\",\n    \"general/interacted-at\": \"Interacted at\",\n    \"general/date-created\": \"Date created\",\n    \"general/date-modified\": \"Date modified\",\n    \"general/date-interacted\": \"Date interacted\",\n    \"general/title\": \"Title\",\n    \"general/saved-at\": \"Saved at\",\n    \"general/loading\": \"Loading ...\",\n    \"general/loading-notifications\": \"Loading notifications ...\",\n    \"general/failed-to-set\": \"Failed to set\",\n    \"general/update\": \"Update\",\n    \"general/updated\": \"Updated\",\n    \"general/updating\": \"Updating\",\n    \"general/close\": \"Close\",\n    \"general/Note\": \"Note\",\n    \"general/notes\": \"Notes\",\n    \"general/Settings\": \"Settings\",\n    \"general/Collaborators\": \"Collaborators\",\n    \"general/collaborators\": \"collaborators\",\n    \"general/Backups\": \"Backups\",\n    \"general/backups\": \"backups\",\n    \"general/Discussion\": \"Discussion\",\n    \"general/discussion\": \"discussion\",\n    \"general/Notifications\": \"Notifications\",\n    \"general/Username\": \"Username\",\n    \"general/Email\": \"Email\",\n    \"general/Password\": \"Password\",\n    \"general/confirm-password\": \"Confirm password\",\n    \"general/Continue\": \"Continue\",\n    \"general/enter-username\": \"Enter username\",\n    \"general/vickymd\": \"Edit\",\n    \"general/tags\": \"Tags\",\n    \"general/add-a-tag\": \"Add a tag\",\n    \"general/private\": \"Private\",\n    \"general/public\": \"Public\",\n    \"general/friends-only\": \"Friends only\",\n    \"general/anonymous\": \"Anonymous\",\n    \"general/onymous\": \"Onymous\",\n    \"general/Tag\": \"Tag\",\n    \"general/no-tags\": \"No tags\",\n    \"general/Directory\": \"Directory\",\n    \"general/Untitled\": \"Untitled\",\n    \"general/untitled\": \"untitled\",\n    \"general/Unknown\": \"Unknown\",\n    \"general/unknown\": \"unknown\",\n    \"general/Agree\": \"Agree\",\n    \"general/Disagree\": \"Disagree\",\n    \"general/Print\": \"Print\",\n    \"general/Share\": \"Share\",\n    \"Editor\": \"Editor\",\n    \"EDITOR\": \"EDITOR\",\n    \"Viewer\": \"Viewer\",\n    \"VIEWER\": \"VIEWER\",\n    \"Admin\": \"Admin\",\n    \"ADMIN\": \"ADMIN\",\n    \"ARCHIVED\": \"ARCHIVED\",\n    \"ATTACHED NOTES\": \"ATTACHED NOTES\",\n    \"DELETED\": \"DELETED\",\n    \"PINNED\": \"PINNED\",\n    \"OTHERS\": \"OTHERS\",\n    \"PUBLIC NOTES\": \"PUBLIC NOTES\",\n    \"FOLLOWINGS' NOTES\": \"FOLLOWINGS' NOTES\",\n    \"SHARED WITH ME\": \"SHARED WITH ME\",\n    \"BOOKMARKS\": \"BOOKMARKS\",\n    \"MY TAGS\": \"MY TAGS\",\n    \"general/enter-fullscreen-mode\": \"Enter fullscreen mode\",\n    \"general/enter-presentation-mode\": \"Enter presentation mode\",\n    \"general/math-preview\": \"Math Preview\",\n    \"general/this-note-is-empty\": \"This note is empty\",\n    \"general/this-notebook-is-empty\": \"This notebook is empty\",\n    \"general/nothing-here\": \"Nothing here\",\n    \"general/no-notes-found\": \"No more notes found\",\n    \"general/no-more-notebooks-found\": \"No more notebooks found\",\n    \"general/no-more-attachments-found\": \"No more attachments found\",\n    \"general/no-notifications-found\": \"No notifications found\",\n    \"general/clear-all\": \"Clear all\",\n    \"general/Save\": \"Save\",\n    \"general/Delete\": \"Delete\",\n    \"general/Follow\": \"Follow\",\n    \"general/Following\": \"Following\",\n    \"general/Unfollow\": \"Unfollow\",\n    \"general/my-notes\": \"My notes\",\n    \"general/public-notes\": \"Public notes\",\n    \"general/followings-notes\": \"Followings' notes\",\n    \"general/shared-with-me\": \"Shared with me\",\n    \"general/Bookmarks\": \"Bookmarks\",\n    \"general/Archive\": \"Archive\",\n    \"general/Trash\": \"Trash\",\n    \"general/new-note\": \"New note\",\n    \"general/new-attachment\": \"New attachment\",\n    \"general/profile-updated\": \"Profile updated\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"Audio\",\n    \"general/Video\": \"Video\",\n    \"general/source-url\": \"Source URL\",\n    \"general/sign-in\": \"Sign in\",\n    \"general/sign-up\": \"Sign up\",\n    \"general/Link\": \"Link\",\n    \"general/Upload\": \"Upload\",\n    \"general/Uploading\": \"Uploading\",\n    \"general/clicks\": \"clicks\",\n    \"general/Processing\": \"Processing...\",\n    \"general/please-wait\": \"Please wait...\",\n    \"general/please-sign-in-first\": \"Please sign in first\",\n    \"general/Languages\": \"Languages\",\n    \"general/track\": \"Track\",\n    \"general/Publish\": \"Publish\",\n    \"general/Unpublish\": \"Unpublish\",\n    \"general/Open\": \"Open\",\n    \"general/Download\": \"Download\",\n    \"general/Configure\": \"Configure\",\n    \"general/Update\": \"Update\",\n    \"general/empty\": \"empty\",\n    \"general/Explore\": \"Explore\",\n    \"general/Notebooks\": \"Notebooks\",\n    \"general/add-a-notebook\": \"Add a notebook\",\n    \"general/add-a-note\": \"Add a note\",\n    \"general/add-an-attachment\": \"Add an attachment\",\n    \"general/configure-the-notebook\": \"Configure the notebook\",\n    \"general/publish-your-notebook\": \"Publish your notebook\",\n    \"general/notebook-name\": \"Notebook name\",\n    \"general/git-repository\": \"Git repository\",\n    \"general/clone-a-git-repository\": \"Clone a Git repository\",\n    \"general/optional\": \"optional\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"branch\",\n    \"general/remember-username-and-password\": \"Remember credentials\",\n    \"general/stored-locally\": \"stored locally\",\n    \"general/cors-proxy\": \"CORS proxy\",\n    \"general/why-cors-proxy\": \"Why do we need CORS proxy？\",\n    \"general/today\": \"Today\",\n    \"general/todo\": \"Todo\",\n    \"general/graph-view\": \"Graph view\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"Tagged\",\n    \"general/untagged\": \"Untagged\",\n    \"general/encrypt\": \"Encrypt\",\n    \"general/encrypted\": \"Encrypted\",\n    \"general/decrypt\": \"Decrypt\",\n    \"general/conflicted\": \"Conflicted\",\n    \"general/attachments\": \"Attachments\",\n    \"general/Pin\": \"Pin\",\n    \"general/Encryption\": \"Encryption\",\n    \"general/Fullscreen\": \"Fullscreen\",\n    \"general/change-file-path\": \"Change file path\",\n    \"general/create-a-copy\": \"Create a copy\",\n    \"general/restore-checkout\": \"Restore (git checkout)\",\n    \"general/download-pull\": \"Download (git pull)\",\n    \"general/upload-push\": \"Upload (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"Disable the encryption on this note\",\n    \"general/encrypt-this-note-with-password\":\n      \"Encrypt this note with password\",\n    \"general/disable-encryption\": \"Disable encryption\",\n    \"general/decrypt-this-note\": \"Decrypt this note\",\n    \"general/upload-the-profile\": \"Upload profile\",\n    \"general/commit-message\": \"Commit message\",\n    \"general/upload-notebook\": \"Upload the notebook\",\n    \"general/Comments\": \"Comments\",\n    \"general/Source\": \"Source\",\n    \"general/Description\": \"Description\",\n    \"general/Edit\": \"Edit\",\n    \"general/Rename\": \"Rename\",\n    \"general/rename-directory\": \"Rename directory\",\n    \"general/delete-directory\": \"Delete directory\",\n    \"general/rename-tag\": \"Rename tag\",\n    \"general/delete-tag\": \"Delete tag\",\n    \"general/notebook-updates-found\": \"Notebook updates found\",\n    \"general/update-the-notebook\": \"Update the notebook\",\n    \"general/check-notebook-updates-periodically\":\n      \"Check notebook updates periodically\",\n    \"general/minutes\": \"minute(s)\",\n    \"general/hard-reset\": \"Hard reset\",\n    \"general/Default\": \"Default\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"Desc\",\n    \"general/Asc\": \"Asc\",\n    \"general/pin-the-note\": \"Pin the note\",\n    \"general/unpin-the-note\": \"Unpin the note\",\n    \"general/add-to-quick-access\": \"Add to quick access\",\n    \"general/remove-from-quick-access\": \"Remove from quick access\",\n    \"general/open-folder\": \"Open Folder\",\n    \"general/open-a-local-folder\": \"Open a Local Folder\",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \"Your browser doesn't support to open local folder\",\n    \"general/refresh\": \"Refresh\",\n\n    // Error\n    \"error/authentication-failed\": \"Authentication failed\",\n    \"error/failed-to-upload-notebook\": \"Failed to upload notebook\",\n    \"error/failed-to-download-notebook\": \"Failed to download notebook\",\n    \"error/notebook-already-exists\": \"Notebook already exists\",\n    \"error/invalid-git-url-prefix\": \"Invalid git URL prefix\",\n    \"error/please-resolve-conflicts\": \"Please resolve conflicts first\",\n    \"error/failed-to-disable-encryption\": \"Failed to disable encryption\",\n    \"error/decryption-failed\": \"Decryption failed\",\n    \"error/failed-to-change-file-path\": \"Failed to change file path\",\n    \"error/failed-to-create-widget\": \"Failed to create widget\",\n    \"error/failed-to-load-widget\": \"Failed to load widget\",\n    \"error/failed-to-update-the-notebook\": \"Failed to update the notebook\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"Failed to unpublish the notebook\",\n    \"error/failed-to-publish-notebook\": \"Failed to publish the notebook\",\n\n    // Success\n    \"success/notebook-uploaded\": \"Notebook uploaded\",\n    \"success/notebook-downloaded\": \"Notebook downloaded\",\n\n    // Info\n    \"info/downloading-notebook\": \"Downloading notebook\",\n\n    // Note\n    \"note/unarchive-note\": \"Unarchive note\",\n    \"note/archive-note\": \"Archive note\",\n    \"note/delete-forever\": \"Delete forever\",\n    \"note/delete-note\": \"Delete note\",\n    \"note/restore-note\": \"Restore note\",\n    \"note/report-note\": \"Report note\",\n    \"note/open-in-crossnote-website\": \"Open in Crossnote website\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"Failed to send suggestion\",\n    \"note-tags/suggestion-sent\": \"Suggestion sent\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"Suggest a tag to this note\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"Follow a tag\",\n\n    // Notifications\n    \"notifications/refresh\": \"Refresh to see new notifications\",\n    \"notifications/new-version-available\":\n      \"A new version of Crossnote is available!\",\n\n    // Settings\n    \"settings/about-this-project\": \"About this project\",\n    \"settings/issues-and-feature-requests\":\n      \"Found issues or have feature requests?\",\n    \"settings/uploading-cover-image\": \"Uploading cover image\",\n    \"settings/upload-image-failure\": \"Failed to upload image\",\n    \"settings/Cover\": \"Cover\",\n    \"settings/enter-cover-image-url\": \"Enter cover image URL\",\n    \"settings/upload-image\": \"Upload image\",\n    \"settings/Avatar\": \"Avatar\",\n    \"settings/enter-avatar-image-url\": \"Enter avatar image URL\",\n    \"settings/Name\": \"Name\",\n    \"settings/enter-name\": \"Enter your Name (this is not your username)\",\n    \"settings/editor-cursor-color\": \"Editor cursor color\",\n    \"settings/hello\": \"Hello, \",\n    \"settings/world\": \"world!\",\n    \"settings/linked-with-github-account\": \"Linked with GitHub account\",\n    \"settings/link-with-github-account\": \"Link with GitHub account\",\n    \"settings/log-out\": \"Log out\",\n    \"settings/author-name\": \"Author name\",\n    \"settings/author-email\": \"Author email\",\n    \"settings/theme\": \"Theme\",\n    \"settings/created-cloud-widgets-count\": \"Created cloud widgets count\",\n    \"settings/key-map\": \"Key Map\",\n\n    // Preview\n    \"preview/attach-a-note\": \"Attach a note\",\n    \"preview/crossnote-untitled\": \"Crossnote - Untitled\",\n    \"preview/edit-this-note\": \"Edit this note\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"followings\",\n    \"profile-card/followers\": \"followers\",\n    \"profile-card/Followings\": \"Followings\",\n    \"profile-card/Followers\": \"Followers\",\n    \"profile-card/notes\": \"notes\",\n    \"profile-card/follow-user-failure\": \"Failed to follow user\",\n    \"profile-card/followed-user\": \"Followed user\",\n    \"profile-card/unfollow-user-failure\": \"Failed to unfollow user\",\n    \"profile-card/unfollowed-user\": \"Unfollowed user\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"Show attached notes\",\n    \"interaction-panel/add-comment\": \"Add comment\",\n    \"interaction-panel/add-reaction\": \"Add reaction\",\n\n    // Editor\n    \"editor/loading-your-note\": \"Loading your note...\",\n    \"editor/sync-failure\": \"Failed to sync... Please refresh your page\",\n    \"editor/saving\": \"Saving...\",\n    \"editor/save-failure\": \"Failed to save\",\n    \"editor/saved\": \"Saved\",\n    \"editor/update-note-failure\": \"Failed to update note\",\n    \"editor/placeholder\": \"#  Hi 😀 Type '/' for commands\",\n    \"editor/ln\": \"Ln\",\n    \"editor/col\": \"Col\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"Allow readers to suggest note tags\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"Allow readers to attach notes under this note\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"Inherit parent note collaborators list\",\n    \"editor/note-control/note-visibility-hint\":\n      \"All collaborators will be able to see this note\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"Applies to you and collaborators that can edit and admin\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"Applies to anyone that can view this note\",\n    \"editor/note-control/enter-parent-note-id\": \"Enter parent note ID\",\n    \"editor/note-control/attach-note-failure\": \"Failed to attach note\",\n    \"editor/note-control/unattach-note-failure\": \"Failed to unattach note\",\n    \"editor/collaborator-hint\": \" - note will be visible to them\",\n    \"editor/shareable-link-hint\":\n      \"people with the link can view/edit this note with no need of login\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"Create backup\",\n    \"editor/backups-control/delete-this-backup\": \"Delete this backup\",\n    \"editor/backups-control/create-backup-failure\": \"Failed to create backup\",\n    \"editor/backups-control/backup-created\": \"Backup created\",\n    \"editor/backups-control/delete-backup-failure\": \"Failed to delete backup\",\n    \"editor/backups-control/backup-deleted\": \"Backup deleted\",\n    \"editor/backups-control/cloud-version\": \"Cloud version\",\n    \"editor/backups-control/backup-name\": \"Backup name\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"Failed to set collaborator role\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"Failed to add collaborator\",\n    \"editor/collaborators-control/collaborator-removed\": \"Collaborator removed\",\n    \"editor/collaborators-control/collaborator-added\": \"Collaborator added\",\n    \"editor/collaborators-control/can-view\": \"Can view\",\n    \"editor/collaborators-control/can-edit\": \"Can edit\",\n    \"editor/collaborators-control/can-administrate\": \"Can administrate\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"Insert image\",\n    \"editor/toolbar/upload-local-images\": \"Upload local images\",\n    \"editor/toolbar/capture-webpage\": \"Capture the whole webpage\",\n    \"editor/toolbar/insert-clock\": \"Insert clock\",\n    \"editor/toolbar/insert-emoji\": \"Insert emoji\",\n    \"editor/toolbar/insert-media\": \"Insert media\",\n    \"editor/toolbar/insert-audio\": \"Insert Audio\",\n    \"editor/toolbar/netease-music\": \"Netease Music\",\n    \"editor/toolbar/insert-video\": \"Insert video\",\n    \"editor/toolbar/insert-youtube\": \"Insert Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"Insert Bilibili\",\n    \"editor/toolbar/insert-slide\": \"Insert slide\",\n    \"editor/toolbar/insert-ocr\": \"Insert OCR\",\n    \"editor/toolbar/insert-kanban\": \"Insert Kanban\",\n    \"editor/toolbar/insert-abc-notation\": \"Insert ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"Insert header 1\",\n    \"editor/toolbar/insert-header-2\": \"Insert header 2\",\n    \"editor/toolbar/insert-header-3\": \"Insert header 3\",\n    \"editor/toolbar/insert-header-4\": \"Insert header 4\",\n    \"editor/toolbar/insert-header-5\": \"Insert header 5\",\n    \"editor/toolbar/insert-header-6\": \"Insert header 6\",\n    \"editor/toolbar/bold\": \"Bold\",\n    \"editor/toolbar/italic\": \"Italic\",\n    \"editor/toolbar/strikethrough\": \"Strikethrough\",\n    \"editor/toolbar/insert-inline-code\": \"Insert inline code\",\n    \"editor/toolbar/insert-blockquote\": \"Insert blockquote\",\n    \"editor/toolbar/insert-unordered-list\": \"Insert unordered list\",\n    \"editor/toolbar/insert-ordered-list\": \"Insert ordered list\",\n    \"editor/toolbar/insert-link\": \"Insert link\",\n    \"editor/toolbar/insert-table\": \"Insert table\",\n    \"editor/toolbar/insert-comment\": \"Insert crossnote cloud comment widget\",\n    \"editor/toolbar/insert-github-gist\": \"Insert GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"Tag added\",\n    \"editor/note-control/tag-deleted\": \"Tag deleted\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"Failed to set note visibility\",\n    \"editor/note-control/note-visibility-updated\": \"Note visibility updated\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"Failed to set author visibility\",\n    \"editor/note-control/author-visibility-updated\":\n      \"Author visibility updated\",\n    \"editor/note-control/editor-mode\": \"Editor mode\",\n    \"editor/note-control/source-code\": \"Source code\",\n    \"editor/note-control/preview\": \"Preview\",\n    \"editor/note-control/split-view\": \"Split view\",\n    \"editor/note-control/pin-preview\": \"Pin preview on the side\",\n    \"editor/note-control/display-modification-records\":\n      \"Display modification records\",\n    \"editor/note-control/note-visibility\": \"Note visibility\",\n    \"editor/note-control/author-visibility\": \"Author visibility\",\n    \"editor/note-control/shareable-link\": \"Shareable link\",\n    \"editor/note-control/copy-to-clipboard\": \"Copy to clipboard\",\n    \"editor/note-control/link-to-preview\": \"Link to preview\",\n    \"editor/note-control/link-to-editor\": \"Link to editor\",\n    \"editor/note-control/attach-to-note\": \"Attach to note\",\n    \"editor/note-control/source-added\": \"URL added\",\n    \"editor/note-control/source-deleted\": \"URL deleted\",\n    \"editor/note-control/invalid-note-source\": \"Invalid URL\",\n    \"editor/note-control/add-note-source\": \"Add related URLs\",\n    \"editor/note-control/note-source-hint\":\n      \"Notes on the same URL will be grouped together\",\n    \"editor/note-control/enter-note-source\": \"Enter URL\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"This note is private\",\n    \"avatar-panel/this-note-is-public\": \"This note is visible to public\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"This note is only visible to friends\",\n    \"avatar-panel/you-are-anonymous\": \"You are anonymous\",\n\n    // FileExporter\n    \"file-exporter/name\": \"File exporter\",\n    \"file-exporter/orientation\": \"Orientation\",\n    \"file-exporter/portrait\": \"portrait\",\n    \"file-exporter/landscape\": \"landscape\",\n    \"file-exporter/paper-size\": \"Paper size\",\n    \"file-exporter/unit\": \"Unit\",\n    \"file-exporter/margin-top\": \"Margin top\",\n    \"file-exporter/margin-bottom\": \"Margin bottom\",\n    \"file-exporter/margin-left\": \"Margin left\",\n    \"file-exporter/margin-right\": \"Margin right\",\n\n    // Utils\n    \"utils/uploading-image\": \"Uploading image...\",\n    \"utils/upload-image-failure\": \"Failed to upload image\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"Replies to you in\",\n    \"notification/'s-note\": \"'s note \",\n    // * NoteReactionNotification\n    \"notification/added\": \"Added\",\n    \"notification/to-your-note\": \"to your note\",\n    \"notification/add-you-as\": \"Added you as\",\n    \"notification/of-note\": \"of note\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"Failed to add tag\",\n    \"notification/suggested-to-add-tag\": \"Suggested to add tag\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"Started following you\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"Bookmarked your note\",\n    \"notification/view-more-notifications\": \"View more notifications\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"Please wait ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"Failed to link with GitHub account\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"Failed to sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in\":\n      \"It seems to be the first time you sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in-small\":\n      \"Please finish the registeration below\",\n\n    // Widgets\n    \"widget/autoplay\": \"autoplay\",\n    \"widget/controls\": \"controls\",\n    \"widget/loop\": \"loop\",\n    \"widget/muted\": \"muted\",\n    \"widget/creating-widget\": \"Creating widget\",\n    \"widget/loading-widget\": \"Loading widget\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"Thanks sm.ms for offering free image hosting service.\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"Your browser does not support the audio element.\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"Enter audio source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"Your browser does not support the video element\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"Error: Only supported https://www.bilibili.com/video/av79126732 like URL\",\n    \"widget/crossnote.youtube/error_message\":\n      \"Error: Only supported https://www.youtube.com/watch?v=MmB9b5njVbA like URL\",\n    \"widget/crossnote.auth/welcome\": \"Welcome to Crossnote\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \"Doesn't have an account? Let's create one 😉!\",\n    \"widget/crossnote.auth/forgot_password\": \"Forgot your password 😣?\",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"Failed to send verification code\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \"Verification code has been sent to \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"Failed to reset password\",\n    \"widget/crossnote.auth/password_reset\": \"Your password has been reset\",\n    \"widget/crossnote.auth/password-mismatch\": \"Passwords mismatch\",\n    \"widget/crossnote.auth/hello\": \"Hello, \",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"Enter the verification code\",\n    \"widget/crossnote.auth/get-code\": \"Get code\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"Sign in with GitHub account\",\n    \"widget/crossnote.auth/already-have-an-account\": \"Already have an account?\",\n    \"widget/crossnote.auth/reset-password\": \"Reset password\",\n    \"widget/crossnote.auth/Or\": \"Or\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili video URL\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"Enter the Bilibili video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/image-helper\": \"Image helper\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"Enter image URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"Click here to browse image file\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"Enter Netease Music song number ID.\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"Enter video source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/poster-url\": \"Poster URL (optional)\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"Enter poster URL here.\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube video URL\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"Enter the Youtube video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"Local image\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"Recognize text in languages\",\n    \"widget/crossnote.ocr/start-ocr\": \"Start OCR\",\n    \"widget/crossnote.ocr/extra-settings\": \"Extra settings\",\n    \"widget/crossnote.ocr/grayscale\": \"Grayscale\",\n    \"widget/crossnote.kanban/add-column\": \"Add new column\",\n    \"widget/crossnote.github_gist/title\": \"Embed a GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"Enter GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"Reply to this user\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"Add reaction to this comment\",\n    \"widget/crossnote.comment/edit-this-message\": \"Edit this comment\",\n    \"widget/crossnote.comment/modified-comment\": \"modified comment\",\n    \"widget/crossnote.comment/post-comment-failure\": \"Failed to post comment\",\n    \"widget/crossnote.comment/unsubscribe-info\":\n      \"Unsubscribe from the comments\",\n    \"widget/crossnote.comment/subscribe-info\": \"Subscribe to the comments\",\n    \"widget/crossnote.comment/view-more-comments\": \"View more comments\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"Are you sure to delete this note?\",\n    \"delete-note-dialog/subtitle\": \"You can't undo this action.\",\n    \"delete-directory-dialog/title\": \"Are you sure to delete this directory?\",\n    \"delete-directory-dialog/subtitle\":\n      \"All the child directories and notes will also be deleted. You can't undo this action.\",\n    \"delete-tag-dialog/title\": \"Are you sure to delete this tag?\",\n    \"delete-tag-dialog/subtitle\":\n      \"All the child tags will also be deleted. You can't undo this action.\",\n    \"add-notebook-dialog/disclaimer\":\n      \"Notebook data will only be stored locally in browser for offline uses. We won't upload any notebook data to our server.\",\n    \"edit-image-dialog/title\": \"Edit the image\",\n    \"edit-image-dialog/image-url\": \"image URL\",\n    \"edit-image-dialog/image-title\": \"image title\",\n    \"edit-image-dialog/image-alt-text\": \"image alt text\",\n    \"language-selector-dialog/subtitle\": \"Please choose the preferred language\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"Add to Home Screen\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline.\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) Press the 'Share' button\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) Press 'Add to Home Screen'\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"We currently only support publishing the notebook from a public repository on GitHub, GitLab, Gitea, or Gitea. We only collect README.md file data.\",\n    \"publish-notebook/disclaimer-2\":\n      \"Please declare the ownership of your notebook by adding the following front-matter to README.md in remote repository:\",\n\n    // git\n    \"git/status/ignored\": \"ignored\",\n    \"git/status/unmodified\": \"unmodified\",\n    \"git/status/*modified\": \"*modified\",\n    \"git/status/*deleted\": \"*deleted\",\n    \"git/status/*added\": \"*added\",\n    \"git/status/absent\": \"absent\",\n    \"git/status/modified\": \"modified\",\n    \"git/status/deleted\": \"deleted\",\n    \"git/status/added\": \"added\",\n    \"git/status/*unmodified\": \"*unmodified\",\n    \"git/status/*absent\": \"*absent\",\n    \"git/status/*undeleted\": \"*undeleted\",\n    \"git/status/*undeletemodified\": \"*undeletemodified\",\n    \"git/status/\": \"\",\n  },\n};\n","export const zhCN = {\n  translation: {\n    \"title/Crossnote\": \"交叉笔记\",\n    \"search/notes\": \"搜索笔记\",\n    \"search/notebooks\": \"搜索笔记本\",\n    \"search/attachments\": \"搜索附件\",\n\n    // Account\n    \"account/Anonymous\": \"匿名\",\n    \"account/anonymous\": \"匿名\",\n\n    // General\n    \"general/go-back\": \"回退\",\n    \"general/sending\": \"发送中\",\n    \"general/send\": \"发送\",\n    \"general/cancel\": \"取消\",\n    \"general/add\": \"添加\",\n    \"general/adding\": \"正在添加\",\n    \"general/backed-up-at\": \"备份于\",\n    \"general/created-at\": \"创建于\",\n    \"general/modified-at\": \"修改于\",\n    \"general/interacted-at\": \"互动于\",\n    \"general/date-created\": \"创建时间\",\n    \"general/date-modified\": \"修改时间\",\n    \"general/date-interacted\": \"互动时间\",\n    \"general/title\": \"标题\",\n    \"general/saved-at\": \"保存于\",\n    \"general/loading\": \"读取中 ...\",\n    \"general/loading-notifications\": \"正在读取消息 ...\",\n    \"general/failed-to-set\": \"设置失败\",\n    \"general/update\": \"更新\",\n    \"general/updated\": \"已更新\",\n    \"general/updating\": \"正在更新\",\n    \"general/close\": \"关闭\",\n    \"general/Note\": \"笔记\",\n    \"general/notes\": \"笔记\",\n    \"general/Settings\": \"设置\",\n    \"general/Collaborators\": \"协作者\",\n    \"general/collaborators\": \"协作者\",\n    \"general/Backups\": \"备份\",\n    \"general/backups\": \"备份\",\n    \"general/Discussion\": \"讨论\",\n    \"general/discussion\": \"讨论\",\n    \"general/Notifications\": \"消息\",\n    \"general/Username\": \"用户名\",\n    \"general/Email\": \"邮箱\",\n    \"general/Password\": \"密码\",\n    \"general/confirm-password\": \"再次确认密码\",\n    \"general/Continue\": \"下一步\",\n    \"general/enter-username\": \"输入用户名\",\n    \"general/vickymd\": \"编辑\",\n    \"general/tags\": \"标签\",\n    \"general/add-a-tag\": \"添加一个标签\",\n    \"general/private\": \"私有\",\n    \"general/public\": \"公开可见\",\n    \"general/friends-only\": \"仅好友可见\",\n    \"general/anonymous\": \"匿名\",\n    \"general/onymous\": \"公开署名\",\n    \"general/Tag\": \"标签\",\n    \"general/no-tags\": \"没有标签\",\n    \"general/Directory\": \"目录\",\n    \"general/Untitled\": \"无标题\",\n    \"general/untitled\": \"无标题\",\n    \"general/Unknown\": \"未知\",\n    \"general/unknown\": \"未知\",\n    \"general/Agree\": \"同意\",\n    \"general/Disagree\": \"不同意\",\n    \"general/Print\": \"打印\",\n    \"general/Share\": \"分享\",\n    \"Editor\": \"编辑者\",\n    \"EDITOR\": \"编辑者\",\n    \"Viewer\": \"阅读者\",\n    \"VIEWER\": \"阅读者\",\n    \"Admin\": \"管理员\",\n    \"ADMIN\": \"管理员\",\n    \"ARCHIVED\": \"归档的笔记\",\n    \"ATTACHED NOTES\": \"附加的笔记\",\n    \"DELETED\": \"删除的笔记\",\n    \"PINNED\": \"置顶\",\n    \"OTHERS\": \"其它\",\n    \"PUBLIC NOTES\": \"公开的笔记\",\n    \"FOLLOWINGS' NOTES\": \"关注人的笔记\",\n    \"SHARED WITH ME\": \"分享给我的\",\n    \"BOOKMARKS\": \"收藏\",\n    \"MY TAGS\": \"我的标签\",\n    \"general/enter-fullscreen-mode\": \"进入全屏模式\",\n    \"general/enter-presentation-mode\": \"进入幻灯片模式\",\n    \"general/math-preview\": \"数学预览\",\n    \"general/this-note-is-empty\": \"这个笔记没有内容\",\n    \"general/this-notebook-is-empty\": \"这个笔记本没有内容\",\n    \"general/nothing-here\": \"这里什么也没有\",\n    \"general/no-notes-found\": \"没有找到其它的笔记\",\n    \"general/no-more-attachments-found\": \"没有找到其它的附件\",\n    \"general/no-more-notebooks-found\": \"没有找到其它的笔记本\",\n    \"general/no-notifications-found\": \"没有找到其它的消息\",\n    \"general/clear-all\": \"清空所有\",\n    \"general/Save\": \"保存\",\n    \"general/Delete\": \"删除\",\n    \"general/Follow\": \"关注\",\n    \"general/Following\": \"正在关注\",\n    \"general/Unfollow\": \"取消关注\",\n    \"general/my-notes\": \"我的笔记\",\n    \"general/public-notes\": \"公开的笔记\",\n    \"general/followings-notes\": \"关注人的笔记\",\n    \"general/shared-with-me\": \"分享给我的\",\n    \"general/Bookmarks\": \"收藏\",\n    \"general/Archive\": \"归档\",\n    \"general/Trash\": \"废纸篓\",\n    \"general/new-note\": \"新的笔记\",\n    \"general/new-attachment\": \"新的附件\",\n    \"general/profile-updated\": \"用户信息已更新\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"音频\",\n    \"general/Video\": \"视频\",\n    \"general/source-url\": \"源链接\",\n    \"general/sign-in\": \"登录\",\n    \"general/sign-up\": \"注册\",\n    \"general/Link\": \"链接\",\n    \"general/Upload\": \"上传\",\n    \"general/Uploading\": \"正在上传\",\n    \"general/clicks\": \"点击\",\n    \"general/Processing\": \"正在处理...\",\n    \"general/please-wait\": \"请稍候...\",\n    \"general/please-sign-in-first\": \"请先登录\",\n    \"general/Languages\": \"语言\",\n    \"general/track\": \"跟踪\",\n    \"general/Publish\": \"发布\",\n    \"general/Unpublish\": \"取消发布\",\n    \"general/Open\": \"打开\",\n    \"general/Download\": \"下载\",\n    \"general/Configure\": \"配置\",\n    \"general/Update\": \"更新\",\n    \"general/empty\": \"空的\",\n    \"general/Explore\": \"探索\",\n    \"general/Notebooks\": \"笔记本\",\n    \"general/add-a-notebook\": \"添加一个笔记本\",\n    \"general/add-a-note\": \"添加一个笔记\",\n    \"general/add-an-attachment\": \"添加一个附件\",\n    \"general/configure-the-notebook\": \"设置笔记本\",\n    \"general/publish-your-notebook\": \"发布你的笔记本\",\n    \"general/notebook-name\": \"笔记本名称\",\n    \"general/git-repository\": \"git 仓库\",\n    \"general/clone-a-git-repository\": \"克隆一个 Git 仓库\",\n    \"general/optional\": \"可选\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"分支\",\n    \"general/remember-username-and-password\": \"记住用户名和密码\",\n    \"general/stored-locally\": \"储存于本地\",\n    \"general/cors-proxy\": \"CORS 代理\",\n    \"general/why-cors-proxy\": \"为什么需要 CORS 代理？\",\n    \"general/today\": \"今天\",\n    \"general/todo\": \"待办事项\",\n    \"general/graph-view\": \"图形视图\",\n    \"general/wiki\": \"维基\",\n    \"general/tagged\": \"标签\",\n    \"general/untagged\": \"未标签\",\n    \"general/encrypt\": \"加密\",\n    \"general/encrypted\": \"已加密\",\n    \"general/decrypt\": \"解密\",\n    \"general/conflicted\": \"冲突\",\n    \"general/attachments\": \"附件\",\n    \"general/Pin\": \"置顶\",\n    \"general/Encryption\": \"加密\",\n    \"general/Fullscreen\": \"全屏\",\n    \"general/change-file-path\": \"更改文件路径\",\n    \"general/create-a-copy\": \"创建一个副本\",\n    \"general/restore-checkout\": \"恢复 (git checkout)\",\n    \"general/download-pull\": \"下载 (git pull)\",\n    \"general/upload-push\": \"上传 (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"解除这个笔记上的加密\",\n    \"general/encrypt-this-note-with-password\": \"通过密码加密这个笔记\",\n    \"general/disable-encryption\": \"解除加密\",\n    \"general/decrypt-this-note\": \"解密这个笔记\",\n    \"general/upload-the-profile\": \"上传账户信息\",\n    \"general/commit-message\": \"提交说明\",\n    \"general/upload-notebook\": \"上传笔记本\",\n    \"general/Comments\": \"评论\",\n    \"general/Source\": \"源\",\n    \"general/Description\": \"描述\",\n    \"general/Edit\": \"编辑\",\n    \"general/Rename\": \"重命名\",\n    \"general/rename-directory\": \"重命名目录\",\n    \"general/delete-directory\": \"删除目录\",\n    \"general/rename-tag\": \"重命名标签\",\n    \"general/delete-tag\": \"删除标签\",\n    \"general/notebook-updates-found\": \"发现笔记本更新\",\n    \"general/update-the-notebook\": \"更新这个笔记本\",\n    \"general/check-notebook-updates-periodically\": \"周期性地检查笔记本更新\",\n    \"general/minutes\": \"分钟\",\n    \"general/hard-reset\": \"硬重置\",\n    \"general/Default\": \"默认\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"降序\",\n    \"general/Asc\": \"升序\",\n    \"general/pin-the-note\": \"置顶这个笔记\",\n    \"general/unpin-the-note\": \"取消置顶这个笔记\",\n    \"general/add-to-quick-access\": \"添加到快速访问\",\n    \"general/remove-from-quick-access\": \"从快速访问中移除\",\n    \"general/open-folder\": \"打开文件夹\",\n    \"general/open-a-local-folder\": \"打开一个本地文件夹\",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \"你的浏览器不支持打开本地文件夹\",\n    \"general/refresh\": \"刷新\",\n\n    // Error\n    \"error/authentication-failed\": \"认证失败\",\n    \"error/failed-to-upload-notebook\": \"上传笔记本失败\",\n    \"error/failed-to-download-notebook\": \"下载笔记本失败\",\n    \"error/notebook-already-exists\": \"笔记本已经存在\",\n    \"error/invalid-git-url-prefix\": \"无效的 git URL 前缀\",\n    \"error/please-resolve-conflicts\": \"请先解决冲突\",\n    \"error/failed-to-disable-encryption\": \"解除加密失败\",\n    \"error/decryption-failed\": \"解密失败\",\n    \"error/failed-to-change-file-path\": \"更改文件路径失败\",\n    \"error/failed-to-create-widget\": \"创建挂件失败\",\n    \"error/failed-to-load-widget\": \"读取挂件失败\",\n    \"error/failed-to-update-the-notebook\": \"更新笔记本失败\",\n    \"error/failed-to-unpublish-the-notebook\": \"取消发布笔记本失败\",\n    \"error/failed-to-publish-notebook\": \"发布笔记本失败\",\n\n    // Success\n    \"success/notebook-uploaded\": \"笔记本已上传\",\n    \"success/notebook-downloaded\": \"笔记本已下载\",\n\n    // Info\n    \"info/downloading-notebook\": \"正在下载笔记本\",\n\n    // Note\n    \"note/unarchive-note\": \"取消归档\",\n    \"note/archive-note\": \"归档\",\n    \"note/delete-forever\": \"永久删除\",\n    \"note/delete-note\": \"删除\",\n    \"note/restore-note\": \"恢复\",\n    \"note/report-note\": \"举报\",\n    \"note/open-in-crossnote-website\": \"在交叉笔记网站中打开\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"发送建议失败\",\n    \"note-tags/suggestion-sent\": \"建议已发送\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"给这个笔记建议一个标签\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"关注一个标签\",\n\n    // Notifications\n    \"notifications/refresh\": \"刷新来查看新的消息\",\n    \"notifications/new-version-available\": \"发现了新版本的交叉笔记！\",\n\n    // Settings\n    \"settings/about-this-project\": \"关于这个项目\",\n    \"settings/issues-and-feature-requests\": \"发现了问题或者有功能请求？\",\n    \"settings/uploading-cover-image\": \"上传封面图片\",\n    \"settings/upload-image-failure\": \"上传图片失败\",\n    \"settings/Cover\": \"封面图片\",\n    \"settings/enter-cover-image-url\": \"输入封面图片链接\",\n    \"settings/upload-image\": \"上传图片\",\n    \"settings/Avatar\": \"头像\",\n    \"settings/enter-avatar-image-url\": \"输入头像图片链接\",\n    \"settings/Name\": \"名字\",\n    \"settings/enter-name\": \"输入你的名字（这个不是你的用户名）\",\n    \"settings/editor-cursor-color\": \"编辑器光标颜色\",\n    \"settings/hello\": \"你好，\",\n    \"settings/world\": \"世界！\",\n    \"settings/linked-with-github-account\": \"已关联 GitHub 帐号\",\n    \"settings/link-with-github-account\": \"关联到 GitHub 帐号\",\n    \"settings/log-out\": \"登出\",\n    \"settings/author-name\": \"作者姓名\",\n    \"settings/author-email\": \"作者邮箱\",\n    \"settings/theme\": \"主题\",\n    \"settings/created-cloud-widgets-count\": \"创建的云挂件数量\",\n    \"settings/key-map\": \"键盘映射\",\n\n    // Preview\n    \"preview/attach-a-note\": \"附加一个笔记\",\n    \"preview/crossnote-untitled\": \"交叉笔记 - 无标题\",\n    \"preview/edit-this-note\": \"编辑这个笔记\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"关注\",\n    \"profile-card/followers\": \"粉丝\",\n    \"profile-card/Followings\": \"关注\",\n    \"profile-card/Followers\": \"粉丝\",\n    \"profile-card/notes\": \"笔记\",\n    \"profile-card/follow-user-failure\": \"无法关注这个用户\",\n    \"profile-card/followed-user\": \"关注了这个用户\",\n    \"profile-card/unfollow-user-failure\": \"无法取消关注这个用户\",\n    \"profile-card/unfollowed-user\": \"取消关注了这个用户\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"显示附加的笔记\",\n    \"interaction-panel/add-comment\": \"添加评论\",\n    \"interaction-panel/add-reaction\": \"添加表情\",\n\n    // Editor\n    \"editor/loading-your-note\": \"正在读取你的笔记...\",\n    \"editor/sync-failure\": \"同步失败... 请重启网页\",\n    \"editor/saving\": \"正在保存...\",\n    \"editor/save-failure\": \"保存失败\",\n    \"editor/saved\": \"已保存\",\n    \"editor/update-note-failure\": \"更新笔记失败\",\n    \"editor/placeholder\": \"#  你好 😀 输入 '/' 打开命令\",\n    \"editor/ln\": \"行\",\n    \"editor/col\": \"列\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"允许读者向你建议笔记的标签\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"允许读者在这个笔记下附加笔记\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"继承上一级笔记的协作者列表\",\n    \"editor/note-control/note-visibility-hint\":\n      \"所有的协作者也将能够看到这个笔记\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"适用于你以及所有可编辑或可管理这个笔记的协作者\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"适用于所有可以看到这个笔记的人\",\n    \"editor/note-control/enter-parent-note-id\": \"输入上一级笔记的 ID\",\n    \"editor/note-control/attach-note-failure\": \"附加笔记失败\",\n    \"editor/note-control/unattach-note-failure\": \"取消附加笔记失败\",\n    \"editor/collaborator-hint\": \" - 他们将会看到这个笔记\",\n    \"editor/shareable-link-hint\":\n      \"所有拥有这个链接的人无需登录即可查看/修改这个笔记\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"创建备份\",\n    \"editor/backups-control/delete-this-backup\": \"删除这个备份\",\n    \"editor/backups-control/create-backup-failure\": \"创建备份失败\",\n    \"editor/backups-control/backup-created\": \"备份已创建\",\n    \"editor/backups-control/delete-backup-failure\": \"删除备份失败\",\n    \"editor/backups-control/backup-deleted\": \"备份已删除\",\n    \"editor/backups-control/cloud-version\": \"云端版本\",\n    \"editor/backups-control/backup-name\": \"备份名称\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"设置协作者角色失败\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"添加协作者失败\",\n    \"editor/collaborators-control/collaborator-removed\": \"协作者已删除\",\n    \"editor/collaborators-control/collaborator-added\": \"协作者已添加\",\n    \"editor/collaborators-control/can-view\": \"可以浏览\",\n    \"editor/collaborators-control/can-edit\": \"可以编辑\",\n    \"editor/collaborators-control/can-administrate\": \"可以管理员管理\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"插入图片\",\n    \"editor/toolbar/upload-local-images\": \"上传本地图片\",\n    \"editor/toolbar/capture-webpage\": \"截取整个网页\",\n    \"editor/toolbar/insert-clock\": \"插入时钟\",\n    \"editor/toolbar/insert-emoji\": \"插入 Emoji\",\n    \"editor/toolbar/insert-media\": \"插入媒体\",\n    \"editor/toolbar/insert-audio\": \"插入音频\",\n    \"editor/toolbar/netease-music\": \"网易云音乐\",\n    \"editor/toolbar/insert-video\": \"插入视频\",\n    \"editor/toolbar/insert-youtube\": \"插入 Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"插入 Bilibili\",\n    \"editor/toolbar/insert-slide\": \"插入幻灯片\",\n    \"editor/toolbar/insert-ocr\": \"插入 OCR\",\n    \"editor/toolbar/insert-kanban\": \"插入看板\",\n    \"editor/toolbar/insert-abc-notation\": \"插入 ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"插入一级标题\",\n    \"editor/toolbar/insert-header-2\": \"插入二级标题\",\n    \"editor/toolbar/insert-header-3\": \"插入三级标题\",\n    \"editor/toolbar/insert-header-4\": \"插入四级标题\",\n    \"editor/toolbar/insert-header-5\": \"插入五级标题\",\n    \"editor/toolbar/insert-header-6\": \"插入六级标题\",\n    \"editor/toolbar/bold\": \"粗体\",\n    \"editor/toolbar/italic\": \"斜体\",\n    \"editor/toolbar/strikethrough\": \"删除线\",\n    \"editor/toolbar/insert-inline-code\": \"插入行内代码\",\n    \"editor/toolbar/insert-blockquote\": \"插入引用\",\n    \"editor/toolbar/insert-unordered-list\": \"插入无序列表\",\n    \"editor/toolbar/insert-ordered-list\": \"插入有序列表\",\n    \"editor/toolbar/insert-link\": \"插入链接\",\n    \"editor/toolbar/insert-table\": \"插入表格\",\n    \"editor/toolbar/insert-comment\": \"插入交叉笔记云评论挂件\",\n    \"editor/toolbar/insert-github-gist\": \"插入 GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"标签已被添加\",\n    \"editor/note-control/tag-deleted\": \"标签已被删除\",\n    \"editor/note-control/set-note-visibility-failure\": \"设置笔记可见度失败\",\n    \"editor/note-control/note-visibility-updated\": \"笔记可见度已更新\",\n    \"editor/note-control/set-author-visibility-failure\": \"设置作者可见度失败\",\n    \"editor/note-control/author-visibility-updated\": \"作者可见度已更新\",\n    \"editor/note-control/editor-mode\": \"编辑器模式\",\n    \"editor/note-control/source-code\": \"源代码\",\n    \"editor/note-control/preview\": \"预览\",\n    \"editor/note-control/split-view\": \"分栏\",\n    \"editor/note-control/pin-preview\": \"固定预览到右侧\",\n    \"editor/note-control/display-modification-records\": \"显示修改记录\",\n    \"editor/note-control/note-visibility\": \"笔记可见度\",\n    \"editor/note-control/author-visibility\": \"作者可见度\",\n    \"editor/note-control/shareable-link\": \"可分享的链接\",\n    \"editor/note-control/copy-to-clipboard\": \"复制到粘贴板\",\n    \"editor/note-control/link-to-preview\": \"到预览的链接\",\n    \"editor/note-control/link-to-editor\": \"到编辑器的链接\",\n    \"editor/note-control/attach-to-note\": \"附加到笔记\",\n    \"editor/note-control/source-added\": \"链接已被添加\",\n    \"editor/note-control/source-deleted\": \"链接已被删除\",\n    \"editor/note-control/invalid-note-source\": \"无效的链接\",\n    \"editor/note-control/add-note-source\": \"添加相关的链接\",\n    \"editor/note-control/note-source-hint\":\n      \"所有相同链接的笔记将会被聚集到一起\",\n    \"editor/note-control/enter-note-source\": \"输入链接\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"这个笔记是私有的\",\n    \"avatar-panel/this-note-is-public\": \"这个笔记是公开可见的\",\n    \"avatar-panel/this-note-is-friends-only\": \"这个笔记仅对好友可见\",\n    \"avatar-panel/you-are-anonymous\": \"你是匿名的\",\n\n    // FileExporter\n    \"file-exporter/name\": \"文件导出\",\n    \"file-exporter/orientation\": \"方向\",\n    \"file-exporter/portrait\": \"竖直\",\n    \"file-exporter/landscape\": \"水平\",\n    \"file-exporter/paper-size\": \"纸张大小\",\n    \"file-exporter/unit\": \"单位\",\n    \"file-exporter/margin-top\": \"上边距\",\n    \"file-exporter/margin-bottom\": \"下边距\",\n    \"file-exporter/margin-left\": \"左边距\",\n    \"file-exporter/margin-right\": \"右边距\",\n\n    // Utils\n    \"utils/uploading-image\": \"正在上传图片...\",\n    \"utils/upload-image-failure\": \"上传图片失败\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"回复了你在\",\n    \"notification/'s-note\": \"的笔记 \",\n    // * NoteReactionNotification\n    \"notification/added\": \" 添加了\",\n    \"notification/to-your-note\": \"到你的笔记\",\n    \"notification/add-you-as\": \"添加了你作为\",\n    \"notification/of-note\": \"到笔记\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"添加标签失败\",\n    \"notification/suggested-to-add-tag\": \"建议添加标签\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"开始关注了你\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"收藏了你的笔记\",\n    \"notification/view-more-notifications\": \"查看更多的消息\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"请稍等 ...\",\n    \"github-oauth/link-with-github-account-failure\": \"无法连接到 GitHub 账号\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"使用 GitHub 账号登录失败\",\n    \"github-oauth/first-time-sign-in\": \"看上去这是你第一次使用 GitHub 账号登录\",\n    \"github-oauth/first-time-sign-in-small\": \"请完成下方的注册\",\n\n    // Widgets\n    \"widget/autoplay\": \"自动播放\",\n    \"widget/controls\": \"控制器\",\n    \"widget/loop\": \"循环\",\n    \"widget/muted\": \"静音\",\n    \"widget/creating-widget\": \"正在创建挂件\",\n    \"widget/loading-widget\": \"正在读取挂件\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"在此由衷感谢 sm.ms 提供免费的图床服务。\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"你的浏览器不支持音频 audio 元素\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"在这里输入音频文件源链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"你的浏览器不支持视频 video 元素\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"错误：仅支持 https://www.bilibili.com/video/av79126732 这样的链接\",\n    \"widget/crossnote.youtube/error_message\":\n      \"错误：仅支持 https://www.youtube.com/watch?v=MmB9b5njVbA 这样的链接\",\n    \"widget/crossnote.auth/welcome\": \"欢迎使用交叉笔记\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"没有帐号？咱们来创建一个😉！\",\n    \"widget/crossnote.auth/forgot_password\": \"忘记你的密码了 😣？\",\n    \"widget/crossnote.auth/failed_to_send_code\": \"发送验证码到邮箱失败\",\n    \"widget/crossnote.auth/verification_code_sent\": \"验证码已经被发送到 \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"重置密码失败\",\n    \"widget/crossnote.auth/password_reset\": \"你的密码已被重置\",\n    \"widget/crossnote.auth/password-mismatch\": \"密码不一致\",\n    \"widget/crossnote.auth/hello\": \"你好，\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"输入验证码\",\n    \"widget/crossnote.auth/get-code\": \"获取验证码\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \"使用 GitHub 账号登录\",\n    \"widget/crossnote.auth/already-have-an-account\": \"已有帐号？\",\n    \"widget/crossnote.auth/reset-password\": \"重置密码\",\n    \"widget/crossnote.auth/Or\": \"或者\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili 视频链接\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"在这里插入 Bilibili 视频的链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.image/image-helper\": \"图片助手\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"在这里输入图片链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"点击这里来选择图片文件\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"输入网易云音乐歌曲数字 ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"在这里输入视频文件源链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.video/poster-url\": \"封面图片链接（可选填）\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"在这里输入封面图片链接。\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube 视频链接\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"在这里插入 Youtube 视频的链接，然后按 '回车' 键来插入\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - 光学字符识别\",\n    \"widget/crossnote.ocr/local-image\": \"本地图片\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"识别以下语言的文字\",\n    \"widget/crossnote.ocr/start-ocr\": \"开始文字识别\",\n    \"widget/crossnote.ocr/extra-settings\": \"额外设定\",\n    \"widget/crossnote.ocr/grayscale\": \"灰度\",\n    \"widget/crossnote.kanban/add-column\": \"添加新的列\",\n    \"widget/crossnote.github_gist/title\": \"嵌入一个 GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"输入 GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"正在读取 tesseract 核心\",\n    \"tesseract/initializing tesseract\": \"正在初始化 tesseract\",\n    \"tesseract/initialized tesseract\": \"已初始化 tesseract\",\n    \"tesseract/loading language traineddata\": \"正在读取语言训练数据\",\n    \"tesseract/loaded language traineddata\": \"已读取语言训练数据\",\n    \"tesseract/initializing api\": \"正在初始化程序接口\",\n    \"tesseract/initialized api\": \"已初始化程序接口\",\n    \"tesseract/recognizing text\": \"正在识别文字\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"回复给这个用户\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"给这条评论添加反应\",\n    \"widget/crossnote.comment/edit-this-message\": \"编辑这条评论\",\n    \"widget/crossnote.comment/modified-comment\": \"编辑过的评论\",\n    \"widget/crossnote.comment/post-comment-failure\": \"发送评论失败\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"取消订阅评论\",\n    \"widget/crossnote.comment/subscribe-info\": \"订阅评论\",\n    \"widget/crossnote.comment/view-more-comments\": \"查看更多的评论\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"你确定要删除这个笔记？\",\n    \"delete-note-dialog/subtitle\": \"你无法撤销此操作。\",\n    \"delete-directory-dialog/title\": \"你确定要删除这个目录？\",\n    \"delete-directory-dialog/subtitle\":\n      \"所有子目录以及笔记也将会被删除。你无法撤销此操作。\",\n    \"delete-tag-dialog/title\": \"你确定要删除这个标签？\",\n    \"delete-tag-dialog/subtitle\": \"所有子标签也将会被删除。你无法撤销此操作。\",\n    \"add-notebook-dialog/disclaimer\":\n      \"所有笔记本的数据将只会被保存于浏览器本地以供离线使用。我们不会上传任何你的笔记本数据到我们的服务器。\",\n    \"edit-image-dialog/title\": \"编辑图片\",\n    \"edit-image-dialog/image-url\": \"图片 URL\",\n    \"edit-image-dialog/image-title\": \"图片标题\",\n    \"edit-image-dialog/image-alt-text\": \"图片替代文本\",\n    \"language-selector-dialog/subtitle\": \"请选择偏好语言\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"添加到主屏幕\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"这个网站拥有软件功能。将它添加到你的主屏幕来开启全屏以及离线使用功能。\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1) 点击 '分享' 按钮\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\": \"2) 点击 '添加到主屏幕'\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"我们目前仅支持从 GitHub、GitLab、Gitea 或码云的公共仓库发布笔记本。我们只收集 README.md 文件数据。\",\n    \"publish-notebook/disclaimer-2\":\n      \"请通过在远程仓库中向 README.md 添加以下 front-matter 来声明笔记本的所有权：\",\n\n    // git\n    \"git/status/ignored\": \"已忽略\",\n    \"git/status/unmodified\": \"未修改\",\n    \"git/status/*modified\": \"*已修改\",\n    \"git/status/*deleted\": \"*已删除\",\n    \"git/status/*added\": \"*新增\",\n    \"git/status/absent\": \"缺失\",\n    \"git/status/modified\": \"已修改\",\n    \"git/status/deleted\": \"已删除\",\n    \"git/status/added\": \"新增\",\n    \"git/status/*unmodified\": \"*未修改\",\n    \"git/status/*absent\": \"*缺失\",\n    \"git/status/*undeleted\": \"*未删除\",\n  },\n};\n","export const zhTW = {\n  translation: {\n    \"title/Crossnote\": \"交叉筆記\",\n    \"search/notes\": \"搜尋筆記\",\n    \"search/notebooks\": \"搜尋筆記本\",\n    \"search/attachments\": \"搜尋附件\",\n\n    // Account\n    \"account/Anonymous\": \"匿名\",\n    \"account/anonymous\": \"匿名\",\n\n    // General\n    \"general/go-back\": \"回退\",\n    \"general/sending\": \"發送中\",\n    \"general/send\": \"發送\",\n    \"general/cancel\": \"取消\",\n    \"general/add\": \"添加\",\n    \"general/adding\": \"正在添加\",\n    \"general/backed-up-at\": \"備份於\",\n    \"general/created-at\": \"創建於\",\n    \"general/modified-at\": \"修改於\",\n    \"general/interacted-at\": \"互動於\",\n    \"general/date-created\": \"創建時間\",\n    \"general/date-modified\": \"修改時間\",\n    \"general/date-interacted\": \"互動時間\",\n    \"general/title\": \"標題\",\n    \"general/saved-at\": \"保存於\",\n    \"general/loading\": \"讀取中 ...\",\n    \"general/loading-notifications\": \"正在讀取消息 ...\",\n    \"general/failed-to-set\": \"設置失敗\",\n    \"general/update\": \"更新\",\n    \"general/updated\": \"已更新\",\n    \"general/updating\": \"正在更新\",\n    \"general/close\": \"關閉\",\n    \"general/Note\": \"筆記\",\n    \"general/notes\": \"筆記\",\n    \"general/Settings\": \"設置\",\n    \"general/Collaborators\": \"協作者\",\n    \"general/collaborators\": \"協作者\",\n    \"general/Backups\": \"備份\",\n    \"general/backups\": \"備份\",\n    \"general/Discussion\": \"討論\",\n    \"general/discussion\": \"討論\",\n    \"general/Notifications\": \"消息\",\n    \"general/Username\": \"用戶名\",\n    \"general/Email\": \"郵箱\",\n    \"general/Password\": \"密碼\",\n    \"general/confirm-password\": \"再次確認密碼\",\n    \"general/Continue\": \"下一步\",\n    \"general/enter-username\": \"輸入用戶名\",\n    \"general/vickymd\": \"編輯\",\n    \"general/tags\": \"標籤\",\n    \"general/add-a-tag\": \"添加一個標籤\",\n    \"general/private\": \"私有\",\n    \"general/public\": \"公開可見\",\n    \"general/friends-only\": \"僅好友可見\",\n    \"general/anonymous\": \"匿名\",\n    \"general/onymous\": \"公開署名\",\n    \"general/Tag\": \"標籤\",\n    \"general/no-tags\": \"沒有標籤\",\n    \"general/Directory\": \"目錄\",\n    \"general/Untitled\": \"無標題\",\n    \"general/untitled\": \"無標題\",\n    \"general/Unknown\": \"未知\",\n    \"general/unknown\": \"未知\",\n    \"general/Agree\": \"同意\",\n    \"general/Disagree\": \"不同意\",\n    \"general/Print\": \"打印\",\n    \"general/Share\": \"分享\",\n    \"Editor\": \"編輯者\",\n    \"EDITOR\": \"編輯者\",\n    \"Viewer\": \"閱讀者\",\n    \"VIEWER\": \"閱讀者\",\n    \"Admin\": \"管理員\",\n    \"ADMIN\": \"管理員\",\n    \"ARCHIVED\": \"歸檔的筆記\",\n    \"ATTACHED NOTES\": \"附加的筆記\",\n    \"DELETED\": \"刪除的筆記\",\n    \"PINNED\": \"置頂\",\n    \"OTHERS\": \"其它\",\n    \"PUBLIC NOTES\": \"公開的筆記\",\n    \"FOLLOWINGS' NOTES\": \"關注人的筆記\",\n    \"SHARED WITH ME\": \"分享給我的\",\n    \"BOOKMARKS\": \"收藏\",\n    \"MY TAGS\": \"我的標籤\",\n    \"general/enter-fullscreen-mode\": \"進入全屏模式\",\n    \"general/enter-presentation-mode\": \"進入幻燈片模式\",\n    \"general/math-preview\": \"數學預覽\",\n    \"general/this-note-is-empty\": \"這個筆記沒有內容\",\n    \"general/this-notebook-is-empty\": \"這個筆記本沒有內容\",\n    \"general/nothing-here\": \"這裡什麼都沒有\",\n    \"general/no-notes-found\": \"沒有找到其它的筆記\",\n    \"general/no-more-attachments-found\": \"没有找到其它的附件\",\n    \"general/no-more-notebooks-found\": \"沒有找到其它的筆記本\",\n    \"general/no-notifications-found\": \"沒有找到其它的消息\",\n    \"general/clear-all\": \"清空所有\",\n    \"general/Save\": \"保存\",\n    \"general/Delete\": \"刪除\",\n    \"general/Follow\": \"關注\",\n    \"general/Following\": \"正在關注\",\n    \"general/Unfollow\": \"取消關注\",\n    \"general/my-notes\": \"我的筆記\",\n    \"general/public-notes\": \"公開的筆記\",\n    \"general/followings-notes\": \"關注人的筆記\",\n    \"general/shared-with-me\": \"分享給我的\",\n    \"general/Bookmarks\": \"收藏\",\n    \"general/Archive\": \"歸檔\",\n    \"general/Trash\": \"廢紙簍\",\n    \"general/new-note\": \"新的筆記\",\n    \"general/new-attachment\": \"新的附件\",\n    \"general/profile-updated\": \"用戶信息已更新\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"音頻\",\n    \"general/Video\": \"視頻\",\n    \"general/source-url\": \"源鏈接\",\n    \"general/sign-in\": \"登錄\",\n    \"general/sign-up\": \"註冊\",\n    \"general/Link\": \"鏈接\",\n    \"general/Upload\": \"上傳\",\n    \"general/Uploading\": \"正在上傳\",\n    \"general/clicks\": \"點擊\",\n    \"general/Processing\": \"正在處理...\",\n    \"general/please-wait\": \"請稍候...\",\n    \"general/please-sign-in-first\": \"請先登錄\",\n    \"general/Languages\": \"語言\",\n    \"general/track\": \"跟蹤\",\n    \"general/Publish\": \"發布\",\n    \"general/Unpublish\": \"取消發佈\",\n    \"general/Open\": \"開啟\",\n    \"general/Download\": \"下載\",\n    \"general/Configure\": \"設定\",\n    \"general/Update\": \"更新\",\n    \"general/empty\": \"空的\",\n    \"general/Explore\": \"探索\",\n    \"general/Notebooks\": \"筆記本\",\n    \"general/add-a-notebook\": \"添加一個筆記本\",\n    \"general/add-a-note\": \"添加一个筆記\",\n    \"general/add-an-attachment\": \"添加一个附件\",\n    \"general/configure-the-notebook\": \"設置筆記本\",\n    \"general/publish-your-notebook\": \"發佈你的筆記本\",\n    \"general/notebook-name\": \"筆記本名稱\",\n    \"general/git-repository\": \"git 倉庫\",\n    \"general/clone-a-git-repository\": \"克隆壹個 Git 倉庫\",\n    \"general/optional\": \"可選\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"分支\",\n    \"general/remember-username-and-password\": \"記住用戶名和密碼\",\n    \"general/stored-locally\": \"儲存於本地\",\n    \"general/cors-proxy\": \"CORS 代理\",\n    \"general/why-cors-proxy\": \"為什麼需要 CORS 代理？\",\n    \"general/today\": \"今天\",\n    \"general/todo\": \"待辦事項\",\n    \"general/graph-view\": \"圖形視圖\",\n    \"general/wiki\": \"維琪\",\n    \"general/tagged\": \"標籤\",\n    \"general/untagged\": \"未標籤\",\n    \"general/encrypt\": \"加密\",\n    \"general/encrypted\": \"已加密\",\n    \"general/decrypt\": \"解密\",\n    \"general/conflicted\": \"衝突\",\n    \"general/attachments\": \"附件\",\n    \"general/Pin\": \"置頂\",\n    \"general/Encryption\": \"加密\",\n    \"general/Fullscreen\": \"全屏\",\n    \"general/change-file-path\": \"更改檔路徑\",\n    \"general/create-a-copy\": \"建立複本\",\n    \"general/restore-checkout\": \"恢復 (git checkout)\",\n    \"general/download-pull\": \"下載 (git pull)\",\n    \"general/upload-push\": \"上傳 (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"解除這個筆記上的加密\",\n    \"general/encrypt-this-note-with-password\": \"通過密碼加密這個筆記\",\n    \"general/disable-encryption\": \"解除加密\",\n    \"general/decrypt-this-note\": \"解密這個筆記\",\n    \"general/upload-the-profile\": \"上傳賬戶信息\",\n    \"general/commit-message\": \"提交說明\",\n    \"general/upload-notebook\": \"上傳筆記本\",\n    \"general/Comments\": \"評論\",\n    \"general/Source\": \"源\",\n    \"general/Description\": \"描述\",\n    \"general/Edit\": \"編輯\",\n    \"general/Rename\": \"重命名\",\n    \"general/rename-directory\": \"重命名目錄\",\n    \"general/delete-directory\": \"删除目錄\",\n    \"general/rename-tag\": \"重命名標籤\",\n    \"general/delete-tag\": \"删除標籤\",\n    \"general/notebook-updates-found\": \"發現筆記本更新\",\n    \"general/update-the-notebook\": \"更新這個筆記本\",\n    \"general/check-notebook-updates-periodically\": \"週期性地檢查筆記本更新\",\n    \"general/minutes\": \"分鐘\",\n    \"general/hard-reset\": \"硬重設\",\n    \"general/Default\": \"預設\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"遞減\",\n    \"general/Asc\": \"遞增\",\n    \"general/pin-the-note\": \"置頂這個筆記\",\n    \"general/unpin-the-note\": \"取消置頂這個筆記\",\n    \"general/add-to-quick-access\": \"添加到快速訪問\",\n    \"general/remove-from-quick-access\": \"從快速訪問中移除\",\n    \"general/open-folder\": \"打開文件夾\",\n    \"general/open-a-local-folder\": \"打開壹個本地文件夾\",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \"妳的瀏覽器不支持打開本地文件夾\",\n    \"general/refresh\": \"刷新\",\n\n    // Error\n    \"error/authentication-failed\": \"認証失敗\",\n    \"error/failed-to-upload-notebook\": \"上傳筆記本失敗\",\n    \"error/failed-to-download-notebook\": \"下載筆記本失敗\",\n    \"error/notebook-already-exists\": \"筆記本已經存在\",\n    \"error/invalid-git-url-prefix\": \"無效的 git URL 前綴\",\n    \"error/please-resolve-conflicts\": \"請先解決沖突\",\n    \"error/failed-to-disable-encryption\": \"解除加密失敗\",\n    \"error/decryption-failed\": \"解密失敗\",\n    \"error/failed-to-change-file-path\": \"更改文件路徑失敗\",\n    \"error/failed-to-create-widget\": \"創建掛件失敗\",\n    \"error/failed-to-load-widget\": \"讀取掛件失敗\",\n    \"error/failed-to-update-the-notebook\": \"更新筆記本失敗\",\n    \"error/failed-to-unpublish-the-notebook\": \"取消發佈筆記本失敗\",\n    \"error/failed-to-publish-notebook\": \"發佈筆記本失敗\",\n\n    // Success\n    \"success/notebook-uploaded\": \"筆記本已上傳\",\n    \"success/notebook-downloaded\": \"筆記本已下載\",\n\n    // Info\n    \"info/downloading-notebook\": \"正在下載筆記本\",\n\n    // Note\n    \"note/unarchive-note\": \"取消歸檔\",\n    \"note/archive-note\": \"歸檔\",\n    \"note/delete-forever\": \"永久刪除\",\n    \"note/delete-note\": \"刪除\",\n    \"note/restore-note\": \"恢復\",\n    \"note/report-note\": \"舉報\",\n    \"note/open-in-crossnote-website\": \"在交叉筆記網站中打開\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"發送建議失敗\",\n    \"note-tags/suggestion-sent\": \"建議已發送\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"給這個筆記建議一個標籤\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"關注一個標籤\",\n\n    // Notifications\n    \"notifications/refresh\": \"刷新來查看新的消息\",\n    \"notifications/new-version-available\": \"發現了新版本的交叉筆記!\",\n\n    // Settings\n    \"settings/about-this-project\": \"關於這個項目\",\n    \"settings/issues-and-feature-requests\": \"發現左問題或者有功能請求?\",\n    \"settings/uploading-cover-image\": \"上傳封面圖片\",\n    \"settings/upload-image-failure\": \"上傳圖片失敗\",\n    \"settings/Cover\": \"封面圖片\",\n    \"settings/enter-cover-image-url\": \"輸入封面圖片鏈接\",\n    \"settings/upload-image\": \"上傳圖片\",\n    \"settings/Avatar\": \"頭像\",\n    \"settings/enter-avatar-image-url\": \"輸入頭像圖片鏈接\",\n    \"settings/Name\": \"名字\",\n    \"settings/enter-name\": \"輸入你的名字（這個不是你的用戶名）\",\n    \"settings/editor-cursor-color\": \"編輯器光標顏色\",\n    \"settings/hello\": \"你好，\",\n    \"settings/world\": \"世界！\",\n    \"settings/linked-with-github-account\": \"已關聯 GitHub 帳號\",\n    \"settings/link-with-github-account\": \"關聯到 GitHub 帳號\",\n    \"settings/log-out\": \"登出\",\n    \"settings/author-name\": \"作者姓名\",\n    \"settings/author-email\": \"作者郵箱\",\n    \"settings/theme\": \"主題\",\n    \"settings/created-cloud-widgets-count\": \"建立的雲掛件數量\",\n    \"settings/key-map\": \"鍵盤對應\",\n\n    // Preview\n    \"preview/attach-a-note\": \"附加一個筆記\",\n    \"preview/crossnote-untitled\": \"交叉筆記 - 無標題\",\n    \"preview/edit-this-note\": \"編輯這個筆記\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"關注\",\n    \"profile-card/followers\": \"粉絲\",\n    \"profile-card/Followings\": \"關注\",\n    \"profile-card/Followers\": \"粉絲\",\n    \"profile-card/notes\": \"筆記\",\n    \"profile-card/follow-user-failure\": \"無法關注這個用戶\",\n    \"profile-card/followed-user\": \"關注了這個用戶\",\n    \"profile-card/unfollow-user-failure\": \"無法取消關注這個用戶\",\n    \"profile-card/unfollowed-user\": \"取消關注了這個用戶\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"顯示附加的筆記\",\n    \"interaction-panel/add-comment\": \"添加評論\",\n    \"interaction-panel/add-reaction\": \"添加表情\",\n\n    // Editor\n    \"editor/loading-your-note\": \"正在讀取你的筆記...\",\n    \"editor/sync-failure\": \"同步失敗... 請重啟網頁\",\n    \"editor/saving\": \"正在保存...\",\n    \"editor/save-failure\": \"保存失敗\",\n    \"editor/saved\": \"已保存\",\n    \"editor/update-note-failure\": \"更新筆記失敗\",\n    \"editor/placeholder\": \"#  你好 😀 輸入 '/' 打開命令\",\n    \"editor/ln\": \"行\",\n    \"editor/col\": \"列\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"允許讀者向你建議筆記的標籤\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"允許讀者在這個筆記下附加筆記\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"繼承上一級筆記的協作者列表\",\n    \"editor/note-control/note-visibility-hint\":\n      \"所有的協作者也將能夠看到這個筆記\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"適用於你以及所有可編輯或可管理這個筆記的協作者\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"適用於所有可以看到這個筆記的人\",\n    \"editor/note-control/enter-parent-note-id\": \"輸入上一級筆記的 ID\",\n    \"editor/note-control/attach-note-failure\": \"附加筆記失敗\",\n    \"editor/note-control/unattach-note-failure\": \"取消附加筆記失敗\",\n    \"editor/collaborator-hint\": \" - 他們將會看到這個筆記\",\n    \"editor/shareable-link-hint\":\n      \"所有擁有這個鏈接的人無需登錄即可查看/修改這個筆記\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"創建備份\",\n    \"editor/backups-control/delete-this-backup\": \"刪除這個備份\",\n    \"editor/backups-control/create-backup-failure\": \"創建備份失敗\",\n    \"editor/backups-control/backup-created\": \"備份已創建\",\n    \"editor/backups-control/delete-backup-failure\": \"刪除備份失敗\",\n    \"editor/backups-control/backup-deleted\": \"備份已刪除\",\n    \"editor/backups-control/cloud-version\": \"雲端版本\",\n    \"editor/backups-control/backup-name\": \"備份名稱\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"設置協作者角色失敗\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"添加協作者失敗\",\n    \"editor/collaborators-control/collaborator-removed\": \"協作者已刪除\",\n    \"editor/collaborators-control/collaborator-added\": \"協作者已添加\",\n    \"editor/collaborators-control/can-view\": \"可以瀏覽\",\n    \"editor/collaborators-control/can-edit\": \"可以編輯\",\n    \"editor/collaborators-control/can-administrate\": \"可以管理員管理\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"插入圖片\",\n    \"editor/toolbar/upload-local-images\": \"上傳本地圖片\",\n    \"editor/toolbar/capture-webpage\": \"截取整個網頁\",\n    \"editor/toolbar/insert-clock\": \"插入時鐘\",\n    \"editor/toolbar/insert-emoji\": \"插入 Emoji\",\n    \"editor/toolbar/insert-media\": \"插入媒體\",\n    \"editor/toolbar/insert-audio\": \"插入音頻\",\n    \"editor/toolbar/netease-music\": \"網易雲音樂\",\n    \"editor/toolbar/insert-video\": \"插入視頻\",\n    \"editor/toolbar/insert-youtube\": \"插入 Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"插入 Bilibili\",\n    \"editor/toolbar/insert-slide\": \"插入幻燈片\",\n    \"editor/toolbar/insert-ocr\": \"插入 OCR\",\n    \"editor/toolbar/insert-kanban\": \"插入看板\",\n    \"editor/toolbar/insert-abc-notation\": \"插入 ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"插入一級標題\",\n    \"editor/toolbar/insert-header-2\": \"插入二級標題\",\n    \"editor/toolbar/insert-header-3\": \"插入三級標題\",\n    \"editor/toolbar/insert-header-4\": \"插入四級標題\",\n    \"editor/toolbar/insert-header-5\": \"插入五級標題\",\n    \"editor/toolbar/insert-header-6\": \"插入六級標題\",\n    \"editor/toolbar/bold\": \"粗體\",\n    \"editor/toolbar/italic\": \"斜體\",\n    \"editor/toolbar/strikethrough\": \"刪除線\",\n    \"editor/toolbar/insert-inline-code\": \"插入行內代碼\",\n    \"editor/toolbar/insert-blockquote\": \"插入引用\",\n    \"editor/toolbar/insert-unordered-list\": \"插入無序列表\",\n    \"editor/toolbar/insert-ordered-list\": \"插入有序列表\",\n    \"editor/toolbar/insert-link\": \"插入鏈接\",\n    \"editor/toolbar/insert-table\": \"插入表格\",\n    \"editor/toolbar/insert-comment\": \"插入交叉筆記雲評論掛件\",\n    \"editor/toolbar/insert-github-gist\": \"插入 GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"標籤已被添加\",\n    \"editor/note-control/tag-deleted\": \"標籤已被刪除\",\n    \"editor/note-control/set-note-visibility-failure\": \"設置筆記可見度失敗\",\n    \"editor/note-control/note-visibility-updated\": \"筆記可見度已更新\",\n    \"editor/note-control/set-author-visibility-failure\": \"設置作者可見度失敗\",\n    \"editor/note-control/author-visibility-updated\": \"作者可見度已更新\",\n    \"editor/note-control/editor-mode\": \"編輯器模式\",\n    \"editor/note-control/source-code\": \"源代碼\",\n    \"editor/note-control/preview\": \"預覽\",\n    \"editor/note-control/split-view\": \"分欄\",\n    \"editor/note-control/pin-preview\": \"固定預覽到右側\",\n    \"editor/note-control/display-modification-records\": \"顯示修改記錄\",\n    \"editor/note-control/note-visibility\": \"筆記可見度\",\n    \"editor/note-control/author-visibility\": \"作者可見度\",\n    \"editor/note-control/shareable-link\": \"可分享的鏈接\",\n    \"editor/note-control/copy-to-clipboard\": \"複製到粘貼板\",\n    \"editor/note-control/link-to-preview\": \"到預覽的鏈接\",\n    \"editor/note-control/link-to-editor\": \"到編輯器的鏈接\",\n    \"editor/note-control/attach-to-note\": \"附加到筆記\",\n    \"editor/note-control/source-added\": \"鏈接已被添加\",\n    \"editor/note-control/source-deleted\": \"鏈接已被刪除\",\n    \"editor/note-control/invalid-note-source\": \"無效的鏈接\",\n    \"editor/note-control/add-note-source\": \"添加相關的鏈接\",\n    \"editor/note-control/note-source-hint\":\n      \"所有相同鏈接的筆記將會被聚集到壹起\",\n    \"editor/note-control/enter-note-source\": \"輸入鏈接\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"這個筆記是私有的\",\n    \"avatar-panel/this-note-is-public\": \"這個筆記是公開可見的\",\n    \"avatar-panel/this-note-is-friends-only\": \"這個筆記僅對好友可見\",\n    \"avatar-panel/you-are-anonymous\": \"你是匿名的\",\n\n    // FileExporter\n    \"file-exporter/name\": \"文件導出\",\n    \"file-exporter/orientation\": \"方向\",\n    \"file-exporter/portrait\": \"豎直\",\n    \"file-exporter/landscape\": \"水平\",\n    \"file-exporter/paper-size\": \"紙張大小\",\n    \"file-exporter/unit\": \"單位\",\n    \"file-exporter/margin-top\": \"上邊距\",\n    \"file-exporter/margin-bottom\": \"下邊距\",\n    \"file-exporter/margin-left\": \"左邊距\",\n    \"file-exporter/margin-right\": \"右邊距\",\n\n    // Utils\n    \"utils/uploading-image\": \"正在上傳圖片...\",\n    \"utils/upload-image-failure\": \"上傳圖片失敗\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"回復了你在\",\n    \"notification/'s-note\": \"的筆記 \",\n    // * NoteReactionNotification\n    \"notification/added\": \" 添加了\",\n    \"notification/to-your-note\": \"到你的筆記\",\n    \"notification/add-you-as\": \"添加了你作為\",\n    \"notification/of-note\": \"到筆記\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"添加標籤失敗\",\n    \"notification/suggested-to-add-tag\": \"建議添加標籤\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"開始關注了你\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"收藏了你的筆記\",\n    \"notification/view-more-notifications\": \"查看更多的消息\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"請稍等 ...\",\n    \"github-oauth/link-with-github-account-failure\": \"無法連接到 GitHub 賬號\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"使用 GitHub 賬號登錄失敗\",\n    \"github-oauth/first-time-sign-in\": \"看上去這是你第一次使用 GitHub 賬號登錄\",\n    \"github-oauth/first-time-sign-in-small\": \"請完成下方的註冊\",\n\n    // Widgets\n    \"widget/autoplay\": \"自動播放\",\n    \"widget/controls\": \"控制器\",\n    \"widget/loop\": \"循環\",\n    \"widget/muted\": \"靜音\",\n    \"widget/creating-widget\": \"正在創建掛件\",\n    \"widget/loading-widget\": \"正在讀取掛件\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"在此由衷感謝 sm.ms 提供免費的圖床服務。\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"你的瀏覽器不支持音頻 audio 元素\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"在這裡輸入音頻文件源鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"你的瀏覽器不支持視頻 video 元素\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"錯誤：僅支持 https://www.bilibili.com/video/av79126732 這樣的鏈接\",\n    \"widget/crossnote.youtube/error_message\":\n      \"錯誤：僅支持 https://www.youtube.com/watch?v=MmB9b5njVbA 這樣的鏈接\",\n    \"widget/crossnote.auth/welcome\": \"歡迎使用交叉筆記\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"沒有帳號？咱們來創建一個😉！\",\n    \"widget/crossnote.auth/forgot_password\": \"忘記你的密碼了 😣？\",\n    \"widget/crossnote.auth/failed_to_send_code\": \"發送驗證碼到郵箱失敗\",\n    \"widget/crossnote.auth/verification_code_sent\": \"驗證碼已經被發送到 \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"重置密碼失敗\",\n    \"widget/crossnote.auth/password_reset\": \"你的密碼已被重置\",\n    \"widget/crossnote.auth/password-mismatch\": \"密碼不一致\",\n    \"widget/crossnote.auth/hello\": \"你好，\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"輸入驗證碼\",\n    \"widget/crossnote.auth/get-code\": \"獲取驗證碼\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \"使用 GitHub 賬號登錄\",\n    \"widget/crossnote.auth/already-have-an-account\": \"已有帳號？\",\n    \"widget/crossnote.auth/reset-password\": \"重置密碼\",\n    \"widget/crossnote.auth/Or\": \"或者\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili 視頻鏈接\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"在這裡插入 Bilibili 視頻的鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.image/image-helper\": \"圖片助手\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"在這裡輸入圖片鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"點擊這裡來選擇圖片文件\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"輸入網易雲音樂歌曲數字 ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"在這裡輸入視頻文件源鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.video/poster-url\": \"封面圖片鏈接（可選填）\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"在這裡輸入封面圖片鏈接。\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube 視頻鏈接\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"在這裡插入 Youtube 視頻的鏈接，然後按 '回車' 鍵來插入\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - 光學字元識別\",\n    \"widget/crossnote.ocr/local-image\": \"本地圖片\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"識別以下語言的文字\",\n    \"widget/crossnote.ocr/start-ocr\": \"開始文字識別\",\n    \"widget/crossnote.ocr/extra-settings\": \"額外設定\",\n    \"widget/crossnote.ocr/grayscale\": \"灰度\",\n    \"widget/crossnote.kanban/add-column\": \"添加新的列\",\n    \"widget/crossnote.github_gist/title\": \"內嵌入 GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"輸入 GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"正在讀取 tesseract 核心\",\n    \"tesseract/initializing tesseract\": \"正在初始化 tesseract\",\n    \"tesseract/initialized tesseract\": \"已初始化 tesseract\",\n    \"tesseract/loading language traineddata\": \"正在讀取語言訓練數據\",\n    \"tesseract/loaded language traineddata\": \"已讀取語言訓練數據\",\n    \"tesseract/initializing api\": \"正在初始化程序接口\",\n    \"tesseract/initialized api\": \"已初始化程序接口\",\n    \"tesseract/recognizing text\": \"正在識別文字\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"回復給這個用戶\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"給這條評論添加反應\",\n    \"widget/crossnote.comment/edit-this-message\": \"編輯這條評論\",\n    \"widget/crossnote.comment/modified-comment\": \"編輯过的評論\",\n    \"widget/crossnote.comment/post-comment-failure\": \"發送評論失敗\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"取消訂閱評論\",\n    \"widget/crossnote.comment/subscribe-info\": \"訂閱評論\",\n    \"widget/crossnote.comment/view-more-comments\": \"查看更多的評論\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"你確定要刪除這個筆記?\",\n    \"delete-note-dialog/subtitle\": \"你無法撤銷此操作。\",\n    \"delete-directory-dialog/title\": \"你確定要刪除這個目錄?\",\n    \"delete-directory-dialog/subtitle\":\n      \"所有子目錄以及筆記也將會被刪除。你無法撤銷此操作。\",\n    \"delete-tag-dialog/title\": \"你確定要刪除這個標籤?\",\n    \"delete-tag-dialog/subtitle\": \"所有子標籤也將會被刪除。你無法撤銷此操作。\",\n    \"add-notebook-dialog/disclaimer\":\n      \"所有筆記本的數據將只會被保存於瀏覽器本地以供離線使用。我們不會上傳任何你的筆記本數據到我們的伺服器。\",\n    \"edit-image-dialog/title\": \"編輯圖片\",\n    \"edit-image-dialog/image-url\": \"圖片 URL\",\n    \"edit-image-dialog/image-title\": \"圖片標題\",\n    \"edit-image-dialog/image-alt-text\": \"圖片替代文本\",\n    \"language-selector-dialog/subtitle\": \"請選擇偏好語言\",\n\n    \"react-ios-pwa-prompt/copy-title\": \"新增到主畫面\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"本網站具有應用功能。將其添加到主螢幕,以全屏和脫機時使用。\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1) 按下「共用」按鈕\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) 按下「添加到主螢幕」\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"我們目前僅支援從 GitHub、GitLab、Gitea 或碼雲的公共倉庫發佈筆記本。 我們只收集 README.md 文件數據。\",\n    \"publish-notebook/disclaimer-2\":\n      \"請通過在遠端倉庫中向 README.md 添加以下 front-matter 來聲明筆記本的擁有權:\",\n\n    // git\n    \"git/status/ignored\": \"已忽略\",\n    \"git/status/unmodified\": \"未變更\",\n    \"git/status/*modified\": \"*已變更\",\n    \"git/status/*deleted\": \"*已刪除\",\n    \"git/status/*added\": \"*新增\",\n    \"git/status/absent\": \"缺失\",\n    \"git/status/modified\": \"已變更\",\n    \"git/status/deleted\": \"已刪除\",\n    \"git/status/added\": \"新增\",\n    \"git/status/*unmodified\": \"*未變更\",\n    \"git/status/*absent\": \"*缺失\",\n    \"git/status/*undeleted\": \"*未刪除\",\n  },\n};\n","export const jaJP = {\n  translation: {\n    \"title/Crossnote\": \"クロスノート\",\n    \"search/notes\": \"ノートを検索する\",\n    \"search/notebooks\": \"ノートブックを検索する\",\n    \"search/attachments\": \"添付を検索する\",\n\n    // Account\n    \"account/Anonymous\": \"匿名\",\n    \"account/anonymous\": \"匿名\",\n\n    // General\n    \"general/go-back\": \"戻る\",\n    \"general/sending\": \"送信中\",\n    \"general/send\": \"送る\",\n    \"general/cancel\": \"キャンセル\",\n    \"general/add\": \"追加\",\n    \"general/adding\": \"追加\",\n    \"general/backed-up-at\": \"備份於\",\n    \"general/created-at\": \"創建於\",\n    \"general/modified-at\": \"修改於\",\n    \"general/interacted-at\": \"交互於\",\n    \"general/date-created\": \"作成日\",\n    \"general/date-modified\": \"更新日\",\n    \"general/date-interacted\": \"交互時間\",\n    \"general/title\": \"表題\",\n    \"general/saved-at\": \"保存於\",\n    \"general/loading\": \"讀取中 ...\",\n    \"general/loading-notifications\": \"通知を読み込んでいます ...\",\n    \"general/failed-to-set\": \"設定に失敗しました\",\n    \"general/update\": \"更新\",\n    \"general/updated\": \"更新しました\",\n    \"general/updating\": \"更新中\",\n    \"general/close\": \"閉じる\",\n    \"general/Note\": \"ノート\",\n    \"general/notes\": \"ノート\",\n    \"general/Settings\": \"設定\",\n    \"general/Collaborators\": \"協力者\",\n    \"general/collaborators\": \"協力者\",\n    \"general/Backups\": \"バックアップ\",\n    \"general/backups\": \"バックアップ\",\n    \"general/Discussion\": \"話し合う\",\n    \"general/discussion\": \"話し合う\",\n    \"general/Notifications\": \"通知\",\n    \"general/Username\": \"ユーザー名\",\n    \"general/Email\": \"Eメール\",\n    \"general/Password\": \"パスワード\",\n    \"general/confirm-password\": \"もう一度パスワードを確認してください\",\n    \"general/Continue\": \"継続する\",\n    \"general/enter-username\": \"ユーザー名を入力してください\",\n    \"general/vickymd\": \"編集\",\n    \"general/tags\": \"タグ\",\n    \"general/add-a-tag\": \"タグを追加する\",\n    \"general/private\": \"民間\",\n    \"general/public\": \"公開可見\",\n    \"general/friends-only\": \"友達にのみ表示\",\n    \"general/anonymous\": \"匿名\",\n    \"general/onymous\": \"公開署名\",\n    \"general/Tag\": \"タグ\",\n    \"general/no-tags\": \"タグなし\",\n    \"general/Directory\": \"ディレクトリ\",\n    \"general/Untitled\": \"無題\",\n    \"general/untitled\": \"無題\",\n    \"general/Unknown\": \"不明\",\n    \"general/unknown\": \"不明\",\n    \"general/Agree\": \"同意する\",\n    \"general/Disagree\": \"同意しない\",\n    \"general/Print\": \"印刷する\",\n    \"general/Share\": \"シェア\",\n    \"Editor\": \"編集者\",\n    \"EDITOR\": \"編集者\",\n    \"Viewer\": \"読者\",\n    \"VIEWER\": \"読者\",\n    \"Admin\": \"管理者\",\n    \"ADMIN\": \"管理者\",\n    \"ARCHIVED\": \"アーカイブされたノート\",\n    \"ATTACHED NOTES\": \"添付ノート\",\n    \"DELETED\": \"削除されたノート\",\n    \"PINNED\": \"スティッキー\",\n    \"OTHERS\": \"その他\",\n    \"PUBLIC NOTES\": \"公開ノート\",\n    \"FOLLOWINGS' NOTES\": \"關注人的筆記\",\n    \"SHARED WITH ME\": \"私に共有する\",\n    \"BOOKMARKS\": \"ブックマーク\",\n    \"MY TAGS\": \"私のタグ\",\n    \"general/enter-fullscreen-mode\": \"全画面モードに入る\",\n    \"general/enter-presentation-mode\": \"スライドショーモードに入る\",\n    \"general/math-preview\": \"数学プレビュー\",\n    \"general/this-note-is-empty\": \"このノートには内容がありません\",\n    \"general/this-notebook-is-empty\": \"このノートブックには内容がありません\",\n    \"general/nothing-here\": \"ここには何もない\",\n    \"general/no-notes-found\": \"他のノートは見つかりませんでした\",\n    \"general/no-more-attachments-found\": \"添付が見つかりません\",\n    \"general/no-more-notebooks-found\": \"ノートブックが見つかりません\",\n    \"general/no-notifications-found\": \"他のニュースは見つかりませんでした\",\n    \"general/clear-all\": \"すべてクリア\",\n    \"general/Save\": \"保存\",\n    \"general/Delete\": \"削除する\",\n    \"general/Follow\": \"フォロー\",\n    \"general/Following\": \"フォロー中\",\n    \"general/Unfollow\": \"フォロー解除\",\n    \"general/my-notes\": \"私のノート\",\n    \"general/public-notes\": \"公開ノート\",\n    \"general/followings-notes\": \"關注人的筆記\",\n    \"general/shared-with-me\": \"私に共有する\",\n    \"general/Bookmarks\": \"ブックマーク\",\n    \"general/Archive\": \"アーカイブ\",\n    \"general/Trash\": \"ゴミ箱\",\n    \"general/new-note\": \"新しい添付\",\n    \"general/new-attachment\": \"新しい\",\n    \"general/profile-updated\": \"ユーザー情報が更新されました\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"音声\",\n    \"general/Video\": \"映像\",\n    \"general/source-url\": \"ソースリンク\",\n    \"general/sign-in\": \"サインイン\",\n    \"general/sign-up\": \"サインアップ\",\n    \"general/Link\": \"リンク\",\n    \"general/Upload\": \"アップロードする\",\n    \"general/Uploading\": \"アップロードしています\",\n    \"general/clicks\": \"クリック\",\n    \"general/Processing\": \"処理中...\",\n    \"general/please-wait\": \"しばらくお待ちください...\",\n    \"general/please-sign-in-first\": \"最初にサインインしてください\",\n    \"general/Languages\": \"言語\",\n    \"general/track\": \"たどる\",\n    \"general/Publish\": \"公開\",\n    \"general/Unpublish\": \"非公開\",\n    \"general/Open\": \"開く\",\n    \"general/Download\": \"ダウンロード\",\n    \"general/Configure\": \"構成\",\n    \"general/Update\": \"更新\",\n    \"general/empty\": \"空\",\n    \"general/Explore\": \"探索\",\n    \"general/Notebooks\": \"ノートブック\",\n    \"general/add-a-notebook\": \"ノートブックを追加する\",\n    \"general/add-a-note\": \"ノートを追加する\",\n    \"general/add-an-attachment\": \"添付を追加する\",\n    \"general/configure-the-notebook\": \"ノートブックを構成する\",\n    \"general/publish-your-notebook\": \"ノートブックを発行する\",\n    \"general/notebook-name\": \"ノートブック名\",\n    \"general/git-repository\": \"Git リポジトリ\",\n    \"general/clone-a-git-repository\": \"Git リポジトリのクローン作成\",\n    \"general/optional\": \"オプション\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"ブランチ\",\n    \"general/remember-username-and-password\": \"資格情報を記憶する\",\n    \"general/stored-locally\": \"ローカルに保存\",\n    \"general/cors-proxy\": \"CORS プロキシ\",\n    \"general/why-cors-proxy\": \"なぜ CORS プロキシが必要なのですか?\",\n    \"general/today\": \"今日\",\n    \"general/todo\": \"Todo\",\n    \"general/graph-view\": \"グラフビュー\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"タグ\",\n    \"general/untagged\": \"タグない\",\n    \"general/encrypt\": \"暗号化\",\n    \"general/encrypted\": \"暗号化\",\n    \"general/decrypt\": \"復号化\",\n    \"general/conflicted\": \"競合\",\n    \"general/attachments\": \"添付\",\n    \"general/Pin\": \"ピン\",\n    \"general/Encryption\": \"暗号化\",\n    \"general/Fullscreen\": \"フルスクリーン\",\n    \"general/change-file-path\": \"ファイル パスの変更\",\n    \"general/create-a-copy\": \"コピーを作成する\",\n    \"general/restore-checkout\": \"復元 (git checkout)\",\n    \"general/download-pull\": \"ダウンロード (git pull)\",\n    \"general/upload-push\": \"アップロード (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"このノートの暗号化を無効にする\",\n    \"general/encrypt-this-note-with-password\":\n      \"このノートをパスワードで暗号化する\",\n    \"general/disable-encryption\": \"暗号化を無効にする\",\n    \"general/decrypt-this-note\": \"このノートを復号化する\",\n    \"general/upload-the-profile\": \"プロファイルをアップロードする\",\n    \"general/commit-message\": \"コミット メッセージ\",\n    \"general/upload-notebook\": \"ノートブックをアップロードする\",\n    \"general/Comments\": \"コメント\",\n    \"general/Source\": \"ソース\",\n    \"general/Description\": \"説明\",\n    \"general/Edit\": \"編集\",\n    \"general/Rename\": \"変更\",\n    \"general/rename-directory\": \"ディレクトリ名を変更する\",\n    \"general/delete-directory\": \"ディレクトリ名を削除する\",\n    \"general/rename-tag\": \"タグの名前を変更する\",\n    \"general/delete-tag\": \"タグを削除する\",\n    \"general/notebook-updates-found\": \"ノートブックの更新が見つかりました\",\n    \"general/update-the-notebook\": \"ノートブックを更新する\",\n    \"general/check-notebook-updates-periodically\":\n      \"ノートブックの更新を定期的に確認する\",\n    \"general/minutes\": \"分\",\n    \"general/hard-reset\": \"ハードリセット\",\n    \"general/Default\": \"既定\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"降順\",\n    \"general/Asc\": \"昇順\",\n    \"general/pin-the-note\": \"ノートをピン留めする\",\n    \"general/unpin-the-note\": \"ノートの固定を解除する\",\n    \"general/add-to-quick-access\": \"クイック アクセスに追加\",\n    \"general/remove-from-quick-access\": \"クイック アクセスから削除\",\n    \"general/open-folder\": \"フォルダを開く\",\n    \"general/open-a-local-folder\": \"ローカル フォルダを開く\",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \"ブラウザがローカル フォルダを開くことをサポートしていません\",\n    \"general/refresh\": \"更新\",\n\n    // Error\n    \"error/authentication-failed\": \"認証に失敗しました\",\n    \"error/failed-to-upload-notebook\":\n      \"ノートブックをアップロードできませんでした\",\n    \"error/failed-to-download-notebook\":\n      \"ノートブックをダウンロードできませんでした ...\",\n    \"error/notebook-already-exists\": \"ノートブックは既に存在します\",\n    \"error/invalid-git-url-prefix\": \"無効な git URL プレフィックス\",\n    \"error/please-resolve-conflicts\": \"最初に競合を解決してください\",\n    \"error/failed-to-disable-encryption\": \"暗号化を無効にできませんでした\",\n    \"error/decryption-failed\": \"復号化に失敗しました\",\n    \"error/failed-to-change-file-path\": \"ファイル パスの変更に失敗しました\",\n    \"error/failed-to-create-widget\": \"ウィジェットの作成に失敗しました\",\n    \"error/failed-to-load-widget\": \"ウィジェットを読み込めませんでした\",\n    \"error/failed-to-update-the-notebook\": \"ノートブックの更新に失敗しました\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"ノートブックの公開を取り消すことができませんでした\",\n    \"error/failed-to-publish-notebook\": \"ノートブックを発行できませんでした\",\n\n    // Success\n    \"success/notebook-uploaded\": \"ノートブックがアップロードされます\",\n    \"success/notebook-downloaded\": \"ノートブックがダウンロードされます\",\n\n    // Info\n    \"info/downloading-notebook\": \"ノートブックをダウンロード中\",\n\n    // Note\n    \"note/unarchive-note\": \"アーカイブ解除\",\n    \"note/archive-note\": \"アーカイブ\",\n    \"note/delete-forever\": \"完全に削除\",\n    \"note/delete-note\": \"削除する\",\n    \"note/restore-note\": \"回復する\",\n    \"note/report-note\": \"報告書\",\n    \"note/open-in-crossnote-website\": \"クロスノートのウェブサイトで開く\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"提案の送信に失敗しました\",\n    \"note-tags/suggestion-sent\": \"提案を送信しました\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"このノートのタグを提案する\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"タグをフォロー\",\n\n    // Notifications\n    \"notifications/refresh\": \"更新して新しいメッセージを表示\",\n    \"notifications/new-version-available\":\n      \"クロスノートの新バージョンが利用可能です!\",\n\n    // Settings\n    \"settings/about-this-project\": \"このプロジェクトについて\",\n    \"settings/issues-and-feature-requests\":\n      \"問題を発見したか、機能要求がありますか？\",\n    \"settings/uploading-cover-image\": \"カバー画像をアップロード\",\n    \"settings/upload-image-failure\": \"画像のアップロードに失敗しました\",\n    \"settings/Cover\": \"カバー写真\",\n    \"settings/enter-cover-image-url\": \"カバー画像のリンクを入力してください\",\n    \"settings/upload-image\": \"写真をアップロードする\",\n    \"settings/Avatar\": \"アバター\",\n    \"settings/enter-avatar-image-url\": \"アバター画像リンクを入力してください\",\n    \"settings/Name\": \"名\",\n    \"settings/enter-name\":\n      \"名前を入力してください（これはユーザー名ではありません）\",\n    \"settings/editor-cursor-color\": \"エディターのカーソルの色\",\n    \"settings/hello\": \"こんにちは，\",\n    \"settings/world\": \"世界！\",\n    \"settings/linked-with-github-account\":\n      \"GitHub アカウントがリンクされました\",\n    \"settings/link-with-github-account\": \"GitHub アカウントへのリンク\",\n    \"settings/log-out\": \"ログアウトする\",\n    \"settings/author-name\": \"著者名\",\n    \"settings/author-email\": \"著者の電子メール\",\n    \"settings/theme\": \"テーマ\",\n    \"settings/created-cloud-widgets-count\": \"作成されたクラウドウィジェット数\",\n    \"settings/key-map\": \"キーマップ\",\n\n    // Preview\n    \"preview/attach-a-note\": \"ノートを添付\",\n    \"preview/crossnote-untitled\": \"クロスノート - 無題\",\n    \"preview/edit-this-note\": \"このノートを編集\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"フォロー\",\n    \"profile-card/followers\": \"ファン\",\n    \"profile-card/Followings\": \"フォロー\",\n    \"profile-card/Followers\": \"ファン\",\n    \"profile-card/notes\": \"ノート\",\n    \"profile-card/follow-user-failure\": \"このユーザーをフォローできません\",\n    \"profile-card/followed-user\": \"このユーザーをフォローしました\",\n    \"profile-card/unfollow-user-failure\":\n      \"このユーザーのフォローを解除できません\",\n    \"profile-card/unfollowed-user\": \"このユーザーのフォローを解除しました\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"添付されたノートを表示\",\n    \"interaction-panel/add-comment\": \"コメントを追加\",\n    \"interaction-panel/add-reaction\": \"絵文字を追加\",\n\n    // Editor\n    \"editor/loading-your-note\": \"ノートを読む...\",\n    \"editor/sync-failure\":\n      \"同期に失敗しました... Webページを再起動してください\",\n    \"editor/saving\": \"保存中...\",\n    \"editor/save-failure\": \"保存失敗\",\n    \"editor/saved\": \"保存しました\",\n    \"editor/update-note-failure\": \"ノートの更新に失敗しました\",\n    \"editor/placeholder\": \"#  こんにちは 😀 コマンドに 「/」 と入力します。\",\n    \"editor/ln\": \"行\",\n    \"editor/col\": \"列\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"読者がノートを提案できるタグ\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"読者がこのノートの下にノートを添付できるようにする\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"親ノートを継承した共同編集者のリスト\",\n    \"editor/note-control/note-visibility-hint\":\n      \"すべての共同編集者もこのノートを見ることができます\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"あなたとこのノートを編集または管理できるすべての共同編集者向け\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"このノートを見ることができるすべての人のために\",\n    \"editor/note-control/enter-parent-note-id\":\n      \"親ノートのIDを入力してください\",\n    \"editor/note-control/attach-note-failure\": \"ノートの添付に失敗しました\",\n    \"editor/note-control/unattach-note-failure\":\n      \"ノートの添付解除に失敗しました\",\n    \"editor/collaborator-hint\": \" - このノートが表示されます\",\n    \"editor/shareable-link-hint\":\n      \"このリンクを知っている全員がログインせずにこのノートを表示/変更できます\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"バックアップを作成\",\n    \"editor/backups-control/delete-this-backup\": \"このバックアップを削除\",\n    \"editor/backups-control/create-backup-failure\":\n      \"バックアップの作成に失敗しました\",\n    \"editor/backups-control/backup-created\": \"バックアップを作成しました\",\n    \"editor/backups-control/delete-backup-failure\":\n      \"バックアップの削除に失敗しました\",\n    \"editor/backups-control/backup-deleted\": \"バックアップを削除しました\",\n    \"editor/backups-control/cloud-version\": \"クラウド版\",\n    \"editor/backups-control/backup-name\": \"バックアップ名\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"共同編集者の役割を設定できませんでした\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"共同編集者の追加に失敗しました\",\n    \"editor/collaborators-control/collaborator-removed\":\n      \"共同編集者を削除しました\",\n    \"editor/collaborators-control/collaborator-added\":\n      \"共同編集者が追加されました\",\n    \"editor/collaborators-control/can-view\": \"閲覧できる\",\n    \"editor/collaborators-control/can-edit\": \"編集可能\",\n    \"editor/collaborators-control/can-administrate\": \"管理者が管理できます\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"画像を挿入\",\n    \"editor/toolbar/upload-local-images\": \"ローカルイメージをアップロードする\",\n    \"editor/toolbar/capture-webpage\": \"ウェブページ全体をキャプチャする\",\n    \"editor/toolbar/insert-clock\": \"時計を挿入\",\n    \"editor/toolbar/insert-emoji\": \"絵文字を挿入\",\n    \"editor/toolbar/insert-media\": \"メディアを挿入する\",\n    \"editor/toolbar/insert-audio\": \"音声を挿入\",\n    \"editor/toolbar/netease-music\": \"Netease Cloud Music\",\n    \"editor/toolbar/insert-video\": \"ビデオを挿入\",\n    \"editor/toolbar/insert-youtube\": \"Youtube を挿入\",\n    \"editor/toolbar/insert-bilibili\": \"Bilibili を挿入\",\n    \"editor/toolbar/insert-slide\": \"スライドを挿入\",\n    \"editor/toolbar/insert-ocr\": \"OCRを挿入\",\n    \"editor/toolbar/insert-kanban\": \"かんばんを挿入\",\n    \"editor/toolbar/insert-abc-notation\": \"ABC notation を挿入\",\n    \"editor/toolbar/insert-header-1\": \"第1レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-2\": \"第2レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-3\": \"第3レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-4\": \"第4レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-5\": \"第5レベルの見出しを挿入\",\n    \"editor/toolbar/insert-header-6\": \"第6レベルの見出しを挿入\",\n    \"editor/toolbar/bold\": \"太字\",\n    \"editor/toolbar/italic\": \"斜体\",\n    \"editor/toolbar/strikethrough\": \"取り消し 線\",\n    \"editor/toolbar/insert-inline-code\": \"インラインコードを挿入\",\n    \"editor/toolbar/insert-blockquote\": \"参照を挿入\",\n    \"editor/toolbar/insert-unordered-list\": \"順不同リストを挿入\",\n    \"editor/toolbar/insert-ordered-list\": \"順序付きリストを挿入\",\n    \"editor/toolbar/insert-link\": \"リンクを挿入\",\n    \"editor/toolbar/insert-table\": \"テーブルを挿入\",\n    \"editor/toolbar/insert-comment\":\n      \"クロスノートクラウドコメントウィジェットを挿入\",\n    \"editor/toolbar/insert-github-gist\": \"GitHub Gist を挿入\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"タグが追加されました\",\n    \"editor/note-control/tag-deleted\": \"タグが削除されました\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"ノートの可視性の設定に失敗しました\",\n    \"editor/note-control/note-visibility-updated\":\n      \"ノートの可視性が更新されました\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"著者の可視性を設定できませんでした\",\n    \"editor/note-control/author-visibility-updated\":\n      \"著者の可視性が更新されました\",\n    \"editor/note-control/editor-mode\": \"エディターモード\",\n    \"editor/note-control/source-code\": \"ソースコード\",\n    \"editor/note-control/preview\": \"プレビュー\",\n    \"editor/note-control/split-view\": \"分割ビュー\",\n    \"editor/note-control/pin-preview\": \"右にピンプレビュー\",\n    \"editor/note-control/display-modification-records\": \"変更レコードの表示\",\n    \"editor/note-control/note-visibility\": \"ノートの可視性\",\n    \"editor/note-control/author-visibility\": \"著者の可視性\",\n    \"editor/note-control/shareable-link\": \"共有可能なリンク\",\n    \"editor/note-control/copy-to-clipboard\": \"ペーストボードにコピー\",\n    \"editor/note-control/link-to-preview\": \"プレビューへのリンク\",\n    \"editor/note-control/link-to-editor\": \"エディターへのリンク\",\n    \"editor/note-control/attach-to-note\": \"ノートに添付\",\n    \"editor/note-control/source-added\": \"URL が追加されました\",\n    \"editor/note-control/source-deleted\": \"URL が削除されました\",\n    \"editor/note-control/invalid-note-source\": \"無効な URL\",\n    \"editor/note-control/add-note-source\": \"関連する URL を追加しました\",\n    \"editor/note-control/note-source-hint\":\n      \"同じ URL 上のノートはグループ化されます\",\n    \"editor/note-control/enter-note-source\": \"URL を入力してください\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"このノートは非公開です\",\n    \"avatar-panel/this-note-is-public\": \"このノートは一般公開されています\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"このノートは友達にのみ表示されます\",\n    \"avatar-panel/you-are-anonymous\": \"あなたは匿名です\",\n\n    // FileExporter\n    \"file-exporter/name\": \"ファイルのエクスポート\",\n    \"file-exporter/orientation\": \"方向\",\n    \"file-exporter/portrait\": \"縦\",\n    \"file-exporter/landscape\": \"水平\",\n    \"file-exporter/paper-size\": \"用紙サイズ\",\n    \"file-exporter/unit\": \"単位\",\n    \"file-exporter/margin-top\": \"上マージン\",\n    \"file-exporter/margin-bottom\": \"下マージン\",\n    \"file-exporter/margin-left\": \"左マージン\",\n    \"file-exporter/margin-right\": \"右マージン\",\n\n    // Utils\n    \"utils/uploading-image\": \"画像をアップロードしています...\",\n    \"utils/upload-image-failure\": \"画像のアップロードに失敗しました\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"返信する\",\n    // somone's\n    \"notification/'s-note\": \"ノート \",\n    // * NoteReactionNotification\n    \"notification/added\": \" 添加了\",\n    // some reaction\n    \"notification/to-your-note\": \"到你的筆記\",\n    \"notification/add-you-as\": \"添加了你作為\",\n    // some role\n    \"notification/of-note\": \"到筆記\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"タグの追加に失敗しました\",\n    \"notification/suggested-to-add-tag\": \"タグの追加を提案する\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"あなたをフォローし始めました\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"あなたのノートをブックマーク\",\n    \"notification/view-more-notifications\": \"その他の通知を表示する\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"お待ちください ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"GitHub アカウントに接続できません\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"GitHub アカウントでのログインに失敗しました\",\n    \"github-oauth/first-time-sign-in\":\n      \"これは、GitHub アカウントで初めてサインインするようです\",\n    \"github-oauth/first-time-sign-in-small\": \"以下の登録を完了してください\",\n\n    // Widgets\n    \"widget/autoplay\": \"自動再生\",\n    \"widget/controls\": \"コントローラー\",\n    \"widget/loop\": \"サイクル\",\n    \"widget/muted\": \"ミュート\",\n    \"widget/creating-widget\": \"ウィジェットを作成しています\",\n    \"widget/loading-widget\": \"ウィジェットを読み込んでいます\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"無料のドローイングベッドサービスを提供してくれたsm.msに感謝します。\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"お使いのブラウザはオーディオ要素をサポートしていません\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"ここにオーディオファイルのソースリンクを入力し、「Enter」キーを押して挿入します\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"お使いのブラウザは動画動画要素をサポートしていません\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"エラー：https://www.bilibili.com/video/av79126732のようなリンクのみがサポートされています\",\n    \"widget/crossnote.youtube/error_message\":\n      \"エラー：https://www.youtube.com/watch?v=MmB9b5njVbAなどのリンクのみがサポートされています\",\n    \"widget/crossnote.auth/welcome\": \"クロスノートへようこそ\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \"アカウントなし？ 作成しましょう😉！\",\n    \"widget/crossnote.auth/forgot_password\": \"パスワードを忘れました 😣？\",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"確認コードをメールに送信できませんでした\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \"確認コードが送信されました \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"パスワードをリセットできませんでした\",\n    \"widget/crossnote.auth/password_reset\": \"パスワードがリセットされました\",\n    \"widget/crossnote.auth/password-mismatch\": \"一貫性のないパスワード\",\n    \"widget/crossnote.auth/hello\": \"こんにちは，\",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"確認コードを入力してください\",\n    \"widget/crossnote.auth/get-code\": \"確認コードを取得する\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"GitHub アカウントでサインインする\",\n    \"widget/crossnote.auth/already-have-an-account\":\n      \"すでにアカウントをお持ちですか？\",\n    \"widget/crossnote.auth/reset-password\": \"パスワードをリセット\",\n    \"widget/crossnote.auth/Or\": \"または\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili ビデオリンク\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"ここにビリビリのビデオへのリンクを挿入し、「Enter」を押して挿入します\",\n    \"widget/crossnote.image/image-helper\": \"画像アシスタント\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"ここに画像リンクを入力し、「Enter」を押して挿入します\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"画像ファイルを選択するにはここをクリックしてください\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"NetEase Cloud Music SongデジタルIDを入力してください\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"ここにビデオファイルのソースリンクを入力し、「Enter」を押して挿入します\",\n    \"widget/crossnote.video/poster-url\": \"カバー画像リンク（オプション）\",\n    \"widget/crossnote.video/poster-url-placeholder\":\n      \"ここにカバー画像のリンクを入力してください。\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube ビデオリンク\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"Youtubeビデオへのリンクをここに挿入し、「Enter」を押して挿入します\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"ローカル画像\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"次の言語のテキストを認識する\",\n    \"widget/crossnote.ocr/start-ocr\": \"開始文字識別\",\n    \"widget/crossnote.ocr/extra-settings\": \"追加設定\",\n    \"widget/crossnote.ocr/grayscale\": \"グレースケール\",\n    \"widget/crossnote.kanban/add-column\": \"新しい列を追加する\",\n    \"widget/crossnote.github_gist/title\": \"GitHub Gist を埋め込む\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"GitHub Gist URL を入力してください\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"このユーザーに返信\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"このコメントへの応答を追加します\",\n    \"widget/crossnote.comment/edit-this-message\": \"このコメントを編集する\",\n    \"widget/crossnote.comment/modified-comment\": \"変更されたコメント\",\n    \"widget/crossnote.comment/post-comment-failure\":\n      \"コメントの送信に失敗しました\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"コメントの購読を解除する\",\n    \"widget/crossnote.comment/subscribe-info\": \"コメントを購読する\",\n    \"widget/crossnote.comment/view-more-comments\": \"その他のコメントを表示する\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"このノートを削除しますか?\",\n    \"delete-note-dialog/subtitle\": \"この操作を取り消すことはできません。\",\n    \"delete-directory-dialog/title\": \"このディレクトリを削除しますか？\",\n    \"delete-directory-dialog/subtitle\":\n      \"すべてのサブディレクトリとノートも削除されます。この操作を取り消すことはできません。\",\n    \"delete-tag-dialog/title\": \"このタグを削除しますか？\",\n    \"delete-tag-dialog/subtitle\":\n      \"すべてのサブタグも削除されます。この操作を取り消すことはできません。\",\n    \"add-notebook-dialog/disclaimer\":\n      \"すべてのノートブックデータは、ブラウザにローカルに保存されます。ノートブックデータを当社のサーバーにアップロードすることはありません。\",\n    \"edit-image-dialog/title\": \"画像を編集する\",\n    \"edit-image-dialog/image-url\": \"画像の URL\",\n    \"edit-image-dialog/image-title\": \"画像のタイトル\",\n    \"edit-image-dialog/image-alt-text\": \"画像代替テキスト\",\n    \"language-selector-dialog/subtitle\": \"希望する言語を選択してください\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"ホーム画面に追加\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"このウェブサイトにはアプリ機能があります。フルスクリーンとオフライン中に使用するためにあなたのホーム画面にそれを追加します。\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) [共有] ボタンを押します。\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) 「ホーム画面に追加」を押します。\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"現在、GitHub、GitLab、Gitea、またはコードクラウドのパブリックウェアハウスからノートブックをリリースする場合のみサポートしています。 README.md ファイル データのみを収集します。\",\n    \"publish-notebook/disclaimer-2\":\n      \"リモート ウェアハウスで次の front-matter を README.md に追加して、ノートブックの所有権を主張します。\",\n\n    // git\n    \"git/status/ignored\": \"無視\",\n    \"git/status/unmodified\": \"未変更\",\n    \"git/status/*modified\": \"*変更済み\",\n    \"git/status/*deleted\": \"*削除済み\",\n    \"git/status/*added\": \"*追加\",\n    \"git/status/absent\": \"欠落\",\n    \"git/status/modified\": \"変更済み\",\n    \"git/status/deleted\": \"削除済み\",\n    \"git/status/added\": \"追加\",\n    \"git/status/*unmodified\": \"*未変更\",\n    \"git/status/*absent\": \"*欠落\",\n    \"git/status/*undeleted\": \"*削除されませんでした\",\n  },\n};\n","import {\n  Avatar,\n  Box,\n  Typography,\n  Card,\n  IconButton,\n  Popover,\n  Chip,\n  Dialog,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { formatRelative } from \"date-fns/esm\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport React, { useState, useEffect } from \"react\";\nimport { Emoji, Picker as EmojiPicker } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { Reply, StickerEmoji, FileEditOutline } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { languageCodeToDateFNSLocale } from \"../../../i18n/i18n\";\nimport {\n  useAddReactionToCommentWidgetMessageMutation,\n  useRemoveReactionFromCommentWidgetMessageMutation,\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n} from \"../../../generated/graphql\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { postprocessPreview } from \"../../../utilities/preview\";\n\nconst messageMarginLeft = 48;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    chatMessage: {\n      \"width\": \"100%\",\n      \"paddingLeft\": theme.spacing(2),\n      \"paddingRight\": theme.spacing(2),\n      \"boxSizing\": \"border-box\",\n      \"cursor\": \"pointer\",\n      \"&:first-child\": {\n        marginTop: theme.spacing(2),\n      },\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6\",\n      },\n      \"&:hover .preview\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    avatarPanel: {\n      display: \"grid\",\n      gridTemplateAreas: `\"avatar username\"\n                          \"avatar time\"`,\n      justifyContent: \"start\",\n      alignItems: \"center\",\n      gridColumnGap: theme.spacing(2),\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n    },\n    username: {\n      gridArea: \"username\",\n    },\n    time: {\n      gridArea: \"time\",\n    },\n    message: {\n      marginLeft: `${messageMarginLeft}px`,\n      cursor: \"pointer\",\n      backgroundColor: \"inherit !important\",\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    reactions: {\n      marginLeft: `${messageMarginLeft}px`,\n      marginBottom: theme.spacing(2),\n    },\n    singleTime: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    modifiedCaption: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nconst actionBtnClass = {\n  width: \"20px\",\n  height: \"20px\",\n};\n\ninterface Props {\n  commentWidget: CommentWidgetFieldsFragment;\n  message: CommentWidgetMessageFieldsFragment;\n  previousMessage?: CommentWidgetMessageFieldsFragment;\n  mentionUser: (username: string) => void;\n  onModifyChatMessage: (chatMessageID: string) => void;\n}\nexport function CommentMessage(props: Props) {\n  const classes = useStyles(props);\n  const message = props.message;\n  const previousMessage = props.previousMessage;\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [\n    resAddReactionToCommentWidgetMessage,\n    executeAddReactionToCommentWidgetMessageMutation,\n  ] = useAddReactionToCommentWidgetMessageMutation();\n  const [\n    resRemoveReactionFromCommentWidgetMessage,\n    executeRemoveReactionFromCommentWidgetMessageMutation,\n  ] = useRemoveReactionFromCommentWidgetMessageMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  useEffect(() => {\n    if (resAddReactionToCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resAddReactionToCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resAddReactionToCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (resRemoveReactionFromCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resRemoveReactionFromCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resRemoveReactionFromCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, message.markdown);\n      postprocessPreview(\n        previewElement,\n        null, // globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, message.markdown]);\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(anchorEl ? null : (event.target as any));\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleReply = () => {\n    props.mentionUser(message.author.username);\n    handleClose();\n  };\n  const openPopper = Boolean(anchorEl);\n  const modified = message.createdAt !== message.updatedAt;\n\n  function updateReactionSummaries(reaction: string) {\n    let found = false;\n    for (let i = 0; i < message.reactionSummaries.length; i++) {\n      if (message.reactionSummaries[i].reaction === reaction) {\n        found = true;\n        message.reactionSummaries[i].count += 1;\n        message.reactionSummaries[i].selfAuthored = true;\n        break;\n      }\n    }\n    if (!found) {\n      message.reactionSummaries = [\n        {\n          reaction: reaction,\n          count: 1,\n          selfAuthored: true,\n        },\n        ...message.reactionSummaries,\n      ];\n    }\n    setForceUpdate(Date.now());\n  }\n  return (\n    <Box className={clsx(classes.chatMessage)} onClick={handleClick}>\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username ? null : (\n        <Box className={clsx(classes.avatarPanel)}>\n          <Avatar\n            onClick={() => {\n              /*\n              if (message.authorVisibility !== AuthorVisibility.Anonymous) {\n                window.open(\n                  `${CROSSNOTE_CONFIG.homePage}/user/${chatMessage.author.username}`\n                );\n              }\n              */\n            }}\n            variant={\"rounded\"}\n            className={clsx(classes.avatar)}\n            src={\n              message.author.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(message.author.username), 80).toString()\n            }\n          ></Avatar>\n          <Typography className={clsx(classes.username)}>\n            {message.author.username}\n          </Typography>\n          <Typography\n            className={clsx(classes.time)}\n            variant=\"body2\"\n            color={\"textSecondary\"}\n          >\n            {formatRelative(new Date(message.createdAt), new Date(), {\n              locale: languageCodeToDateFNSLocale(\n                globalContainers.settingsContainer.language,\n              ),\n            })}\n          </Typography>\n        </Box>\n      )}\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username &&\n      new Date(message.createdAt).getTime() -\n        new Date(previousMessage.createdAt).getTime() >=\n        1000 * 60 ? (\n        <Typography\n          className={clsx(classes.time, classes.singleTime)}\n          variant=\"body2\"\n          color={\"textSecondary\"}\n        >\n          {formatRelative(new Date(message.createdAt), new Date(), {\n            locale: languageCodeToDateFNSLocale(\n              globalContainers.settingsContainer.language,\n            ),\n          })}\n        </Typography>\n      ) : null}\n      {modified && (\n        <Typography\n          variant={\"caption\"}\n          color={\"textSecondary\"}\n          className={clsx(classes.modifiedCaption)}\n        >\n          {t(\"widget/crossnote.comment/modified-comment\")}\n        </Typography>\n      )}\n      <div\n        className={clsx(classes.message) + \" preview\"}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      <Box className={clsx(classes.reactions)}>\n        {message.reactionSummaries\n          .sort((x, y) => {\n            let weightX = 1;\n            let weightY = 1;\n            if (x.selfAuthored) {\n              weightX = 100;\n            }\n            if (y.selfAuthored) {\n              weightY = 100;\n            }\n            return x.count * weightX - y.count * weightY;\n          })\n          .map((reactionSummary) => {\n            return (\n              <Chip\n                variant={reactionSummary.selfAuthored ? \"default\" : \"outlined\"}\n                size=\"medium\"\n                label={reactionSummary.count.toString()}\n                color={\"primary\"}\n                key={reactionSummary.reaction}\n                style={{ marginRight: \"8px\" }}\n                className={clsx(classes.reactionChip)}\n                onClick={() => {\n                  if (!globalContainers.cloudContainer.loggedIn) {\n                    globalContainers.cloudContainer.setAuthDialogOpen(true);\n                  } else if (reactionSummary.selfAuthored) {\n                    executeRemoveReactionFromCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    reactionSummary.selfAuthored = false;\n                    reactionSummary.count -= 1; // TODO: Should we remove the reaction if it reaches 0?\n                    setForceUpdate(Date.now());\n                  } else {\n                    executeAddReactionToCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    updateReactionSummaries(reactionSummary.reaction);\n                  }\n                }}\n                avatar={\n                  <Avatar>\n                    <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                  </Avatar>\n                }\n              />\n            );\n          })}\n      </Box>\n\n      <Popover\n        open={openPopper}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Card>\n          <Tooltip title={t(\"widget/crossnote.comment/reply-to-this-user\")}>\n            <IconButton onClick={handleReply}>\n              <Reply style={actionBtnClass}></Reply>\n            </IconButton>\n          </Tooltip>\n          <Tooltip\n            title={t(\"widget/crossnote.comment/add-reaction-to-this-comment\")}\n          >\n            <IconButton onClick={() => setEmojiPickerOpen(true)}>\n              <StickerEmoji style={actionBtnClass}></StickerEmoji>\n            </IconButton>\n          </Tooltip>\n          {globalContainers.cloudContainer.loggedIn &&\n            message.author.id === globalContainers.cloudContainer.viewer.id && (\n              <Tooltip title={t(\"widget/crossnote.comment/edit-this-message\")}>\n                <IconButton\n                  onClick={() => props.onModifyChatMessage(message.id)}\n                >\n                  <FileEditOutline style={actionBtnClass}></FileEditOutline>\n                </IconButton>\n              </Tooltip>\n            )}\n        </Card>\n      </Popover>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          emoji={\"\"}\n          showSkinTones={false /* Disable skin for now */}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMessageMutation({\n                messageID: message.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n              handleClose();\n            }\n          }}\n        />\n      </Dialog>\n      <Box style={{ display: \"none\" }}>{forceUpdate}</Box>\n    </Box>\n  );\n}\n","import {\n  Box,\n  Button,\n  Card,\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { Note } from \"../../../lib/note\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport { openURL } from \"../../../utilities/preview\";\nconst VickyMD = require(\"vickymd/core\");\n\nexport const ChatMessageEditorHeight = \"150\";\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: \"100%\",\n      height: `${ChatMessageEditorHeight}px`,\n      display: \"flex\",\n      flexDirection: \"column\",\n      // position: \"absolute\",\n      bottom: \"0\",\n    },\n    toolbar: {\n      display: \"flex\",\n      overflow: \"hidden\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n      justifyContent: \"flex-end\",\n      padding: \"1px 4px 1px 4px\",\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    toolbarLeft: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"height\": \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    sendButton: {\n      width: \"100px\",\n    },\n  }),\n);\ninterface Props {\n  sendMessage: (message: string) => void;\n  sendingMessage?: boolean;\n  updateMessage: (chatMessageID: string, message: string) => void;\n  updateMessageID?: string;\n  updateMessageMarkdown?: string;\n  cancelUpdatingMessage: () => void;\n  updatingMessage?: boolean;\n  setEditor: (editor: CodeMirrorEditor) => void;\n}\n\nexport function CommentEditor(props: Props) {\n  const classes = useStyles(props);\n  const note: Note = null; // globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(\"\");\n      editor.setOption(\"lineNumbers\", false);\n      editor.focus();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    props.setEditor(editor);\n  }, [editor, props]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  useEffect(() => {\n    if (props.updateMessageID && props.updateMessageMarkdown) {\n      editor.setValue(props.updateMessageMarkdown);\n    }\n  }, [props.updateMessageID, props.updateMessageMarkdown, editor]);\n\n  return (\n    <Box className={clsx(classes.root)}>\n      <Box className={clsx(classes.toolbar)}>\n        {props.updateMessageID ? (\n          <Box>\n            <Button\n              variant={\"contained\"}\n              color={\"secondary\"}\n              onClick={() => {\n                props.cancelUpdatingMessage();\n              }}\n            >\n              {t(\"general/cancel\")}\n            </Button>\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              onClick={() => {\n                if (editor) {\n                  props.updateMessage(\n                    props.updateMessageID,\n                    editor.getValue() || \"\",\n                  );\n                }\n              }}\n              disabled={props.updatingMessage}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {props.updatingMessage\n                ? t(\"general/updating\")\n                : t(\"general/update\")}\n            </Button>\n          </Box>\n        ) : (\n          <Box>\n            {globalContainers.cloudContainer.loggedIn ? (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  if (editor) {\n                    props.sendMessage(editor.getValue() || \"\");\n                    editor.setValue(\"\");\n                  }\n                }}\n                disabled={props.sendingMessage}\n                className={clsx(classes.sendButton)}\n              >\n                {props.sendingMessage\n                  ? t(\"general/sending\")\n                  : t(\"general/send\")}\n              </Button>\n            ) : (\n              <Button\n                variant={\"contained\"}\n                color={\"primary\"}\n                onClick={() => {\n                  globalContainers.cloudContainer.setAuthDialogOpen(true);\n                }}\n              >\n                <Typography variant={\"body2\"}>{\"Log in\"}</Typography>\n              </Button>\n            )}\n          </Box>\n        )}\n      </Box>\n      <Card className={clsx(classes.editorWrapper)} elevation={4}>\n        <textarea\n          id=\"outlined-multiline-flexible\"\n          className={classes.textarea}\n          ref={(element: HTMLTextAreaElement) => {\n            setTextAreaElement(element);\n          }}\n        />\n      </Card>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  Typography,\n  DialogTitle,\n  Box,\n  IconButton,\n  DialogActions,\n  Button,\n  useMediaQuery,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n  PageInfo,\n  useCommentWidgetMessagesQuery,\n  usePostCommentWidgetMessageMutation,\n  useUpdateCommentWidgetMessageMutation,\n  useSubscribeToCommentWidgetMutation,\n  useUnsubscribeFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  EmptyPageInfo,\n  getMentionsFromMarkdown,\n} from \"../../../utilities/note\";\nimport { UUIDNil } from \"../../../utilities/utils\";\nimport { BellOutline, Bell, Close } from \"mdi-material-ui\";\nimport { CommentMessage } from \"./CommentMessages\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport { CommentEditor } from \"./CommentEditor\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    commentWrapper: {\n      padding: \"0\",\n    },\n    messages: {},\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  commentWidget: CommentWidgetFieldsFragment;\n}\nexport function CommentDialog(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const commentWidget = props.commentWidget;\n  const { t } = useTranslation();\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [messages, setMessages] = useState<\n    CommentWidgetMessageFieldsFragment[]\n  >(\n    commentWidget.instance.commentWidget.messages.edges.map(\n      (edge) => edge.node,\n    ),\n  );\n  const [messagesElement, setMessagesElement] = useState<HTMLDivElement>(null);\n  const [\n    latestPulledMessagePageInfo,\n    setLatestPulledMessagePageInfo,\n  ] = useState<PageInfo>(\n    commentWidget.instance.commentWidget.messages.pageInfo,\n  );\n  const [updateMessageID, setUpdateMessageID] = useState<string>(\"\");\n  const [\n    resMessagesAfter,\n    executeMessagesAfterQuery,\n  ] = useCommentWidgetMessagesQuery({\n    variables: {\n      widgetID: commentWidget.id,\n      before: UUIDNil,\n      after: latestPulledMessagePageInfo.endCursor,\n      first: 20,\n      last: 0,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resPostMessage,\n    executePostMessageMutation,\n  ] = usePostCommentWidgetMessageMutation();\n  const [\n    resUpdateMessage,\n    executeUpdateMessageMutation,\n  ] = useUpdateCommentWidgetMessageMutation();\n  const [\n    resSubscribeToCommentWidget,\n    executeSubscribeToCommentWidgetMutation,\n  ] = useSubscribeToCommentWidgetMutation();\n  const [\n    resUnsubscribeFromCommentWidget,\n    executeUnsubscribeFromCommentWidgetMutation,\n  ] = useUnsubscribeFromCommentWidgetMutation();\n\n  const mentionUser = useCallback(\n    (username: string) => {\n      if (editor) {\n        editor.focus();\n        editor.replaceSelection(`@${username} `);\n        editor.focus();\n      }\n    },\n    [editor],\n  );\n\n  const subscribeToChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = true;\n      executeSubscribeToCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeSubscribeToCommentWidgetMutation]);\n\n  const unsubscribeFromChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = false;\n      executeUnsubscribeFromCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeUnsubscribeFromCommentWidgetMutation]);\n\n  const sendMessage = useCallback(\n    (message: string = \"\") => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executePostMessageMutation({\n        widgetID: commentWidget.id,\n        markdown: message,\n        notifyUsers: getMentionsFromMarkdown(message),\n      });\n    },\n    [commentWidget, executePostMessageMutation],\n  );\n\n  const updateMessage = useCallback(\n    (messageID: string, message: string) => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executeUpdateMessageMutation({\n        messageID: messageID,\n        markdown: message,\n      });\n    },\n    [commentWidget, executeUpdateMessageMutation],\n  );\n\n  const addMessage = useCallback(\n    (message: CommentWidgetMessageFieldsFragment) => {\n      setMessages((messages) =>\n        [message, ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    },\n    [],\n  );\n\n  const scrollMessagesToBottom = useCallback(() => {\n    if (messagesElement) {\n      messagesElement.scrollTop = messagesElement.scrollHeight * 10;\n    }\n  }, [messagesElement]);\n\n  const fetchPreviousMessages = useCallback(() => {\n    if (latestPulledMessagePageInfo.hasNextPage) {\n      executeMessagesAfterQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [executeMessagesAfterQuery, latestPulledMessagePageInfo]);\n\n  useEffect(() => {\n    if (resSubscribeToCommentWidget.error) {\n      // console.log(resSubscribeToCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-subscribe-to-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resSubscribeToCommentWidget, t]);\n\n  useEffect(() => {\n    if (resUnsubscribeFromCommentWidget.error) {\n      // console.log(resUnsubscribeFromCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-unsubscribe-from-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resUnsubscribeFromCommentWidget, t]);\n\n  useEffect(() => {\n    if (resPostMessage.fetching) {\n    } else if (resPostMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"widget/crossnote.comment/post-comment-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resPostMessage.data) {\n      const message = resPostMessage.data.postCommentWidgetMessage;\n      addMessage(message);\n      scrollMessagesToBottom();\n    }\n  }, [resPostMessage, addMessage, scrollMessagesToBottom, t]);\n\n  useEffect(() => {\n    if (resUpdateMessage.data) {\n      const message = resUpdateMessage.data.updateCommentWidgetMessage;\n      addMessage(message);\n      setUpdateMessageID(\"\");\n      if (editor) {\n        editor.setValue(\"\");\n      }\n    }\n  }, [resUpdateMessage, addMessage, editor]);\n\n  useEffect(() => {\n    if (resMessagesAfter.fetching) {\n    } else if (resMessagesAfter.error) {\n    } else if (resMessagesAfter.data) {\n      const connection =\n        resMessagesAfter.data.widget.instance.commentWidget.messages;\n      setLatestPulledMessagePageInfo(connection.pageInfo);\n      if (!connection.edges.length) {\n        return;\n      }\n      setMessages((messages) =>\n        [...connection.edges.map((edge) => edge.node), ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    }\n  }, [resMessagesAfter]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={props.onClose}\n      fullWidth={true}\n      fullScreen={fullScreen}\n    >\n      <DialogTitle style={{ paddingBottom: \"0\" }}>\n        <Box className={classes.topBar}>\n          <Box className={classes.row}>\n            {fullScreen && (\n              <IconButton onClick={() => props.onClose()}>\n                <Close></Close>\n              </IconButton>\n            )}\n            <Typography>{t(\"general/Comments\")}</Typography>\n          </Box>\n          <Tooltip\n            title={\n              commentWidget.instance.commentWidget.subscribed\n                ? t(\"widget/crossnote.comment/unsubscribe-info\")\n                : t(\"widget/crossnote.comment/subscribe-info\")\n            }\n          >\n            <IconButton\n              color={\"primary\"}\n              onClick={() => {\n                if (commentWidget.instance.commentWidget.subscribed) {\n                  unsubscribeFromChatGroup();\n                } else {\n                  subscribeToChatGroup();\n                }\n              }}\n            >\n              {commentWidget.instance.commentWidget.subscribed ? (\n                <Bell></Bell>\n              ) : (\n                <BellOutline></BellOutline>\n              )}\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </DialogTitle>\n      <DialogContent className={clsx(classes.commentWrapper)}>\n        <div\n          className={clsx(classes.messages)}\n          ref={(element: HTMLDivElement) => {\n            setMessagesElement(element);\n          }}\n        >\n          {messages.map((message, index) => {\n            const commentMessage = (\n              <CommentMessage\n                commentWidget={commentWidget}\n                message={message}\n                previousMessage={index > 0 ? messages[index - 1] : null}\n                mentionUser={mentionUser}\n                key={message.id}\n                onModifyChatMessage={(messageID: string) => {\n                  setUpdateMessageID(messageID);\n                }}\n              ></CommentMessage>\n            );\n            if (\n              latestPulledMessagePageInfo.hasNextPage &&\n              latestPulledMessagePageInfo.endCursor === message.id\n            ) {\n              return (\n                <Box key={message.id}>\n                  {commentMessage}\n                  <Box\n                    style={{\n                      textAlign: \"center\",\n                      padding: \"16px\",\n                      marginBottom: \"16px\",\n                    }}\n                  >\n                    <Button\n                      variant={\"outlined\"}\n                      color={\"secondary\"}\n                      onClick={fetchPreviousMessages}\n                      disabled={resMessagesAfter.fetching}\n                    >\n                      {t(\"widget/crossnote.comment/view-more-comments\")}\n                    </Button>\n                  </Box>\n                </Box>\n              );\n            } else {\n              return commentMessage;\n            }\n          })}\n        </div>\n      </DialogContent>\n      <DialogActions style={{ padding: \"0\" }}>\n        <CommentEditor\n          sendMessage={(message) => {\n            sendMessage(message);\n          }}\n          sendingMessage={resPostMessage.fetching}\n          updateMessage={(messageID, message) => {\n            updateMessage(messageID, message);\n          }}\n          cancelUpdatingMessage={() => {\n            setUpdateMessageID(\"\");\n          }}\n          updateMessageID={updateMessageID}\n          updateMessageMarkdown={\n            updateMessageID\n              ? messages.filter((message) => message.id === updateMessageID)[0]\n                  .markdown\n              : \"\"\n          }\n          updatingMessage={resUpdateMessage.fetching}\n          setEditor={setEditor}\n        ></CommentEditor>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  useDeleteWidgetMutation,\n  useUpdateWidgetMutation,\n} from \"../../../generated/graphql\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport {\n  Box,\n  Avatar,\n  Tooltip,\n  IconButton,\n  Dialog,\n  DialogContent,\n  DialogActions,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  TrashCanOutline,\n  Pencil,\n  ContentSave,\n  Cancel,\n  LinkVariant,\n} from \"mdi-material-ui\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { Widget } from \"../../../generated/graphql\";\nimport { browserHistory } from \"../../../utilities/history\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { setTheme } from \"../../../themes/manager\";\nconst VickyMD = require(\"vickymd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      width: \"100%\",\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    widgetTitle: {\n      marginLeft: `${theme.spacing(1)}px !important`,\n    },\n    widgetSourceLink: {\n      marginTop: `8px`,\n      marginLeft: theme.spacing(0.5),\n    },\n    actionButtons: {\n      position: \"absolute\",\n      right: \"0\",\n      top: \"0\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"marginTop\": theme.spacing(2),\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      \"backgroundColor\": \"inherit !important\",\n      \"paddingTop\": theme.spacing(1),\n      \"paddingBottom\": theme.spacing(1),\n      \"& p:last-child\": {\n        marginBottom: \"0 !important\",\n      },\n      \"& br\": {\n        // display: \"none\"\n      },\n    },\n  }),\n);\n\ninterface Props {\n  widget: Widget;\n  removeSelf?: () => void;\n  isPreview: Boolean;\n}\n\nexport function WidgetTopPanel(props: Props) {\n  const classes = useStyles(props);\n  const widget = props.widget;\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n\n  const [\n    resDeleteWidget,\n    executeDeleteWidgetMutation,\n  ] = useDeleteWidgetMutation();\n  const [\n    resUpdateWidget,\n    executeUpdateWidgetMutation,\n  ] = useUpdateWidgetMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [widgetSource, setWidgetSource] = useState<string>(\"\");\n\n  const deleteWidget = useCallback(() => {\n    if (widget && widget.id) {\n      executeDeleteWidgetMutation({\n        id: widget.id,\n      });\n    }\n  }, [widget, executeDeleteWidgetMutation]);\n\n  const updateWidget = useCallback(() => {\n    if (editor && widget) {\n      const description = editor.getValue() || widget.description;\n      executeUpdateWidgetMutation({\n        id: widget.id,\n        description,\n        source: widgetSource,\n      });\n      widget.description = description;\n      widget.source = widgetSource;\n      setForceUpdate(Date.now());\n    }\n    setEditDialogOpen(false);\n  }, [editor, widget, executeUpdateWidgetMutation, widgetSource]);\n\n  const closeEditDialog = useCallback(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    }\n    setEditDialogOpen(false);\n  }, [widget]);\n\n  // Delete widget\n  useEffect(() => {\n    if (!widget.id) {\n      return;\n    }\n    const err = () => {\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-delete-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n    };\n    if (resDeleteWidget.error) {\n      err();\n    } else if (resDeleteWidget.data) {\n      if (resDeleteWidget.data.deleteWidget) {\n        resDeleteWidget.data = null;\n        if (props.removeSelf) {\n          props.removeSelf();\n        }\n      } else {\n        err();\n      }\n    }\n  }, [resDeleteWidget, t, widget, props]);\n\n  useEffect(() => {\n    if (widget && previewElement) {\n      renderPreview(previewElement, widget.description);\n    }\n  }, [widget, previewElement, forceUpdate]);\n\n  useEffect(() => {\n    if (!widget) {\n      return;\n    }\n\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(widget.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      editor.focus();\n      setEditor(editor);\n\n      return () => {\n        setEditor(null);\n        setTextAreaElement(null);\n      };\n    }\n  }, [textAreaElement, widget]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    } else {\n      setWidgetSource(\"\");\n    }\n  }, [widget]);\n\n  return (\n    <Box className={clsx(classes.topPanel)}>\n      <div\n        className={clsx(classes.preview, \"preview\")}\n        style={{ whiteSpace: \"normal\" }}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n\n      <Box className={clsx(classes.actionButtons)}>\n        {widget.source && (\n          <Tooltip title={t(\"general/Source\")}>\n            <Link\n              href={widget.source}\n              onClick={(event: any) => {\n                event.preventDefault();\n                if (widget.source.startsWith(window.location.origin)) {\n                  browserHistory.push(\n                    widget.source.replace(window.location.origin, \"\"),\n                  );\n                } else {\n                  window.open(widget.source, \"_blank\");\n                }\n              }}\n            >\n              <IconButton>\n                <LinkVariant></LinkVariant>\n              </IconButton>\n            </Link>\n          </Tooltip>\n        )}\n        <Tooltip title={widget.owner.username}>\n          <IconButton>\n            <Avatar\n              className={clsx(classes.avatar)}\n              variant={\"rounded\"}\n              src={\n                widget.owner.avatar ||\n                \"data:image/png;base64,\" +\n                  new Identicon(sha256(widget.owner.username), 80).toString()\n              }\n            ></Avatar>\n          </IconButton>\n        </Tooltip>\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Edit\")}>\n            <IconButton onClick={() => setEditDialogOpen(true)}>\n              <Pencil></Pencil>\n            </IconButton>\n          </Tooltip>\n        )}\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Delete\")}>\n            <IconButton onClick={deleteWidget}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Tooltip>\n        )}\n      </Box>\n      <Dialog open={editorDialogOpen} onClose={closeEditDialog}>\n        <DialogContent>\n          <TextField\n            label={t(\"general/Source\")}\n            value={widgetSource}\n            onChange={(event) => setWidgetSource(event.target.value)}\n            fullWidth={true}\n          ></TextField>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <Typography variant={\"caption\"} color={\"textSecondary\"}>\n              {t(\"general/Description\")}\n            </Typography>\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton onClick={updateWidget}>\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton onClick={closeEditDialog}>\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  useCreateCommentWidgetMutation,\n  useCommentWidgetQuery,\n  CommentWidgetFieldsFragment,\n  useAddReactionToCommentWidgetMutation,\n  useRemoveReactionFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { getHeaderFromMarkdown } from \"../../../utilities/note\";\nimport { Provider } from \"urql\";\nimport { GraphQLClient } from \"../../../utilities/client\";\nimport {\n  Button,\n  Box,\n  Typography,\n  Avatar,\n  Tooltip,\n  Badge,\n  Dialog,\n  Chip,\n} from \"@material-ui/core\";\nimport { CommentOutline, StickerEmoji } from \"mdi-material-ui\";\nimport { Emoji, Picker as EmojiPicker } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { CommentDialog } from \"./CommentDialog\";\nimport { WidgetTopPanel } from \"../widget/WidgetTopPanel\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    commentWidget: {\n      position: \"relative\",\n      // backgroundColor: theme.palette.grey[100],\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    topPanel: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n    },\n    interactionPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    button: {},\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nfunction CommentWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const widgetID = props.attributes[\"id\"];\n  const editor = props.editor;\n  const { t } = useTranslation();\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [commentDialogOpen, setCommentDialogOpen] = useState<boolean>(false);\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [\n    resCreateCommentWidget,\n    executeCreateCommentWidgetMutation,\n  ] = useCreateCommentWidgetMutation();\n  const [resCommentWidget, executeCommentWidgetQuery] = useCommentWidgetQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n    variables: {\n      widgetID,\n    },\n  });\n  const [\n    resAddReactionToCommentWidget,\n    executeAddReactionToCommentWidgetMutation,\n  ] = useAddReactionToCommentWidgetMutation();\n  const [\n    resRemoveReactionFromCommentWidget,\n    executeRemoveReactionFromCommentWidgetMutation,\n  ] = useRemoveReactionFromCommentWidgetMutation();\n  const [commentWidget, setCommentWidget] = useState<\n    CommentWidgetFieldsFragment\n  >(null);\n\n  const updateReactionSummaries = useCallback(\n    (reaction: string) => {\n      if (!commentWidget) {\n        return;\n      }\n      let found = false;\n      for (\n        let i = 0;\n        i < commentWidget.instance.commentWidget.reactionSummaries.length;\n        i++\n      ) {\n        if (\n          commentWidget.instance.commentWidget.reactionSummaries[i].reaction ===\n          reaction\n        ) {\n          found = true;\n          commentWidget.instance.commentWidget.reactionSummaries[i].count += 1;\n          commentWidget.instance.commentWidget.reactionSummaries[\n            i\n          ].selfAuthored = true;\n          break;\n        }\n      }\n      if (!found) {\n        commentWidget.instance.commentWidget.reactionSummaries = [\n          {\n            reaction: reaction,\n            count: 1,\n            selfAuthored: true,\n          },\n          ...commentWidget.instance.commentWidget.reactionSummaries,\n        ];\n        commentWidget.instance.commentWidget.reactionsCount += 1;\n      }\n      setForceUpdate(Date.now());\n    },\n    [commentWidget],\n  );\n\n  // Create comment widget\n  useEffect(() => {\n    if (widgetID || props.isPreview) {\n      return;\n    }\n    if (resCreateCommentWidget.error) {\n      // TODO: Either user not logged in or server failed to create the widget\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-create-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n\n      if (!globalContainers.cloudContainer.loggedIn) {\n        new Noty({\n          type: \"info\",\n          text: t(\"general/please-sign-in-first\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 5000,\n        }).show();\n        globalContainers.cloudContainer.setAuthDialogOpen(true);\n      }\n\n      props.removeSelf();\n    } else if (resCreateCommentWidget.data) {\n      const id = resCreateCommentWidget.data.createWidget.id;\n      props.setAttributes(Object.assign(props.attributes, { id }));\n    }\n  }, [resCreateCommentWidget, t, props, widgetID]);\n\n  useEffect(() => {\n    if (resCommentWidget.error) {\n      // TODO: This part has issue if we delete a widget and create a new one. The error will repeatly occur.\n      /*\n      console.log(resCommentWidget.error);\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-fetch-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000\n      }).show();\n      */\n      setCommentWidget(null);\n    } else if (resCommentWidget.data) {\n      setCommentWidget(resCommentWidget.data.widget);\n      resCommentWidget.data = null;\n    }\n  }, [resCommentWidget, t]);\n\n  // Create widget\n  useEffect(() => {\n    if (\n      !widgetID &&\n      !resCreateCommentWidget.fetching &&\n      !resCreateCommentWidget.error &&\n      !resCreateCommentWidget.data &&\n      editor\n    ) {\n      const title =\n        getHeaderFromMarkdown(editor.getValue()) || t(\"general/Untitled\");\n      const source = window.location.href;\n      const description = `💬  **${title}**`;\n      executeCreateCommentWidgetMutation({\n        description,\n        source,\n      });\n    }\n  }, [\n    widgetID,\n    resCreateCommentWidget,\n    editor,\n    t,\n    executeCreateCommentWidgetMutation,\n  ]);\n\n  // Query created widget\n  useEffect(() => {\n    if (widgetID && executeCommentWidgetQuery) {\n      executeCommentWidgetQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [widgetID, executeCommentWidgetQuery]);\n\n  if (resCommentWidget.error) {\n    return <Box>{t(\"error/failed-to-load-widget\")}</Box>;\n  }\n\n  if (!widgetID) {\n    return <Box>{t(\"widget/creating-widget\")}</Box>;\n  }\n\n  if (!commentWidget) {\n    return <Box>{t(\"widget/loading-widget\")}</Box>;\n  }\n\n  return (\n    <Box\n      className={clsx(classes.commentWidget)}\n      style={{ marginBottom: props.isPreview ? \"16px\" : \"0\" }}\n    >\n      <Box className={clsx(classes.topPanel)}>\n        <WidgetTopPanel\n          widget={commentWidget as any}\n          removeSelf={props.removeSelf}\n          isPreview={props.isPreview}\n        ></WidgetTopPanel>\n      </Box>\n      <Box className={clsx(classes.interactionPanel)}>\n        <Tooltip title={t(\"interaction-panel/add-comment\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => {\n              setCommentDialogOpen(true);\n            }}\n          >\n            <CommentOutline></CommentOutline>\n            {commentWidget.instance.commentWidget.messagesCount > 0 ? (\n              <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                {commentWidget.instance.commentWidget.messagesCount}\n              </Typography>\n            ) : null}\n          </Button>\n        </Tooltip>\n        <Tooltip title={t(\"interaction-panel/add-reaction\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => setEmojiPickerOpen(true)}\n          >\n            <Badge style={{ zIndex: 0 }} color={\"secondary\"}>\n              {/* badgeContent={(note.reactions || \"+\").toString()} */}\n              <StickerEmoji />\n              {commentWidget.instance.commentWidget.reactionsCount > 0 ? (\n                <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                  {commentWidget.instance.commentWidget.reactionsCount}\n                </Typography>\n              ) : null}\n            </Badge>\n          </Button>\n        </Tooltip>\n        <Box>\n          {commentWidget.instance.commentWidget.reactionSummaries\n            .sort((x, y) => {\n              let weightX = 1;\n              let weightY = 1;\n              if (x.selfAuthored) {\n                weightX = 100;\n              }\n              if (y.selfAuthored) {\n                weightY = 100;\n              }\n              return x.count * weightX - y.count * weightY;\n            })\n            .map((reactionSummary) => {\n              return (\n                <Chip\n                  variant={\n                    reactionSummary.selfAuthored ? \"default\" : \"outlined\"\n                  }\n                  size=\"medium\"\n                  label={reactionSummary.count.toString()}\n                  color={\"primary\"}\n                  key={reactionSummary.reaction}\n                  style={{ marginRight: \"8px\" }}\n                  className={clsx(classes.reactionChip)}\n                  onClick={() => {\n                    if (!globalContainers.cloudContainer.loggedIn) {\n                      globalContainers.cloudContainer.setAuthDialogOpen(true);\n                    } else if (reactionSummary.selfAuthored) {\n                      executeRemoveReactionFromCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      reactionSummary.selfAuthored = false;\n                      reactionSummary.count -= 1;\n                      commentWidget.instance.commentWidget.reactionsCount -= 1;\n                      if (reactionSummary.count <= 0) {\n                        commentWidget.instance.commentWidget.reactionSummaries = commentWidget.instance.commentWidget.reactionSummaries.filter(\n                          (summary) =>\n                            summary.reaction !== reactionSummary.reaction,\n                        );\n                        setForceUpdate(Date.now());\n                      }\n                    } else {\n                      executeAddReactionToCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      updateReactionSummaries(reactionSummary.reaction);\n                    }\n                  }}\n                  avatar={\n                    <Avatar>\n                      <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                    </Avatar>\n                  }\n                />\n              );\n            })}\n        </Box>\n      </Box>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          emoji={\"\"}\n          showSkinTones={false}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMutation({\n                widgetID: commentWidget.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n            }\n          }}\n        ></EmojiPicker>\n      </Dialog>\n      <CommentDialog\n        open={commentDialogOpen}\n        onClose={() => setCommentDialogOpen(false)}\n        commentWidget={commentWidget}\n      ></CommentDialog>\n    </Box>\n  );\n}\n\nexport const CommentWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n        <CommentWidget {...args}></CommentWidget>\n      </ThemeProvider>\n    </Provider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  TextField,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\n// @ts-ignore\nimport Gist from \"super-react-gist\"; // <-- import the library\nimport { TrashCanOutline, TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtonsGroup: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\nfunction GitHubGistWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n\n  const setGistURL = useCallback(\n    (url: string) => {\n      try {\n        const location = new URL(url);\n        if (location.host !== \"gist.github.com\") {\n          return;\n        } else {\n          props.setAttributes({\n            url: location.origin + location.pathname,\n          });\n        }\n      } catch (error) {}\n    },\n    [props],\n  );\n\n  if (props.attributes[\"url\"]) {\n    return (\n      <Box className={\"preview github-gist\"} style={{ whiteSpace: \"normal\" }}>\n        <Gist url={props.attributes[\"url\"]}></Gist>\n        {!props.isPreview && (\n          <Box className={clsx(classes.actionButtonsGroup)}>\n            <IconButton onClick={() => props.removeSelf()}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  if (props.isPreview) {\n    return null;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.github_gist/title\")}\n      </Typography>\n      <TextField\n        label={t(\"widget/crossnote/github_gist/enter-github-gist-url\")}\n        placeholder={\"https://gist.github.com/...\"}\n        value={url}\n        onChange={(event) => setURL(event.target.value)}\n        fullWidth={true}\n        onKeyUp={(event) => {\n          if (event.which === 13) {\n            setGistURL(url);\n          }\n        }}\n      ></TextField>\n      <Box className={clsx(classes.actionButtonsGroup)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n    </Card>\n  );\n}\n\nexport const GitHubGistWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <GitHubGistWidget {...args}></GitHubGistWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","// Import VickyMD related modules\n// VickyMD\nimport \"codemirror\";\n// Load these modes if you want highlighting ...\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/addon/dialog/dialog.css\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\"; // for embedded HTML\nimport \"codemirror/mode/markdown/markdown\";\nimport \"codemirror/mode/stex/stex\"; // for Math TeX Formular\nimport \"codemirror/mode/yaml/yaml\"; // for Front Matters\nimport \"codemirror/mode/javascript/javascript\"; // eg. javascript\nimport \"codemirror/mode/python/python\";\nimport \"codemirror/addon/display/placeholder\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/keymap/vim\";\nimport \"codemirror/keymap/emacs\";\n\n// Essential\nimport \"vickymd\"; // ESSENTIAL\n// Widgets\n// Load PowerPacks if you want to utilize 3rd-party libs\nimport \"vickymd/powerpack/fold-math-with-katex\";\nimport \"vickymd/powerpack/fold-code-with-mermaid\";\nimport \"vickymd/powerpack/fold-code-with-plantuml\";\nimport \"vickymd/powerpack/fold-code-with-echarts\";\nimport \"vickymd/powerpack/fold-code-with-wavedrom\";\nimport \"vickymd/powerpack/hover-with-marked\";\nimport { registerWidgetCreator } from \"vickymd/widget\";\nimport { TimerWidgetCreator } from \"./widgets/timer\";\nimport { ImageWidgetCreator } from \"./widgets/image\";\nimport { AudioWidgetCreator } from \"./widgets/audio\";\n// import { NeteaseMusicWidgetCreator } from \"./widgets/netease_music\";\nimport { VideoWidgetCreator } from \"./widgets/video\";\nimport { BilibiliWidgetCreator } from \"./widgets/bilibili\";\nimport { YoutubeWidgetCreator } from \"./widgets/youtube\";\nimport { OCRWidgetCreator } from \"./widgets/ocr\";\nimport { KanbanWidgetCreator } from \"./widgets/kanban\";\n// import { ABCWidgetCreator } from \"./widgets/abc\";\nimport { CommentWidgetCreator } from \"./widgets/comment\";\nimport { GitHubGistWidgetCreator } from \"./widgets/github_gist\";\n\n// Set necessary window scope variables\nwindow[\"CodeMirror\"] = require(\"codemirror\");\n\n// Register widget creators\nregisterWidgetCreator(\"timer\", TimerWidgetCreator);\nregisterWidgetCreator(\"crossnote.image\", ImageWidgetCreator);\nregisterWidgetCreator(\"crossnote.audio\", AudioWidgetCreator);\n// registerWidgetCreator(\"crossnote.netease_music\", NeteaseMusicWidgetCreator);\nregisterWidgetCreator(\"crossnote.video\", VideoWidgetCreator);\nregisterWidgetCreator(\"crossnote.bilibili\", BilibiliWidgetCreator);\nregisterWidgetCreator(\"crossnote.youtube\", YoutubeWidgetCreator);\nregisterWidgetCreator(\"crossnote.ocr\", OCRWidgetCreator);\nregisterWidgetCreator(\"crossnote.kanban\", KanbanWidgetCreator);\n// registerWidgetCreator(\"crossnote.abc\", ABCWidgetCreator);\nregisterWidgetCreator(\"crossnote.comment\", CommentWidgetCreator);\nregisterWidgetCreator(\"crossnote.github_gist\", GitHubGistWidgetCreator);\n\nconst packageJSON = require(\"../../package.json\");\nexport const VickyMDVersion: string = packageJSON.dependencies.vickymd;\n","import { createMuiTheme, Theme, ThemeOptions } from \"@material-ui/core\";\nimport { ThemeName } from \"vickymd/theme\";\n\ninterface CrossnoteThemeProps {\n  name: ThemeName;\n  muiThemeOptions: ThemeOptions;\n}\n\nexport class CrossnoteTheme {\n  public name: ThemeName;\n  public muiTheme: Theme;\n  constructor({ name, muiThemeOptions }: CrossnoteThemeProps) {\n    this.name = name;\n    this.muiTheme = createMuiTheme(muiThemeOptions);\n  }\n}\n","import { CrossnoteTheme } from \"./theme\";\nimport { lighten } from \"@material-ui/core\";\n\nexport const DarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"dark\",\n  muiThemeOptions: {\n    palette: {\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#1e1e1e\", 0.05),\n        default: \"#1e1e1e\",\n      },\n      primary: {\n        light: \"#7986cb\",\n        main: \"rgba(144, 19, 254, 1)\",\n        dark: \"#303f9f\",\n        contrastText: \"#fff\",\n      },\n      secondary: {\n        light: \"#ff4081\",\n        main: \"#f50057\",\n        dark: \"#c51162\",\n        contrastText: \"#fff\",\n      },\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      divider: \"#222\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n        disabled: \"rgba(121, 7, 7, 0.38)\",\n        hint: \"rgba(0, 0, 0, 0.38)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n        disabled: \"#353535\",\n      },\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { blue, orange } from \"@material-ui/core/colors\";\n\nexport const LightTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"light\",\n  muiThemeOptions: {\n    palette: {\n      primary: blue,\n      secondary: orange,\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { lighten } from \"@material-ui/core\";\nimport { blueGrey, cyan } from \"@material-ui/core/colors\";\n\nexport const OneDarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"one-dark\",\n  muiThemeOptions: {\n    palette: {\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#282c34\", 0.05),\n        default: \"#282c34\",\n      },\n      primary: cyan,\n      secondary: blueGrey,\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      divider: \"#222\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n        disabled: \"rgba(121, 7, 7, 0.38)\",\n        hint: \"rgba(0, 0, 0, 0.38)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n        disabled: \"#353535\",\n      },\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { orange, amber } from \"@material-ui/core/colors\";\nimport { lighten } from \"@material-ui/core\";\n\nexport const SolarizedLight: CrossnoteTheme = new CrossnoteTheme({\n  name: \"solarized-light\",\n  muiThemeOptions: {\n    palette: {\n      primary: orange,\n      secondary: amber,\n      background: {\n        paper: lighten(\"#fdf6e3\", 0.05),\n        default: \"#fdf6e3\",\n      },\n    },\n  },\n});\n","import { Editor } from \"codemirror\";\nimport { setTheme as VickyMDSetTheme, ThemeName } from \"vickymd/theme\";\nimport { VickyMDVersion } from \"../editor\";\nimport { DarkTheme } from \"./dark\";\nimport { LightTheme } from \"./light\";\nimport { OneDarkTheme } from \"./one-dark\";\nimport { SolarizedLight } from \"./solarized-light\";\nimport { CrossnoteTheme } from \"./theme\";\n\nexport function setTheme({\n  editor,\n  themeName,\n}: {\n  editor?: Editor;\n  themeName: ThemeName;\n}) {\n  return VickyMDSetTheme({\n    editor,\n    themeName,\n    baseUri: `${\n      window.location.origin.match(/0xgg\\./i) ? \"/crossnote\" : \"\"\n    }/styles/vickymd@${VickyMDVersion}/`,\n  });\n}\n\nexport class ThemeManager {\n  public themes: CrossnoteTheme[] = [];\n  public selectedTheme: CrossnoteTheme = null;\n  public addTheme(theme: CrossnoteTheme) {\n    this.themes.push(theme);\n    if (!this.selectedTheme) {\n      this.selectTheme(theme.name);\n    }\n  }\n\n  public getTheme(name: string) {\n    return this.themes.find((theme) => theme.name === name);\n  }\n\n  public selectTheme(name: string) {\n    if (!name) {\n      return;\n    }\n    const theme = this.themes.find((t) => t.name === name);\n    if (!theme) {\n      return;\n    }\n    this.selectedTheme = theme;\n    setTheme({\n      themeName: theme.name,\n    });\n  }\n}\n\nconst _themeManager = new ThemeManager();\n_themeManager.addTheme(LightTheme);\n_themeManager.addTheme(DarkTheme);\n_themeManager.addTheme(OneDarkTheme);\n_themeManager.addTheme(SolarizedLight);\n\nexport const themeManager = _themeManager;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { createContainer } from \"unstated-next\";\nimport { ThemeName } from \"vickymd/theme\";\nimport { getKeyMap, KeyMap } from \"../lib/keymap\";\nimport { themeManager } from \"../themes/manager\";\nimport { CrossnoteTheme } from \"../themes/theme\";\n\ninterface InitialState {}\n\nfunction useSettingsContainer(initialState: InitialState) {\n  const [language, setLanguage] = useState<string>(\n    localStorage.getItem(\"settings/language\") || \"en-US\",\n  );\n  const [editorCursorColor, setEditorCursorColor] = useState<string>(\n    localStorage.getItem(\"settings/editorCursorColor\") ||\n      \"rgba(74, 144, 226, 1)\",\n  );\n  const [authorName, setAuthorName] = useState<string>(\n    localStorage.getItem(\"settings/authorName\") || \"Anonymous\",\n  );\n  const [authorEmail, setAuthorEmail] = useState<string>(\n    localStorage.getItem(\"settings/authorEmail\") || \"anonymous@crossnote.app\",\n  );\n  const [theme, setTheme] = useState<CrossnoteTheme>(\n    themeManager.getTheme(localStorage.getItem(\"settings/theme\")) ||\n      themeManager.selectedTheme,\n  );\n  const [keyMap, setKeyMap] = useState<KeyMap>(\n    getKeyMap(localStorage.getItem(\"settings/keyMap\")) || KeyMap.DEFAULT,\n  );\n\n  const { t, i18n } = useTranslation();\n\n  const _setLanguage = useCallback(\n    (language: string) => {\n      if (\n        language === \"en-US\" ||\n        language === \"zh-CN\" ||\n        language === \"zh-TW\" ||\n        language === \"ja-JP\"\n      ) {\n        localStorage.setItem(\"settings/language\", language);\n        setLanguage(language);\n        i18n.changeLanguage(language);\n      } else {\n        localStorage.setItem(\"settings/language\", \"en-US\");\n        setLanguage(\"en-US\");\n        i18n.changeLanguage(\"en-US\");\n      }\n    },\n    [i18n],\n  );\n\n  const _setEditorCursorColor = useCallback((editorCursorColor: string) => {\n    editorCursorColor = editorCursorColor || \"rgba(74, 144, 226, 1)\";\n    localStorage.setItem(\"settings/editorCursorColor\", editorCursorColor);\n    setEditorCursorColor(editorCursorColor);\n  }, []);\n\n  const _setAuthorName = useCallback((authorName: string) => {\n    localStorage.setItem(\"settings/authorName\", authorName);\n    setAuthorName(authorName);\n  }, []);\n\n  const _setAuthorEmail = useCallback((authorEmail: string) => {\n    localStorage.setItem(\"settings/authorEmail\", authorEmail);\n    setAuthorEmail(authorEmail);\n  }, []);\n\n  const _setTheme = useCallback((themeName: string) => {\n    themeManager.selectTheme(themeName);\n    localStorage.setItem(\"settings/theme\", themeManager.selectedTheme.name);\n    setTheme(themeManager.selectedTheme);\n  }, []);\n\n  const _setKeyMap = useCallback((keyMap: KeyMap) => {\n    localStorage.setItem(\"settings/keyMap\", keyMap);\n    setKeyMap(keyMap);\n  }, []);\n\n  useEffect(() => {\n    const themeName = localStorage.getItem(\"settings/theme\") as ThemeName;\n    if (themeName) {\n      _setTheme(themeName);\n    }\n  }, [_setTheme]);\n\n  return {\n    language,\n    setLanguage: _setLanguage,\n    editorCursorColor,\n    setEditorCursorColor: _setEditorCursorColor,\n    authorName,\n    setAuthorName: _setAuthorName,\n    authorEmail,\n    setAuthorEmail: _setAuthorEmail,\n    theme,\n    setTheme: _setTheme,\n    keyMap,\n    setKeyMap: _setKeyMap,\n  };\n}\n\nexport const SettingsContainer = createContainer(useSettingsContainer);\n","import {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Box,\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  FormControlLabel,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport { ChevronDown, FolderOpen } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  canCancel: boolean;\n\n  notebookName?: string;\n  gitURL?: string;\n  gitBranch?: string;\n}\n\nexport default function AddNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(true);\n  const [gitURL, setGitURL] = useState<string>(props.gitURL || \"\");\n  const [gitBranch, setGitBranch] = useState<string>(props.gitBranch || \"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [rememberCredentialsChecked, setRememberCredentialsChecked] = useState<\n    boolean\n  >(false);\n  const { t } = useTranslation();\n  const theme = useTheme();\n\n  const close = useCallback(() => {\n    setNotebookName(\"\");\n    setGitURL(\"\");\n    setGitBranch(\"\");\n    setGitUsername(\"\");\n    setGitPassword(\"\");\n    setExpanded(false);\n    props.onClose();\n  }, [props]);\n\n  const addNotebook = useCallback(async () => {\n    try {\n      if (gitURL.trim().length) {\n        new Noty({\n          type: \"info\",\n          text: t(\"info/downloading-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n      close();\n      await crossnoteContainer.addNotebook(\n        notebookName,\n        gitURL.trim(),\n        gitBranch.trim() || \"master\",\n        gitUsername,\n        gitPassword,\n        rememberCredentialsChecked,\n        gitCorsProxy,\n      );\n    } catch (error) {\n      new Noty({\n        type: \"error\",\n        text: error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      close();\n    }\n  }, [\n    props,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    rememberCredentialsChecked,\n    gitCorsProxy,\n    close,\n    t,\n  ]);\n\n  useEffect(() => {\n    const i = props.gitURL.lastIndexOf(\"/\");\n    const name = props.gitURL.slice(i + 1).replace(/\\.git/, \"\");\n\n    setNotebookName(props.notebookName || name);\n    setGitURL(props.gitURL);\n    setGitBranch(props.gitBranch);\n    setExpanded(true);\n  }, [props.gitURL, props.gitBranch, props.notebookName]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isAddingNotebook) {\n          props.onClose();\n        }\n      }}\n    >\n      <DialogTitle>{t(\"general/add-a-notebook\")}</DialogTitle>\n      <DialogContent>\n        <Box>\n          <Button\n            style={{\n              margin: `${theme.spacing(2)}px auto`,\n              padding: `${theme.spacing(2)}px 0`,\n              width: \"100%\",\n            }}\n            color={\"primary\"}\n            variant={\"outlined\"}\n            startIcon={<FolderOpen></FolderOpen>}\n            size={\"small\"}\n            onClick={() => {\n              crossnoteContainer.openLocalNotebook();\n              props.onClose();\n            }}\n            disabled={!(\"showDirectoryPicker\" in window)}\n          >\n            {\"showDirectoryPicker\" in window\n              ? t(\"general/open-a-local-folder\")\n              : t(\"general/your-browser-doesnt-support-to-open-local-folder\")}\n          </Button>\n          <Box style={{ position: \"relative\" }}>\n            <Typography\n              variant={\"subtitle1\"}\n              style={{\n                position: \"absolute\",\n                top: \"-14px\",\n                left: \"50%\",\n                transform: \"translateX(-50%)\",\n              }}\n            >\n              {t(\"widget/crossnote.auth/Or\")}\n            </Typography>\n            <Divider\n              style={{\n                margin: `${theme.spacing(3)}px auto`,\n                width: \"100%\",\n              }}\n            ></Divider>\n          </Box>\n        </Box>\n        <Typography variant={\"caption\"}>\n          {\"* \" + t(\"add-notebook-dialog/disclaimer\")}\n        </Typography>\n        <br></br>\n        <br></br>\n        {/*\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        */}\n        <Accordion\n          elevation={2}\n          expanded={expanded}\n          onChange={() => setExpanded(!expanded)}\n        >\n          <AccordionSummary expandIcon={<ChevronDown></ChevronDown>}>\n            <Typography>{`${t(\"general/clone-a-git-repository\")}`}</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <Box>\n              <TextField\n                label={t(\"general/url\")}\n                placeholder={\"https://github.com/0xGG/crossnote.git\"}\n                fullWidth={true}\n                value={gitURL}\n                onChange={(event) => setGitURL(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/branch\")}\n                placeholder={\"master\"}\n                fullWidth={true}\n                value={gitBranch}\n                onChange={(event) => setGitBranch(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Username\")} (${t(\n                  \"general/optional\",\n                )})`}\n                fullWidth={true}\n                value={gitUsername}\n                onChange={(event) => setGitUsername(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Password\")} (${t(\n                  \"general/optional\",\n                )})`}\n                type={\"password\"}\n                fullWidth={true}\n                value={gitPassword}\n                onChange={(event) => setGitPassword(event.target.value)}\n              ></TextField>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={rememberCredentialsChecked}\n                    onChange={() =>\n                      setRememberCredentialsChecked(!rememberCredentialsChecked)\n                    }\n                    value={rememberCredentialsChecked}\n                  />\n                }\n                label={\n                  <Typography>\n                    {t(\"general/remember-username-and-password\") +\n                      \" \" +\n                      (rememberCredentialsChecked\n                        ? `(${t(\"general/stored-locally\")})`\n                        : \"\")}\n                  </Typography>\n                }\n              />\n              <TextField\n                label={t(\"general/cors-proxy\")}\n                placeholder={\"https://crossnote.app/cors/\"}\n                fullWidth={true}\n                value={gitCorsProxy}\n                onChange={(event) => setGitCorsProxy(event.target.value)}\n              ></TextField>\n              <Link\n                href={\n                  \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                }\n                target={\"_blank\"}\n              >\n                {t(\"general/why-cors-proxy\")}\n              </Link>\n            </Box>\n          </AccordionDetails>\n        </Accordion>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={addNotebook}\n          disabled={crossnoteContainer.isAddingNotebook}\n        >\n          {crossnoteContainer.isAddingNotebook\n            ? `${t(\"general/adding\")}...`\n            : t(\"general/add\")}\n        </Button>\n        {props.canCancel && (\n          <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import Noty from \"noty\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { createContainer } from \"unstated-next\";\nimport {\n  NotebookFieldsFragment,\n  User,\n  useSetUserInfoMutation,\n  useViewerQuery,\n} from \"../generated/graphql\";\nimport { SettingsContainer } from \"./settings\";\n\ninterface InitialState {}\n\nfunction useCloudContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n\n  const [authDialogOpen, setAuthDialogOpen] = useState<boolean>(false);\n  const [loggedIn, setLoggedIn] = useState<boolean>(false);\n  const [viewer, setViewer] = useState<User>(null);\n  const [resViewer, executeViewerQuery] = useViewerQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [resSetUserInfo, executeSetUserInfoMutation] = useSetUserInfoMutation();\n  const [token, setToken] = useState<string>(\n    localStorage.getItem(\"token\") || \"\",\n  );\n  const [selectedNotebook, setSelectedNotebook] = useState<\n    NotebookFieldsFragment\n  >(null);\n  const [displayNotebookPreview, setDisplayNotebookPreview] = useState<boolean>(\n    false,\n  );\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const refetchViewer = useCallback(() => {\n    if (token) {\n      executeViewerQuery({\n        requestPolicy: \"network-only\",\n        pollInterval: 60 * 1000, // Refetch the viewer every 60 seconds for checking notifications\n      });\n    }\n  }, [executeViewerQuery, token]);\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  const setUserInfo = useCallback(\n    ({\n      name = \"\",\n      cover = \"\",\n      avatar = \"\",\n      language = \"en-US\",\n      editorCursorColor = \"rgba(74, 144, 226, 1)\",\n    }) => {\n      executeSetUserInfoMutation({\n        cover,\n        name,\n        avatar,\n        bio: \"\",\n        language,\n        location: \"\",\n        editorCursorColor,\n      });\n    },\n    [executeSetUserInfoMutation],\n  );\n\n  const reduceNotificationsCountByOne = useCallback(() => {\n    if (viewer) {\n      viewer.notifications.totalCount = Math.max(\n        0,\n        viewer.notifications.totalCount - 1,\n      );\n      setViewer(Object.assign({}, viewer) as User);\n    }\n  }, [viewer]);\n\n  const clearNotificationsCount = useCallback(() => {\n    viewer.notifications.totalCount = 0;\n    setViewer(Object.assign({}, viewer) as User);\n  }, [viewer]);\n\n  useEffect(() => {\n    if (resViewer.fetching) {\n    } else if (resViewer.error) {\n      /*\n      // Don't display error message here\n      // because the application might be offline now\n      new Noty({\n        type: \"error\",\n        text: resViewer.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n      // logout(); // <= Cause mobile device login failure.\n    } else if (resViewer.data && resViewer.data.viewer) {\n      const viewer = resViewer.data.viewer as User;\n      setViewer(viewer);\n    }\n  }, [resViewer]);\n\n  useEffect(() => {\n    if (viewer) {\n      setLoggedIn(true);\n      if (!loggedIn) {\n        // NOTE: Stop syncing properties below from the cloud\n        // settingsContainer.setLanguage(viewer.language);\n        // settingsContainer.setAuthorName(viewer.name);\n        // settingsContainer.setAuthorEmail(viewer.email);\n        // settingsContainer.setEditorCursorColor(viewer.editorCursorColor);\n      }\n    }\n  }, [loggedIn, viewer]);\n\n  useEffect(() => {\n    if (token && refetchViewer) {\n      refetchViewer();\n    }\n  }, [token, refetchViewer]);\n\n  useEffect(() => {\n    if (resSetUserInfo.fetching) {\n    } else if (resSetUserInfo.error) {\n      new Noty({\n        type: \"error\",\n        text: resSetUserInfo.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resSetUserInfo.data && resSetUserInfo.data.setUserInfo) {\n      setViewer(resSetUserInfo.data.setUserInfo as User);\n      new Noty({\n        type: \"success\",\n        text: t(\"general/profile-updated\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [\n    resSetUserInfo,\n    /*\n    t // TODO: Will cause repeated run\n    */\n  ]);\n\n  return {\n    loggedIn,\n    logout,\n    authDialogOpen,\n    setAuthDialogOpen,\n    viewer,\n    refetchViewer,\n    resSetUserInfo,\n    setUserInfo,\n    reduceNotificationsCountByOne,\n    clearNotificationsCount,\n    selectedNotebook,\n    setSelectedNotebook,\n    displayNotebookPreview,\n    setDisplayNotebookPreview,\n  };\n}\n\nexport const CloudContainer = createContainer(useCloudContainer);\n","import {\n  Avatar,\n  Box,\n  Button,\n  Chip,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { Github } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport {\n  useResetPasswordMutation,\n  useSendEmailVerificationCodeMutation,\n  useSignInMutation,\n  useSignUpMutation,\n} from \"../generated/graphql\";\nimport { browserHistory } from \"../utilities/history\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    form: {\n      position: \"relative\",\n      width: \"400px\",\n      // height: \"360px\",\n      maxWidth: \"90%\",\n      margin: \"0 auto\",\n      padding: \"24px 12px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n    },\n    header: {\n      marginBottom: \"24px\",\n    },\n    username: {\n      marginBottom: \"24px\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    authBtn: {\n      marginBottom: \"16px\",\n    },\n    switchLink: {\n      \"marginTop\": \"16px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n  }),\n);\n\nenum Stage {\n  Signin,\n  Signup,\n  ForgotPassword,\n}\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n}\nexport function AuthDialog(props: Props) {\n  const classes = useStyles(props);\n  const [stage, setStage] = useState<Stage>(Stage.Signin);\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [passwordConfirmation, setPasswordConfirmation] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [verificationCode, setVerificationCode] = useState<string>(\"\");\n  const cloudContainer = CloudContainer.useContainer();\n\n  const [resSignIn, executeSignInMutation] = useSignInMutation();\n  const [resSignUp, executeSignUpMutation] = useSignUpMutation();\n  const [\n    resSendEmailVerificationCode,\n    executeSendEmailVerificationCodeMutation,\n  ] = useSendEmailVerificationCodeMutation();\n  const [\n    resResetPassword,\n    executeResetPasswordMutation,\n  ] = useResetPasswordMutation();\n\n  const { t } = useTranslation();\n  const [loggedIn, setLoggedIn] = useState<boolean>(cloudContainer.loggedIn);\n\n  const signin = useCallback(() => {\n    executeSignInMutation({\n      email: email.trim(),\n      password,\n    });\n  }, [email, password, executeSignInMutation]);\n\n  const signup = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeSignUpMutation({\n        username: username.trim(),\n        email: email.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    username,\n    email,\n    password,\n    passwordConfirmation,\n    t,\n    executeSignUpMutation,\n  ]);\n\n  const sendEmailVerificationCode = useCallback(() => {\n    if (email.trim().length > 0) {\n      executeSendEmailVerificationCodeMutation({\n        email: email.trim(),\n      });\n    }\n  }, [email, executeSendEmailVerificationCodeMutation]);\n\n  const resetPassword = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeResetPasswordMutation({\n        email: email.trim(),\n        verificationCode: verificationCode.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    email,\n    password,\n    passwordConfirmation,\n    executeResetPasswordMutation,\n    verificationCode,\n    t,\n  ]);\n\n  const close = useCallback(() => {\n    setStage(Stage.Signin);\n    setErrorMessage(\"\");\n    props.onClose();\n  }, [props]);\n\n  useEffect(() => {\n    if (resSignIn.error) {\n      setErrorMessage(\n        resSignIn.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignIn.data && resSignIn.data.signIn) {\n      localStorage.setItem(\"token\", resSignIn.data.signIn.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignIn]);\n\n  useEffect(() => {\n    if (resSignUp.error) {\n      setErrorMessage(\n        resSignUp.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignUp.data && resSignUp.data.signUp) {\n      localStorage.setItem(\"token\", resSignUp.data.signUp.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUp]);\n\n  useEffect(() => {\n    if (resSendEmailVerificationCode.error) {\n      setErrorMessage(\n        resSendEmailVerificationCode.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSendEmailVerificationCode.data) {\n      if (!resSendEmailVerificationCode.data.sendEmailVerificationCode) {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_send_code\"));\n      } else {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/verification_code_sent\") + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n    }\n  }, [resSendEmailVerificationCode, email, t]);\n\n  useEffect(() => {\n    if (resResetPassword.error) {\n      setErrorMessage(\n        resResetPassword.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resResetPassword.data) {\n      if (resResetPassword.data.resetPassword) {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/password_reset\") + \" \" + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n        setTimeout(() => {\n          window.location.reload();\n        }, 4000);\n      } else {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_reset_password\"));\n      }\n    }\n  }, [resResetPassword, email, t]);\n\n  useEffect(() => {\n    setLoggedIn(cloudContainer.loggedIn);\n  }, [cloudContainer.loggedIn]);\n\n  if (cloudContainer.loggedIn) {\n    return (\n      <Dialog open={props.open} onClose={close}>\n        <DialogContent>\n          <Box\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Box\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                alignItems: \"center\",\n              }}\n            >\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {t(\"widget/crossnote.auth/hello\")}\n              </Typography>\n              <Avatar\n                className={clsx(classes.avatar)}\n                src={\n                  cloudContainer.viewer.avatar ||\n                  \"data:image/png;base64,\" +\n                    new Identicon(\n                      sha256(cloudContainer.viewer.username),\n                      80,\n                    ).toString()\n                }\n              ></Avatar>\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {\"  \" + cloudContainer.viewer.username}!\n              </Typography>\n            </Box>\n            <Button\n              variant={\"outlined\"}\n              color={\"secondary\"}\n              onClick={() => {\n                cloudContainer.logout();\n              }}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {t(\"settings/log-out\")}\n            </Button>\n          </Box>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={props.open} onClose={close}>\n      <DialogTitle>{t(\"widget/crossnote.auth/welcome\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        {stage === Stage.Signup ? (\n          <TextField\n            className={clsx(classes.email)}\n            label={t(\"general/Username\")}\n            variant=\"outlined\"\n            value={username}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setUsername(event.target.value);\n            }}\n          ></TextField>\n        ) : null}\n        <TextField\n          className={clsx(classes.email)}\n          label={t(\"general/Email\")}\n          variant=\"outlined\"\n          value={email}\n          fullWidth={true}\n          onChange={(event) => {\n            setErrorMessage(\"\");\n            setEmail(event.target.value);\n          }}\n          onClick={(event) => {\n            event.currentTarget.focus();\n          }}\n        ></TextField>\n        {stage === Stage.ForgotPassword && email.trim().length > 0 ? (\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"space-evenly\",\n            }}\n          >\n            <TextField\n              className={clsx(classes.password)}\n              label={t(\"widget/crossnote.auth/enter-the-verification-code\")}\n              variant=\"outlined\"\n              value={verificationCode}\n              fullWidth={true}\n              onChange={(event) => {\n                setErrorMessage(\"\");\n                setVerificationCode(event.target.value);\n              }}\n            ></TextField>\n            <Button\n              variant={\"outlined\"}\n              color={\"primary\"}\n              style={{ marginBottom: \"24px\" }}\n              onClick={() => sendEmailVerificationCode()}\n              disabled={resSendEmailVerificationCode.fetching}\n            >\n              {resSendEmailVerificationCode.fetching\n                ? t(\"general/sending\")\n                : t(\"widget/crossnote.auth/get-code\")}\n            </Button>\n          </Box>\n        ) : null}\n        {(stage === Stage.Signin ||\n          stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/Password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={password}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPassword(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                if (stage === Stage.Signin) {\n                  signin();\n                } /* else {\n              signup();\n            }*/\n              }\n            }}\n          ></TextField>\n        )}\n        {(stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/confirm-password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={passwordConfirmation}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPasswordConfirmation(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                signup();\n              }\n            }}\n          ></TextField>\n        )}\n        {stage === Stage.Signin ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signin()}\n              disabled={resSignIn.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-in\")}\n            </Button>\n            <Typography style={{ textAlign: \"center\" }}>\n              {t(\"widget/crossnote.auth/Or\")}\n            </Typography>\n            <Chip\n              label={t(\"widget/crossnote.auth/sign-in-with-github-account\")}\n              icon={<Github></Github>}\n              style={{ marginBottom: \"16px\", marginTop: \"16px\", width: \"100%\" }}\n              onClick={() => startGitHubOAuth()}\n            ></Chip>\n            <Divider></Divider>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signup)}\n            >\n              {t(\"widget/crossnote.auth/doesnt-have-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : stage === Stage.Signup ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signup()}\n              disabled={resSignUp.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-up\")}\n            </Button>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signin)}\n            >\n              {t(\"widget/crossnote.auth/already-have-an-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : (\n          verificationCode.length > 0 && (\n            <>\n              <Button\n                className={clsx(classes.authBtn)}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => resetPassword()}\n                disabled={resResetPassword.fetching}\n                fullWidth={true}\n              >\n                {t(\"widget/crossnote.auth/reset-password\")}\n              </Button>\n              <Link\n                className={clsx(classes.switchLink)}\n                onClick={() => setStage(Stage.Signin)}\n              >\n                {t(\"widget/crossnote.auth/already-have-an-account\")}\n              </Link>\n            </>\n          )\n        )}\n        {errorMessage.length ? (\n          <Typography className={clsx(classes.errorMessage)}>\n            {errorMessage}\n          </Typography>\n        ) : null}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import {\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n} from \"@material-ui/core\";\nimport useInterval from \"@use-it/interval\";\nimport { ChevronDown, Translate } from \"mdi-material-ui\";\nimport React, { useCallback, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\n\ninterface Props {}\nexport default function LanguageSelectorDialog(props: Props) {\n  const { t } = useTranslation();\n  // const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const languages = [\"en-US\", \"zh-CN\", \"zh-TW\", \"ja-JP\"];\n  // const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n\n  const [open, setOpen] = useState<boolean>(\n    crossnoteContainer.notebooks.length <= 1 &&\n      !localStorage.getItem(\"settings/language\"),\n  );\n  const [titleLanguage, setTitleLanguage] = useState<string>(languages[0]);\n\n  const chooseLanguage = useCallback((language: string) => {\n    settingsContainer.setLanguage(language);\n    setOpen(false);\n  }, []);\n\n  useInterval(() => {\n    let index = languages.findIndex((x) => x === titleLanguage);\n    index = index + 1;\n    if (index >= languages.length) {\n      index = 0;\n    }\n    setTitleLanguage(languages[index]);\n  }, 5000);\n\n  return (\n    <Dialog\n      open={open}\n      fullWidth={true}\n      style={{ zIndex: 2000 }}\n      onClose={() => chooseLanguage(\"en-US\")}\n    >\n      <DialogTitle style={{ textAlign: \"center\" }}>\n        {\"📝 \" + t(\"widget/crossnote.auth/welcome\", { lng: titleLanguage })}\n      </DialogTitle>\n      <DialogContent>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <Translate style={{ marginRight: \"8px\" }}></Translate>\n          {t(\"language-selector-dialog/subtitle\", { lng: titleLanguage })}\n        </Typography>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <ChevronDown></ChevronDown>\n        </Typography>\n        <List>\n          <ListItem button onClick={() => chooseLanguage(\"en-US\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>English</ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-CN\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              简体中文\n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-TW\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              繁体中文\n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"ja-JP\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>日本語</ListItemText>\n          </ListItem>\n        </List>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { Box, Hidden, IconButton, Typography } from \"@material-ui/core\";\nimport { Menu as MenuIcon } from \"mdi-material-ui\";\nimport React from \"react\";\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport function PrivacyPolicy(props: Props) {\n  return (\n    <Box style={{ padding: \"16px\" }} className={\"preview\"}>\n      <Box\n        style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\n      >\n        <Hidden smUp implementation=\"css\">\n          <IconButton onClick={props.toggleDrawer}>\n            <MenuIcon></MenuIcon>\n          </IconButton>\n        </Hidden>\n        <Typography variant={\"h2\"}>Privacy Policy</Typography>\n      </Box>\n      <p>\n        shd101wyy built the Crossnote app as an Open Source app. This SERVICE is\n        provided by shd101wyy at no cost and is intended for use as is.\n      </p>\n      <p>\n        This page is used to inform visitors regarding my policies with the\n        collection, use, and disclosure of Personal Information if anyone\n        decided to use my Service.\n      </p>\n      <p>\n        If you choose to use my Service, then you agree to the collection and\n        use of information in relation to this policy. The Personal Information\n        that I collect is used for providing and improving the Service. I will\n        not use or share your information with anyone except as described in\n        this Privacy Policy.\n      </p>\n      <p>\n        The terms used in this Privacy Policy have the same meanings as in our\n        Terms and Conditions, which is accessible at Crossnote unless otherwise\n        defined in this Privacy Policy.\n      </p>\n      <p>\n        <strong>Information Collection and Use</strong>\n      </p>\n      <p>\n        For a better experience, while using our Service, I may require you to\n        provide us with certain personally identifiable information. The\n        information that I request will be retained on your device and is not\n        collected by me in any way.\n      </p>\n      <p>\n        <strong>Log Data</strong>\n      </p>\n      <p>\n        I want to inform you that whenever you use my Service, in a case of an\n        error in the app I collect data and information (through third party\n        products) on your phone called Log Data. This Log Data may include\n        information such as your device Internet Protocol (“IP”) address, device\n        name, operating system version, the configuration of the app when\n        utilizing my Service, the time and date of your use of the Service, and\n        other statistics.\n      </p>\n      <p>\n        <strong>Cookies</strong>\n      </p>\n      <p>\n        Cookies are files with a small amount of data that are commonly used as\n        anonymous unique identifiers. These are sent to your browser from the\n        websites that you visit and are stored on your device's internal memory.\n      </p>\n      <p>\n        This Service does not use these “cookies” explicitly. However, the app\n        may use third party code and libraries that use “cookies” to collect\n        information and improve their services. You have the option to either\n        accept or refuse these cookies and know when a cookie is being sent to\n        your device. If you choose to refuse our cookies, you may not be able to\n        use some portions of this Service.\n      </p>\n      <p>\n        <strong>Service Providers</strong>\n      </p>\n      <p>\n        I may employ third-party companies and individuals due to the following\n        reasons:\n      </p>\n      <ul>\n        <li>To facilitate our Service;</li>{\" \"}\n        <li>To provide the Service on our behalf;</li>{\" \"}\n        <li>To perform Service-related services; or</li>{\" \"}\n        <li>To assist us in analyzing how our Service is used.</li>\n      </ul>\n      <p>\n        I want to inform users of this Service that these third parties have\n        access to your Personal Information. The reason is to perform the tasks\n        assigned to them on our behalf. However, they are obligated not to\n        disclose or use the information for any other purpose.\n      </p>\n      <p>\n        <strong>Security</strong>\n      </p>\n      <p>\n        I value your trust in providing us your Personal Information, thus we\n        are striving to use commercially acceptable means of protecting it. But\n        remember that no method of transmission over the internet, or method of\n        electronic storage is 100% secure and reliable, and I cannot guarantee\n        its absolute security.\n      </p>\n      <p>\n        <strong>Links to Other Sites</strong>\n      </p>\n      <p>\n        This Service may contain links to other sites. If you click on a\n        third-party link, you will be directed to that site. Note that these\n        external sites are not operated by me. Therefore, I strongly advise you\n        to review the Privacy Policy of these websites. I have no control over\n        and assume no responsibility for the content, privacy policies, or\n        practices of any third-party sites or services.\n      </p>\n      <p>\n        <strong>Children's Privacy</strong>\n      </p>\n      <p>\n        These Services do not address anyone under the age of 13. I do not\n        knowingly collect personally identifiable information from children\n        under 13. In the case I discover that a child under 13 has provided me\n        with personal information, I immediately delete this from our servers.\n        If you are a parent or guardian and you are aware that your child has\n        provided us with personal information, please contact me so that I will\n        be able to do necessary actions.\n      </p>\n      <p>\n        <strong>Changes to This Privacy Policy</strong>\n      </p>\n      <p>\n        I may update our Privacy Policy from time to time. Thus, you are advised\n        to review this page periodically for any changes. I will notify you of\n        any changes by posting the new Privacy Policy on this page.\n      </p>\n      <p>This policy is effective as of 2020-05-03</p>{\" \"}\n      <p>\n        <strong>Contact Us</strong>\n      </p>\n      <p>\n        If you have any questions or suggestions about my Privacy Policy, do not\n        hesitate to contact me at shd101wyy@gmail.com.\n      </p>\n      <p>\n        This privacy policy page was created at{\" \"}\n        <a href=\"https://privacypolicytemplate.net\" target=\"_blank\">\n          privacypolicytemplate.net\n        </a>{\" \"}\n        and modified/generated by{\" \"}\n        <a\n          href=\"https://app-privacy-policy-generator.firebaseapp.com/\"\n          target=\"_blank\"\n        >\n          App Privacy Policy Generator\n        </a>\n      </p>\n    </Box>\n  );\n}\n","import hash from \"object-hash\";\nimport { Notebook } from \"./notebook\";\nexport interface GraphViewNode {\n  id: string;\n  label: string;\n}\n\nexport interface GraphViewLink {\n  source: string;\n  target: string;\n}\n\nexport interface GraphViewData {\n  hash: string;\n  nodes: GraphViewNode[];\n  links: GraphViewLink[];\n}\n\nexport function constructGraphView(notebook: Notebook): GraphViewData {\n  const nodes: GraphViewNode[] = [];\n  const links: GraphViewLink[] = [];\n\n  const addedNodes: { [key: string]: boolean } = {};\n  const addNode = (filePath: string) => {\n    if (filePath in addedNodes) {\n      return;\n    }\n    const note = notebook.notes[filePath];\n    if (note) {\n      nodes.push({\n        id: filePath,\n        label: note.title,\n      });\n    } else {\n      const lastIndex = filePath.lastIndexOf(\".\");\n      let label = filePath;\n      if (lastIndex > 0) {\n        label = filePath.slice(0, lastIndex);\n      }\n      nodes.push({\n        id: filePath,\n        label: label,\n      });\n    }\n    addedNodes[filePath] = true;\n  };\n\n  for (const filePath in notebook.referenceMap.map) {\n    addNode(filePath);\n    for (const referredByFilePath in notebook.referenceMap.map[filePath]) {\n      addNode(referredByFilePath);\n      links.push({\n        source: referredByFilePath,\n        target: filePath,\n      });\n    }\n  }\n\n  return {\n    hash: hash({ nodes, links }),\n    nodes,\n    links,\n  };\n}\n","import {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport * as d3 from \"d3\";\nimport { TabNode } from \"flexlayout-react\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  ChangedNoteFilePathEventData,\n  CreatedNoteEventData,\n  DeletedNotebookEventData,\n  DeletedNoteEventData,\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData,\n} from \"../lib/event\";\nimport {\n  constructGraphView,\n  GraphViewData,\n  GraphViewNode,\n} from \"../lib/graphView\";\nimport { Notebook } from \"../lib/notebook\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    graphViewPanel: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n  tabNode: TabNode;\n}\n\nexport default function GraphView(props: Props) {\n  const classes = useStyles();\n  const [graphViewData, setGraphViewData] = useState<GraphViewData>({\n    hash: \"\",\n    nodes: [],\n    links: [],\n  });\n  const graphViewPanel = useRef<HTMLDivElement>(null);\n  const [width, setWidth] = useState<number>(0);\n  const [height, setHeight] = useState<number>(0);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const theme = useTheme();\n\n  useEffect(() => {\n    if (!graphViewPanel || !graphViewPanel.current) {\n      return;\n    }\n    const resize = () => {\n      setWidth(graphViewPanel.current.offsetWidth);\n      setHeight(graphViewPanel.current.offsetHeight);\n    };\n    window.addEventListener(\"resize\", resize);\n    resize();\n    return () => {\n      window.removeEventListener(\"resize\", resize);\n    };\n  }, [graphViewPanel]);\n\n  useEffect(() => {\n    if (!graphViewPanel || !props.notebook) {\n      return;\n    }\n\n    const refreshGraphViewData = () => {\n      // TODO: Improve the diff\n      const newGraphViewData = constructGraphView(props.notebook);\n      if (newGraphViewData.hash !== graphViewData.hash) {\n        setGraphViewData(newGraphViewData);\n      }\n    };\n\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const createdNoteCallback = (data: CreatedNoteEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const changedNoteFilePathCallback = (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const performedGitOperationCallback = (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const deletedNotebookCallback = (data: DeletedNotebookEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        crossnoteContainer.closeTabNode(props.tabNode.getId());\n      }\n    };\n\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.CreatedNote, createdNoteCallback);\n    globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n    globalEmitter.on(\n      EventType.ChangedNoteFilePath,\n      changedNoteFilePathCallback,\n    );\n    globalEmitter.on(\n      EventType.PerformedGitOperation,\n      performedGitOperationCallback,\n    );\n    globalEmitter.on(EventType.DeletedNotebook, deletedNotebookCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.CreatedNote, createdNoteCallback);\n      globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.off(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.off(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n      globalEmitter.off(EventType.DeletedNotebook, deletedNotebookCallback);\n    };\n  }, [graphViewPanel, props.notebook, props.tabNode, graphViewData]);\n\n  useEffect(() => {\n    const data = constructGraphView(props.notebook);\n    setGraphViewData(data);\n  }, [props.notebook]);\n\n  useEffect(() => {\n    if (\n      !graphViewPanel ||\n      !graphViewPanel.current ||\n      !graphViewData ||\n      !width ||\n      !height\n    ) {\n      return;\n    }\n\n    const svg = d3\n      .select(graphViewPanel.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const container = svg.append(\"g\");\n\n    const zoomHandler = d3\n      .zoom()\n      .scaleExtent([0.1, 4])\n      .on(\"zoom\", function (event: any) {\n        console.log(\"zoomed\");\n        (window as any)[\"event_\"] = event;\n        container.attr(\"transform\", event.transform);\n      });\n    zoomHandler(svg as any);\n\n    const link = container\n      .append(\"g\")\n      .attr(\"class\", \"links\")\n      .selectAll(\"line\")\n      .data(graphViewData.links)\n      .enter()\n      .append(\"line\")\n      .style(\"stroke\", \"#aaa\")\n      .attr(\"stroke-width\", \"1px\");\n\n    const node = container\n      .append(\"g\")\n      .attr(\"class\", \"nodes\")\n      .selectAll(\"g\")\n      .data(graphViewData.nodes)\n      .enter()\n      .append(\"circle\")\n      .attr(\"r\", 8)\n      .style(\"fill\", \"#aaa\");\n\n    const text = container\n      .append(\"g\")\n      .attr(\"class\", \"labelNodes\")\n      .selectAll(\"text\")\n      .data(graphViewData.nodes)\n      .enter()\n      .append(\"text\")\n      .text((d) => d.label)\n      .style(\"fill\", theme.palette.text.primary)\n      .style(\"font-family\", \"Arial\")\n      .style(\"font-size\", 12)\n      .style(\"pointer-events\", \"none\");\n\n    const fixna = (x: number) => {\n      if (isFinite(x)) return x;\n      return 0;\n    };\n\n    const neigh = (n1: GraphViewNode, n2: GraphViewNode) => {\n      return props.notebook.referenceMap.hasRelation(n1.id, n2.id);\n    };\n\n    const focus = (event: any, d: GraphViewNode) => {\n      node.style(\"opacity\", function (o) {\n        return neigh(d, o) ? 1 : 0.1;\n      });\n      text.attr(\"display\", function (o) {\n        return neigh(d, o) ? \"block\" : \"none\";\n      });\n\n      link.style(\"opacity\", function (o) {\n        return (o.source as any).id === d.id || (o.target as any).id === d.id\n          ? 1\n          : 0.2;\n      });\n    };\n\n    const unfocus = () => {\n      text.attr(\"display\", \"block\");\n      node.style(\"opacity\", 1);\n      link.style(\"opacity\", 1);\n    };\n\n    const dragstarted = function (event: any, d: any) {\n      console.log(\"dragstarted: \", d.active);\n      event.sourceEvent.stopPropagation();\n      if (!d.active) graphLayout.alphaTarget(0.3).restart();\n\n      // @ts-ignore\n      d3.select(this).attr(\"stroke\", \"black\");\n    };\n\n    const dragged = function (event: any, d: any) {\n      console.log(\"dragged\");\n      d.x = event.x;\n      d.y = event.y;\n      // @ts-ignore\n      d3.select(this as SVGCircleElement)\n        .raise()\n        .attr(\"transform\", (d: any) => \"translate(\" + [d.x, d.y] + \")\");\n    };\n\n    const dragended = function (event: any, d: any) {\n      console.log(\"dragended\");\n      if (!d.active) graphLayout.alphaTarget(0);\n\n      // @ts-ignore\n      d3.select(this).attr(\"stroke\", null);\n    };\n\n    const updateLink = (link: any) => {\n      link\n        .attr(\"x1\", function (d: any) {\n          return fixna(d.source.x);\n        })\n        .attr(\"y1\", function (d: any) {\n          return fixna(d.source.y);\n        })\n        .attr(\"x2\", function (d: any) {\n          return fixna(d.target.x);\n        })\n        .attr(\"y2\", function (d: any) {\n          return fixna(d.target.y);\n        });\n    };\n\n    const updateNode = (node: any) => {\n      node.attr(\"transform\", function (d: any) {\n        return \"translate(\" + fixna(d.x) + \",\" + fixna(d.y) + \")\";\n      });\n    };\n    const ticked = () => {\n      // console.log(\"ticked\");\n      node.call(updateNode);\n      link.call(updateLink);\n      text.call(updateNode);\n    };\n\n    const graphLayout = d3\n      .forceSimulation(graphViewData.nodes as any)\n      .force(\"charge\", d3.forceManyBody().strength(-3000))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2))\n      .force(\"x\", d3.forceX(width / 2).strength(1))\n      .force(\"y\", d3.forceY(height / 2).strength(1))\n      .force(\n        \"link\",\n        d3\n          .forceLink(graphViewData.links)\n          .id(function (d) {\n            return (d as GraphViewNode).id;\n          })\n          .distance(50)\n          .strength(1),\n      )\n      .on(\"tick\", ticked);\n\n    node.on(\"mouseover\", focus).on(\"mouseout\", unfocus);\n    const drag = d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n    drag(node as any);\n\n    node.on(\"click\", (event: any, d: GraphViewNode) => {\n      crossnoteContainer.openNoteAtPath(props.notebook, d.id);\n    });\n\n    console.log(\"simulated\");\n\n    return () => {\n      console.log(\"destroyed\");\n      svg.remove();\n    };\n  }, [\n    graphViewData,\n    graphViewPanel,\n    width,\n    height,\n    props.notebook,\n    theme.palette.text.primary,\n  ]);\n\n  return (\n    <div className={clsx(classes.graphViewPanel)} ref={graphViewPanel}></div>\n  );\n}\n","export enum EditorMode {\n  VickyMD = \"VickyMD\",\n  SourceCode = \"SourceCode\",\n  Preview = \"Preview\",\n  SplitView = \"SplitView\",\n}\n","export class FloatWin {\n  private el: HTMLElement;\n  public closeBtn: HTMLElement;\n  public visible: boolean;\n\n  constructor(win: HTMLElement) {\n    if (!win) {\n      return;\n    }\n\n    /** @type {HTMLDivElement} */\n    const titlebar = win.querySelector(\".float-win-title\") as HTMLElement;\n    titlebar.addEventListener(\n      \"selectstart\",\n      function () {\n        return false;\n      },\n      false,\n    );\n\n    /** @type {HTMLButtonElement} */\n    const closeBtn = win.querySelector(\".float-win-close\") as HTMLElement;\n    if (closeBtn) {\n      closeBtn.addEventListener(\n        \"click\",\n        () => {\n          this.hide();\n        },\n        false,\n      );\n      win.addEventListener(\n        \"keyup\",\n        (ev) => {\n          if (ev.keyCode === 27) this.hide(); // ESC\n        },\n        false,\n      );\n    }\n\n    let boxX: number,\n      boxY: number,\n      mouseX: number,\n      mouseY: number,\n      offsetX: number,\n      offsetY: number;\n\n    titlebar.addEventListener(\n      \"mousedown\",\n      function (e) {\n        if (e.target === closeBtn) return;\n\n        boxX = win.offsetLeft;\n        boxY = win.offsetTop;\n        mouseX = getMouseXY(e).x;\n        mouseY = getMouseXY(e).y;\n        offsetX = mouseX - boxX;\n        offsetY = mouseY - boxY;\n\n        document.addEventListener(\"mousemove\", move, false);\n        document.addEventListener(\"mouseup\", up, false);\n      },\n      false,\n    );\n\n    function move(e: any) {\n      var x = getMouseXY(e).x - offsetX;\n      var y = getMouseXY(e).y - offsetY;\n      var width = document.documentElement.clientWidth - titlebar.offsetWidth;\n      var height =\n        document.documentElement.clientHeight - titlebar.offsetHeight;\n\n      x = Math.min(Math.max(0, x), width);\n      y = Math.min(Math.max(0, y), height);\n\n      win.style.left = x + \"px\";\n      win.style.top = y + \"px\";\n    }\n\n    function up(e: any) {\n      document.removeEventListener(\"mousemove\", move, false);\n      document.removeEventListener(\"mouseup\", up, false);\n    }\n\n    function getMouseXY(e: any) {\n      var x = 0,\n        y = 0;\n      e = e || window.event;\n      if (e.pageX) {\n        x = e.pageX;\n        y = e.pageY;\n      } else {\n        x = e.clientX + document.body.scrollLeft - document.body.clientLeft;\n        y = e.clientY + document.body.scrollTop - document.body.clientTop;\n      }\n      return {\n        x: x,\n        y: y,\n      };\n    }\n\n    this.el = win;\n    this.closeBtn = closeBtn;\n    this.visible = !/float-win-hidden/.test(win.className);\n  }\n\n  public show(moveToCenter?: boolean) {\n    if (this.visible) return;\n    var el = this.el;\n\n    this.visible = true;\n    el.className = this.el.className.replace(/\\s*(float-win-hidden\\s*)+/g, \" \");\n    el.style.display = \"block\";\n\n    if (moveToCenter) {\n      setTimeout(() => {\n        this.moveTo(\n          (window.innerWidth - el.offsetWidth) / 2,\n          (window.innerHeight - el.offsetHeight) / 2,\n        );\n      }, 0);\n    }\n  }\n\n  public hide() {\n    if (!this.visible) return;\n    this.visible = false;\n    this.el.className += \" float-win-hidden\";\n    this.el.style.display = \"none\";\n  }\n\n  public moveTo(x: number, y: number) {\n    var s = this.el.style;\n    s.left = x + \"px\";\n    s.top = y + \"px\";\n  }\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  TextField,\n} from \"@material-ui/core\";\nimport { TabNode } from \"flexlayout-react\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/note\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  tabNode: TabNode;\n  note: Note;\n}\n\nexport default function ChangeFilePathDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const note = props.note;\n  const tabNode = props.tabNode;\n  const [inputEl, setInputEl] = useState<HTMLInputElement>(null);\n  const [newFilePath, setNewFilePath] = useState<string>(\n    (note && note.filePath) || \"\",\n  );\n  const { t } = useTranslation();\n\n  const changeFilePath = useCallback(\n    (newFilePath: string) => {\n      if (!note) return;\n      (async () => {\n        newFilePath = newFilePath.replace(/^\\/+/, \"\");\n        if (!newFilePath.endsWith(\".md\")) {\n          newFilePath = newFilePath + \".md\";\n        }\n        if (note.filePath !== newFilePath) {\n          try {\n            await crossnoteContainer.changeNoteFilePath(\n              tabNode,\n              note,\n              newFilePath,\n            );\n          } catch (error) {\n            new Noty({\n              type: \"error\",\n              text: t(\"error/failed-to-change-file-path\"),\n              layout: \"topRight\",\n              theme: \"relax\",\n              timeout: 5000,\n            }).show();\n          }\n        }\n        props.onClose();\n      })();\n    },\n    [note, tabNode, props, t],\n  );\n\n  useEffect(() => {\n    return () => {\n      setInputEl(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (note) {\n      setNewFilePath(note.filePath);\n    }\n  }, [note, props.open]);\n\n  useEffect(() => {\n    if (!inputEl) return;\n    inputEl.focus();\n    if (inputEl.setSelectionRange) {\n      const start = inputEl.value.lastIndexOf(\"/\") + 1;\n      let end = inputEl.value.lastIndexOf(\".md\");\n      if (end < 0) {\n        end = inputEl.value.length;\n      }\n      inputEl.setSelectionRange(start, end);\n    }\n  }, [inputEl]);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"general/change-file-path\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        <TextField\n          value={newFilePath}\n          autoFocus={true}\n          onChange={(event) => setNewFilePath(event.target.value)}\n          onKeyUp={(event) => {\n            if (event.which === 13) {\n              changeFilePath(newFilePath);\n            }\n          }}\n          inputRef={(input: HTMLInputElement) => {\n            setInputEl(input);\n          }}\n          fullWidth={true}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={() => changeFilePath(newFilePath)}\n        >\n          {t(\"general/Save\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport { TabNode } from \"flexlayout-react\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/note\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  tabNode: TabNode;\n  note: Note;\n}\n\nexport function DeleteNoteDialog(props: Props) {\n  const { t } = useTranslation();\n  const note = props.note;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"delete-note-dialog/title\")}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {t(\"delete-note-dialog/subtitle\")}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          style={{ color: \"red\" }}\n          onClick={() => {\n            crossnoteContainer.deleteNote(\n              props.tabNode,\n              note.notebookPath,\n              note.filePath,\n            );\n            props.onClose();\n          }}\n        >\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  Box,\n  Divider,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Popover,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TabNode } from \"flexlayout-react\";\nimport {\n  ContentCopy,\n  Delete,\n  Pin,\n  PinOutline,\n  Printer,\n  RenameBox,\n  Restore,\n  ShareVariant,\n  Star,\n  StarOutline,\n} from \"mdi-material-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { Note } from \"../lib/note\";\nimport { setTheme } from \"../themes/manager\";\nimport { printPreview } from \"../utilities/preview\";\nimport { copyToClipboard } from \"../utilities/utils\";\nimport ChangeFilePathDialog from \"./ChangeFilePathDialog\";\nimport { DeleteNoteDialog } from \"./DeleteNoteDialog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    secondaryColor: {\n      color: theme.palette.secondary.main,\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  note: Note;\n  anchorElement: Element;\n  onClose: () => void;\n}\n\nexport default function NotePopover(props: Props) {\n  const classes = useStyles(props);\n  const note = props.note;\n  const [deleteNoteDialogOpen, setDeleteNoteDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [\n    changeNoteFilePathDialogOpen,\n    setChangeNoteFilePathDialogOpen,\n  ] = useState<boolean>(false);\n  const [needsToPrint, setNeedsToPrint] = useState<boolean>(false);\n  const [shareAnchorEl, setShareAnchorEl] = useState<HTMLElement>(null);\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const notebook = crossnoteContainer.getNotebookAtPath(note.notebookPath);\n  const isLocal = notebook && notebook.isLocal;\n\n  // Print preview\n  useEffect(() => {\n    if (!note || !needsToPrint) {\n      return;\n    }\n\n    const tempPreviewElement = document.createElement(\"div\");\n    tempPreviewElement.classList.add(\"preview\");\n    tempPreviewElement.style.zIndex = \"999999\";\n    document.body.appendChild(tempPreviewElement);\n\n    const bannerElement = document.createElement(\"div\");\n    bannerElement.style.position = \"fixed\";\n    bannerElement.style.width = \"100%\";\n    bannerElement.style.height = \"100%\";\n    bannerElement.style.top = \"0\";\n    bannerElement.style.left = \"0\";\n    bannerElement.style.textAlign = \"center\";\n    bannerElement.style.backgroundColor = theme.palette.background.default;\n    bannerElement.style.color = theme.palette.text.primary;\n    bannerElement.style.zIndex = \"9999\";\n    bannerElement.innerHTML = `<p>${t(\"general/please-wait\")}</p>`;\n\n    const currentTheme = settingsContainer.theme.name; // editor.getOption(\"theme\") as ThemeName;\n    setTheme({\n      editor: null,\n      themeName: \"light\",\n    });\n    const printDone = () => {\n      tempPreviewElement.remove();\n      setTheme({\n        editor: null,\n        themeName: currentTheme,\n      });\n      setNeedsToPrint(false);\n    };\n    crossnoteContainer\n      .getNote(note.notebookPath, note.filePath)\n      .then((note) => {\n        const previewIsPresentation = !!note.markdown.match(/^<!--\\s*slide/im);\n        renderPreview(tempPreviewElement, note.markdown, previewIsPresentation)\n          .then(() => {\n            printPreview(tempPreviewElement, bannerElement)\n              .then(() => {\n                printDone();\n              })\n              .catch(() => {\n                printDone();\n              });\n          })\n          .catch(() => {\n            printDone();\n          });\n      })\n      .catch(() => {\n        printDone();\n      });\n  }, [\n    needsToPrint,\n    note,\n    settingsContainer.theme.name,\n    t,\n    theme.palette.background.default,\n    theme.palette.text.primary,\n  ]);\n\n  return (\n    <React.Fragment>\n      <Popover\n        anchorEl={props.anchorElement}\n        keepMounted\n        open={Boolean(props.anchorElement)}\n        onClose={props.onClose}\n      >\n        <List>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.togglePin(\n                props.tabNode,\n                note.notebookPath,\n                note.filePath,\n              );\n              props.onClose();\n            }}\n          >\n            <ListItemIcon\n              className={clsx(note.config.pinned && classes.secondaryColor)}\n            >\n              {note.config.pinned ? <Pin></Pin> : <PinOutline></PinOutline>}\n            </ListItemIcon>\n            <ListItemText\n              primary={\n                note.config.pinned\n                  ? t(\"general/unpin-the-note\")\n                  : t(\"general/pin-the-note\")\n              }\n            ></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.toggleFavorite(\n                props.tabNode,\n                note.notebookPath,\n                note.filePath,\n              );\n              props.onClose();\n            }}\n          >\n            <ListItemIcon\n              className={clsx(note.config.favorited && classes.secondaryColor)}\n            >\n              {note.config.favorited ? (\n                <Star></Star>\n              ) : (\n                <StarOutline></StarOutline>\n              )}\n            </ListItemIcon>\n            <ListItemText\n              primary={\n                note.config.favorited\n                  ? t(\"general/remove-from-quick-access\")\n                  : t(\"general/add-to-quick-access\")\n              }\n            ></ListItemText>\n          </ListItem>\n          <ListItem></ListItem>\n          <Divider></Divider>\n          <ListItem\n            button\n            onClick={() => {\n              setChangeNoteFilePathDialogOpen(true);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <RenameBox></RenameBox>\n            </ListItemIcon>\n            <ListItemText\n              primary={t(\"general/change-file-path\")}\n            ></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              setDeleteNoteDialogOpen(true);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <Delete></Delete>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Delete\")}></ListItemText>\n          </ListItem>\n          {!isLocal && (\n            <ListItem\n              button\n              onClick={() => {\n                crossnoteContainer.checkoutNote(note);\n                props.onClose();\n              }}\n            >\n              <ListItemIcon>\n                <Restore></Restore>\n              </ListItemIcon>\n              <ListItemText\n                primary={t(\"general/restore-checkout\")}\n              ></ListItemText>\n            </ListItem>\n          )}\n          <Divider></Divider>\n          {!isLocal && notebook && notebook.gitURL && (\n            <ListItem\n              button\n              onClick={(event) => setShareAnchorEl(event.currentTarget)}\n            >\n              <ListItemIcon>\n                <ShareVariant></ShareVariant>\n              </ListItemIcon>\n              <ListItemText primary={t(\"general/Share\")}></ListItemText>\n            </ListItem>\n          )}\n          <ListItem\n            button\n            onClick={() => {\n              setNeedsToPrint(true);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <Printer></Printer>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Print\")}></ListItemText>\n          </ListItem>\n        </List>\n      </Popover>\n      <DeleteNoteDialog\n        open={deleteNoteDialogOpen}\n        onClose={() => {\n          setDeleteNoteDialogOpen(false);\n        }}\n        tabNode={props.tabNode}\n        note={note}\n      ></DeleteNoteDialog>\n      <ChangeFilePathDialog\n        open={changeNoteFilePathDialogOpen}\n        onClose={() => {\n          setChangeNoteFilePathDialogOpen(false);\n        }}\n        tabNode={props.tabNode}\n        note={note}\n      ></ChangeFilePathDialog>\n      <Popover\n        open={Boolean(shareAnchorEl)}\n        anchorEl={shareAnchorEl}\n        keepMounted\n        onClose={() => setShareAnchorEl(null)}\n      >\n        <Box style={{ padding: theme.spacing(1) }}>\n          <Typography variant={\"subtitle2\"}>\n            {t(\"editor/note-control/shareable-link\")}\n          </Typography>\n          <Box className={clsx(classes.row)}>\n            <Tooltip\n              title={t(\"editor/note-control/copy-to-clipboard\")}\n              onClick={() => {\n                copyToClipboard(\n                  notebook.gitURL\n                    ? `${window.location.origin}/?repo=${encodeURIComponent(\n                        notebook.gitURL,\n                      )}&branch=${encodeURIComponent(\n                        notebook.gitBranch || \"master\",\n                      )}&filePath=${encodeURIComponent(note.filePath)}`\n                    : `${window.location.origin}/?notebookID=${\n                        notebook._id\n                      }&filePath=${encodeURIComponent(note.filePath)}`,\n                );\n              }}\n            >\n              <IconButton>\n                <ContentCopy></ContentCopy>\n              </IconButton>\n            </Tooltip>\n            <TextField\n              onChange={(event) => event.preventDefault()}\n              value={\n                notebook.gitURL\n                  ? `${window.location.origin}${\n                      window.location.origin.match(/0xgg\\./i)\n                        ? \"/crossnote\"\n                        : \"/\"\n                    }?repo=${encodeURIComponent(\n                      notebook.gitURL,\n                    )}&branch=${encodeURIComponent(\n                      notebook.gitBranch || \"master\",\n                    )}&filePath=${encodeURIComponent(note.filePath)}`\n                  : `${window.location.origin}/?notebookID=${\n                      notebook._id\n                    }&filePath=${encodeURIComponent(note.filePath)}`\n              }\n              inputRef={(input: HTMLInputElement) => {\n                if (input) {\n                  input.focus();\n                  if (input.setSelectionRange) {\n                    input.setSelectionRange(0, input.value.length);\n                  }\n                }\n              }}\n            ></TextField>\n          </Box>\n        </Box>\n      </Popover>\n    </React.Fragment>\n  );\n}\n","export enum OrderBy {\n  CreatedAt = \"CreatedAt\",\n  ModifiedAt = \"ModifiedAt\",\n  Title = \"Title\",\n}\n\nexport enum OrderDirection {\n  ASC = \"ASC\",\n  DESC = \"DESC\",\n}\n","import { Box, IconButton, Tooltip, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { formatRelative } from \"date-fns\";\nimport { formatDistanceStrict } from \"date-fns/esm\";\nimport { TabNode } from \"flexlayout-react\";\nimport { DotsVertical, Pin } from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { languageCodeToDateFNSLocale } from \"../i18n/i18n\";\nimport {\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n} from \"../lib/event\";\nimport { Note } from \"../lib/note\";\nimport { Reference } from \"../lib/reference\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport { generateSummaryFromMarkdown, Summary } from \"../utilities/note\";\nimport NotePopover from \"./NotePopover\";\n\nexport const NoteCardMargin = 4;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    noteCard: {\n      maxWidth: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"flex-start\",\n      padding: theme.spacing(2, 0.5, 0),\n      textAlign: \"left\",\n      // backgroundColor: theme.palette.background.paper,\n      margin: `${NoteCardMargin}px auto`,\n      [theme.breakpoints.down(\"sm\")]: {\n        marginLeft: 0,\n        marginRight: 0,\n      },\n    },\n    selected: {\n      borderLeft: `4px solid ${theme.palette.primary.main}`,\n    },\n    unselected: {\n      borderLeft: `4px solid rgba(0, 0, 0, 0)`,\n    },\n    leftPanel: {\n      width: \"48px\",\n      paddingLeft: theme.spacing(0.5),\n    },\n    duration: {\n      color: theme.palette.text.secondary,\n    },\n    rightPanel: {\n      width: \"calc(100% - 48px)\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    header: {\n      \"color\": theme.palette.text.primary,\n      \"marginBottom\": theme.spacing(1),\n      \"wordBreak\": \"break-all\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.04),\n        cursor: \"pointer\",\n      },\n      \"flex\": 1,\n    },\n    summary: {\n      \"color\": theme.palette.text.secondary,\n      \"marginBottom\": theme.spacing(1),\n      \"paddingRight\": theme.spacing(2),\n      \"display\": \"-webkit-box\",\n      \"lineHeight\": \"1.3rem !important\",\n      \"textOverflow\": \"ellipsis !important\",\n      \"overflow\": \"hidden !important\",\n      \"maxWidth\": \"100%\",\n      \"maxHeight\": \"2.6rem\", // lineHeight x -website-line-clamp\n      \"-webkit-line-clamp\": 2,\n      \"-webkit-box-orient\": \"vertical\",\n      \"wordBreak\": \"break-all\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.04),\n        cursor: \"pointer\",\n      },\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n      color: theme.palette.text.primary,\n    },\n    images: {\n      display: \"flex\",\n      width: \"100%\",\n      overflow: \"hidden\",\n      position: \"relative\",\n      marginBottom: theme.spacing(1),\n    },\n    imagesWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n    },\n    image: {\n      width: \"128px\",\n      height: \"80px\",\n      marginRight: theme.spacing(1),\n      position: \"relative\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      display: \"block\",\n      borderRadius: \"6px\",\n    },\n    pin: {\n      color: theme.palette.secondary.main,\n      marginTop: theme.spacing(1),\n    },\n    markdownPreview: {\n      \"width\": \"calc(100% - 32px)\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.04),\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  note: Note;\n  referredNote?: Note;\n}\n\nexport default function NoteCard(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const [header, setHeader] = useState<string>(\"\");\n  const [summary, setSummary] = useState<Summary>(null);\n  const [images, setImages] = useState<string[]>([]);\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n  const [popoverElement, setPopoverElement] = useState<Element>(null);\n  const [note, setNote] = useState<Note>(props.note);\n  const [references, setReferences] = useState<Reference[]>([]);\n  const { t } = useTranslation();\n  const duration = formatDistanceStrict(note.config.modifiedAt, Date.now())\n    .replace(/\\sseconds?/, \"s\")\n    .replace(/\\sminutes?/, \"m\")\n    .replace(/\\shours?/, \"h\")\n    .replace(/\\sdays?/, \"d\")\n    .replace(/\\sweeks?/, \"w\")\n    .replace(/\\smonths?/, \"mo\")\n    .replace(/\\syears?/, \"y\");\n\n  const openNote = useCallback(() => {\n    if (note) {\n      crossnoteContainer.addTabNode({\n        type: \"tab\",\n        component: \"Note\",\n        config: {\n          singleton: false,\n          note,\n          notebook: crossnoteContainer.getNotebookAtPath(note.notebookPath),\n        },\n        name: `📝 ` + note.title,\n      });\n    }\n  }, [note]);\n\n  useEffect(() => {\n    setNote(props.note);\n  }, [props.note]);\n\n  useEffect(() => {\n    if (!note) {\n      return;\n    }\n    const modifiedMarkdownCallback = async (\n      data: ModifiedMarkdownEventData,\n    ) => {\n      if (\n        note.filePath === data.noteFilePath &&\n        note.notebookPath === data.notebookPath\n      ) {\n        const newNote = await crossnoteContainer.getNote(\n          data.notebookPath,\n          data.noteFilePath,\n        );\n        setNote(newNote);\n      }\n    };\n\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    };\n  }, [note]);\n\n  useEffect(() => {\n    if (props.referredNote && note) {\n      const notebook = crossnoteContainer.getNotebookAtPath(note.notebookPath);\n      if (!notebook) {\n        return;\n      }\n      setReferences(\n        notebook.getReferences(props.referredNote.filePath, note.filePath) ||\n          [],\n      );\n    }\n  }, [note, props.referredNote]);\n\n  useEffect(() => {\n    setHeader(note.title);\n    generateSummaryFromMarkdown(\n      note.markdown.trim() || t(\"general/this-note-is-empty\"),\n    )\n      .then((summary) => {\n        setSummary(summary);\n\n        // render images\n        const imagePromises = Promise.all(\n          summary.images.map((image) => resolveNoteImageSrc(note, image)),\n        );\n        imagePromises\n          .then((imageSrcs) => {\n            imageSrcs = imageSrcs.filter((x) => x).slice(0, 3);\n            setImages(imageSrcs || []);\n          })\n          .catch((error) => {\n            setImages([]);\n          });\n      })\n      .catch((error) => {});\n  }, [note.markdown, note, crossnoteContainer.crossnote, t]);\n\n  useEffect(() => {\n    crossnoteContainer\n      .getStatus(note.notebookPath, note.filePath)\n      .then((status) => {\n        setGitStatus(status);\n      });\n  }, [note.markdown, note.config.modifiedAt, note]);\n\n  return (\n    <React.Fragment>\n      <Box className={clsx(classes.noteCard, \"note-card\")}>\n        <Box className={clsx(classes.leftPanel)}>\n          <Tooltip\n            title={\n              <>\n                <p>\n                  {t(\"general/created-at\") +\n                    \" \" +\n                    formatRelative(\n                      new Date(note.config.createdAt),\n                      new Date(),\n                      {\n                        locale: languageCodeToDateFNSLocale(\n                          settingsContainer.language,\n                        ),\n                      },\n                    )}\n                </p>\n                <p>\n                  {t(\"general/modified-at\") +\n                    \" \" +\n                    formatRelative(\n                      new Date(note.config.modifiedAt),\n                      new Date(),\n                      {\n                        locale: languageCodeToDateFNSLocale(\n                          settingsContainer.language,\n                        ),\n                      },\n                    )}\n                </p>\n              </>\n            }\n            arrow\n          >\n            <Typography className={clsx(classes.duration)}>\n              {duration}\n            </Typography>\n          </Tooltip>\n\n          {note.config.pinned && <Pin className={clsx(classes.pin)}></Pin>}\n        </Box>\n        <Box className={clsx(classes.rightPanel)}>\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"flex-start\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Typography\n              style={{ fontWeight: \"bold\", marginBottom: \"0\" }}\n              variant={\"body1\"}\n              className={clsx(classes.header)}\n              onClick={openNote}\n            >\n              {header}\n            </Typography>\n            <Box style={{ display: \"flex\", alignItems: \"center\" }}>\n              {props.referredNote && (\n                <Typography\n                  variant={\"subtitle2\"}\n                  style={{\n                    marginLeft: theme.spacing(1),\n                    marginRight: theme.spacing(1),\n                  }}\n                  color={\"textPrimary\"}\n                >\n                  {references.length} reference(s)\n                </Typography>\n              )}\n              <IconButton\n                size={\"small\"}\n                style={{\n                  marginLeft: theme.spacing(1),\n                  marginRight: theme.spacing(1),\n                }}\n                onClick={(event) => {\n                  event.preventDefault();\n                  event.stopPropagation();\n                  setPopoverElement(event.currentTarget);\n                }}\n              >\n                <DotsVertical></DotsVertical>\n              </IconButton>\n            </Box>\n          </Box>\n          {summary && summary.summary.trim().length > 0 && (\n            <Typography className={clsx(classes.summary)} onClick={openNote}>\n              {summary && summary.summary.slice(0, 200)}\n            </Typography>\n          )}\n          {images.length > 0 && (\n            <Box className={clsx(classes.images)}>\n              <Box className={clsx(classes.imagesWrapper)}>\n                {images.map((image, offset) => (\n                  <div\n                    key={`${image}-${offset}`}\n                    className={clsx(classes.image)}\n                    style={{\n                      backgroundImage: `url(${image})`,\n                    }}\n                  ></div>\n                ))}\n              </Box>\n            </Box>\n          )}\n          {references.map((reference, offset) => {\n            return (\n              <Box\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                  // marginBottom: theme.spacing(1),\n                }}\n                key={note.filePath + offset}\n              >\n                <Box style={{ width: \"32px\" }}>\n                  <Typography\n                    style={{ fontWeight: \"bold\" }}\n                    color={\"textPrimary\"}\n                  >\n                    {reference.parentToken.map[0] + 1}:\n                  </Typography>\n                </Box>\n                <Box\n                  className={clsx(classes.markdownPreview)}\n                  onClick={openNote}\n                >\n                  {/*\n                  <MarkdownPreview\n                    note={note}\n                    markdown={reference.parentToken.content}\n                  ></MarkdownPreview>\n                  */}\n                  <Typography style={{ color: theme.palette.text.secondary }}>\n                    {reference.parentToken.content}\n                  </Typography>\n                </Box>\n              </Box>\n            );\n          })}\n          <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n            {note.filePath +\n              (gitStatus ? \" - \" + t(`git/status/${gitStatus}`) : \"\")}\n          </Typography>\n        </Box>\n      </Box>\n      <NotePopover\n        tabNode={props.tabNode}\n        note={note}\n        anchorElement={popoverElement}\n        onClose={() => setPopoverElement(null)}\n      ></NotePopover>\n    </React.Fragment>\n  );\n}\n","import { Box, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport clsx from \"clsx\";\nimport { TabNode } from \"flexlayout-react\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport LazyLoad from \"react-lazyload\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/note\";\nimport NoteCard, { NoteCardMargin } from \"./NoteCard\";\nconst is = require(\"is_js\");\n\nconst lazyLoadPlaceholderHeight = 92 + 2 * NoteCardMargin;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesList: {\n      \"position\": \"relative\",\n      // \"flex\": \"1\",\n      // \"overflowY\": \"auto\",\n      \"paddingTop\": theme.spacing(2),\n      \"paddingLeft\": theme.spacing(2),\n      \"paddingRight\": theme.spacing(2),\n      \"paddingBottom\": theme.spacing(12),\n      [theme.breakpoints.down(\"sm\")]: {\n        paddingLeft: theme.spacing(0.5),\n        paddingRight: theme.spacing(0.5),\n      },\n\n      \"& .note-card-sizer\": {\n        // width: `${NoteCardWidth + 2 * NoteCardMargin}px`,\n        maxWidth: \"100%\",\n        /*\n        [theme.breakpoints.down(\"xs\")]: {\n          width: \"100%\",\n        },\n        */\n      },\n    },\n    updatePanel: {\n      padding: theme.spacing(2),\n      textAlign: \"center\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n      backgroundColor: theme.palette.background.paper,\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  referredNote?: Note;\n  notes: Note[];\n  searchValue: string;\n  scrollElement: HTMLElement;\n}\n\nexport default function Notes(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [masonryInstance, setMasonryInstance] = useState<any>(null);\n\n  /*\n  const pullNotebook = useCallback(() => {\n    const notebook = crossnoteContainer.selectedNotebook;\n    if (!notebook) {\n      return;\n    }\n    crossnoteContainer\n      .pullNotebook({\n        notebook: notebook,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-downloaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error) => {\n        console.log(error);\n        new Noty({\n          type: \"error\",\n          text: t(\"error/failed-to-download-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [crossnoteContainer.selectedNotebook, t]);\n  */\n\n  useEffect(() => {\n    const notes = props.notes;\n    const searchValue = props.searchValue;\n    const pinned: Note[] = [];\n    const unpinned: Note[] = [];\n    notes.forEach((note) => {\n      // TODO: Convert to use MiniSearch for searching\n      if (searchValue.trim().length) {\n        const regexp = new RegExp(\n          \"(\" +\n            searchValue\n              .trim()\n              .split(/\\s+/g)\n              .map((s) => s.replace(/[.!@#$%^&*()_+\\-=[\\]]/g, (x) => `\\\\${x}`)) // escape special regexp characters\n              .join(\"|\") +\n            \")\",\n          \"i\",\n        );\n\n        if (note.markdown.match(regexp) || note.filePath.match(regexp)) {\n          if (note.config.pinned) {\n            pinned.push(note);\n          } else {\n            unpinned.push(note);\n          }\n        }\n      } else {\n        if (note.config.pinned) {\n          pinned.push(note);\n        } else {\n          unpinned.push(note);\n        }\n      }\n    });\n\n    setNotes([...pinned, ...unpinned]);\n  }, [props.notes, props.searchValue]);\n\n  /*\n  useEffect(() => {\n    if (notesListElement) {\n      const keyDownHandler = (event: KeyboardEvent) => {\n        const selectedNote = crossnoteContainer.selectedNote;\n        if (!selectedNote || !notes.length) {\n          return;\n        }\n        const currentIndex = notes.findIndex(\n          (n) => n.filePath === selectedNote.filePath,\n        );\n        if (currentIndex < 0) {\n          crossnoteContainer.setSelectedNote(notes[0]);\n        } else if (event.which === 40) {\n          // Up\n          if (currentIndex >= 0 && currentIndex < notes.length - 1) {\n            crossnoteContainer.setSelectedNote(notes[currentIndex + 1]);\n          }\n        } else if (event.which === 38) {\n          // Down\n          if (currentIndex > 0 && currentIndex < notes.length) {\n            crossnoteContainer.setSelectedNote(notes[currentIndex - 1]);\n          }\n        }\n      };\n      notesListElement.addEventListener(\"keydown\", keyDownHandler);\n      return () => {\n        notesListElement.removeEventListener(\"keydown\", keyDownHandler);\n      };\n    }\n  }, [notesListElement, notes, crossnoteContainer.selectedNote]);\n  */\n\n  useEffect(() => {\n    if (props.scrollElement) {\n      const scrollElement = props.scrollElement;\n      // Hack: fix note cards not displaying bug when searchValue is not empty\n      const hack = () => {\n        const initialHeight = scrollElement.style.height;\n        const initialFlex = scrollElement.style.flex;\n        scrollElement.style.flex = \"initial\";\n        scrollElement.style.height = \"10px\";\n        scrollElement.scrollTop += 1;\n        scrollElement.scrollTop -= 1;\n        scrollElement.style.height = initialHeight;\n        scrollElement.style.flex = initialFlex;\n      };\n      window.addEventListener(\"resize\", hack);\n      hack();\n      return () => {\n        window.removeEventListener(\"resize\", hack);\n      };\n    }\n  }, [notes, props.scrollElement, masonryInstance]);\n\n  return (\n    <div className={clsx(classes.notesList)}>\n      {(notes || []).map((note) => {\n        return (\n          <LazyLoad\n            key={\"lazy-load-note-card-\" + note.filePath}\n            placeholder={\n              <Box\n                style={{\n                  maxWidth: \"100%\",\n                  margin: `${NoteCardMargin}px auto`,\n                  padding: theme.spacing(2, 0.5, 0),\n                  height: `${lazyLoadPlaceholderHeight}px`,\n                }}\n                className={\"note-card lazyload-placeholder\"}\n              >\n                <Skeleton />\n                <Skeleton animation={false} />\n                <Skeleton animation=\"wave\" />\n              </Box>\n            }\n            height={lazyLoadPlaceholderHeight}\n            overflow={true}\n            once={true}\n            scrollContainer={props.scrollElement}\n            resize={true}\n          >\n            <NoteCard\n              key={\"note-card-\" + note.filePath}\n              tabNode={props.tabNode}\n              note={note}\n              referredNote={props.referredNote}\n            ></NoteCard>\n          </LazyLoad>\n\n          //   <NoteCard key={\"note-card-\" + note.filePath} note={note}></NoteCard>\n        );\n      })}\n      {crossnoteContainer.initialized &&\n        !crossnoteContainer.isLoadingNotebook &&\n        notes.length === 0 && (\n          <Typography\n            style={{\n              textAlign: \"center\",\n              marginTop: \"32px\",\n            }}\n            variant={\"body2\"}\n            color={\"textPrimary\"}\n          >\n            {\"🧐 \" + t(\"general/no-notes-found\")}\n          </Typography>\n        )}\n    </div>\n  );\n}\n","import {\n  Box,\n  CircularProgress,\n  Divider,\n  IconButton,\n  InputBase,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Popover,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  fade,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport useInterval from \"@use-it/interval\";\nimport clsx from \"clsx\";\nimport { TabNode } from \"flexlayout-react\";\nimport {\n  FileEditOutline,\n  Magnify,\n  SortAscending,\n  SortDescending,\n  SortVariant,\n} from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  ChangedNoteFilePathEventData,\n  CreatedNoteEventData,\n  DeletedNotebookEventData,\n  DeletedNoteEventData,\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData,\n} from \"../lib/event\";\nimport { Note, Notes as NotesValue } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport { OrderBy, OrderDirection } from \"../lib/order\";\nimport Notes from \"./Notes\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesPanel: {\n      // position: \"relative\",\n      // display: \"flex\",\n      // flexDirection: \"column\",\n      // height: \"100%\",\n      backgroundColor: theme.palette.background.paper,\n      width: \"800px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n    },\n    topPanel: {\n      padding: theme.spacing(0, 1),\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.paper,\n      zIndex: 9,\n    },\n    fixedTopPanel: {\n      position: \"sticky\",\n      top: `0`,\n      width: \"100%\",\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    search: {\n      \"color\": theme.palette.text.secondary,\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": 0, // theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        // marginLeft: theme.spacing(3),\n        // width: \"auto\"\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: theme.palette.text.primary,\n    },\n    inputRoot: {\n      color: \"inherit\",\n      border: \"1px solid #bbb\",\n      borderRadius: \"4px\",\n      width: \"100%\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        // width: 200\n      },\n    },\n    loading: {\n      position: \"absolute\",\n      top: \"40%\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n    },\n    sortSelected: {\n      \"color\": theme.palette.primary.main,\n      \"& svg\": {\n        color: theme.palette.primary.main,\n      },\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  notebook: Notebook;\n  note?: Note;\n  initialSearchValue?: string;\n  title?: string;\n}\n\nexport default function NotesPanel(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [sortMenuAnchorEl, setSortMenuAnchorEl] = useState<HTMLElement>(null);\n  const [isCreatingNote, setIsCreatingNote] = useState<boolean>(false);\n  const [orderBy, setOrderBy] = useState<OrderBy>(OrderBy.ModifiedAt);\n  const [orderDirection, setOrderDirection] = useState<OrderDirection>(\n    OrderDirection.DESC,\n  );\n  const [rawNotesMap, setRawNotesMap] = useState<NotesValue>({});\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [needsToRefreshRawNotes, setNeedsToRefreshRawNotes] = useState<boolean>(\n    false,\n  );\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  // Search\n  const [searchValue, setSearchValue] = useState<string>(\n    props.initialSearchValue || \"\",\n  );\n  const [searchValueInputTimeout, setSearchValueInputTimeout] = useState<\n    NodeJS.Timeout\n  >(null);\n  const [finalSearchValue, setFinalSearchValue] = useState<string>(\"\");\n  const [fixedTopPanel, setFixedTopPanel] = useState<boolean>(false);\n  const container = useRef<HTMLDivElement>(null);\n  const topPanel = useRef<HTMLElement>(null);\n\n  const createNewNote = useCallback(() => {\n    setIsCreatingNote(true);\n    let markdown = \"\";\n    if (props.note) {\n      if (props.note.title === props.note.filePath.replace(/\\.md$/, \"\")) {\n        markdown = `[[${props.note.title}]]`;\n      } else {\n        markdown = `[[${props.note.title}|${props.note.filePath}]]`;\n      }\n    }\n    crossnoteContainer\n      .createNewNote(props.notebook, \"\", markdown)\n      .then((note) => {\n        crossnoteContainer.openNoteAtPath(props.notebook, note.filePath);\n        setIsCreatingNote(false);\n      })\n      .catch(() => {\n        setIsCreatingNote(false);\n      });\n  }, [props.notebook, props.note]);\n\n  const onChangeSearchValue = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n      const value = event.target.value;\n      setSearchValue(value);\n      if (searchValueInputTimeout) {\n        clearTimeout(searchValueInputTimeout);\n      }\n      const timeout = setTimeout(() => {\n        setFinalSearchValue(value);\n      }, 400);\n      setSearchValueInputTimeout(timeout);\n    },\n    [searchValueInputTimeout],\n  );\n\n  const refreshRawNotes = useCallback(async () => {\n    setRawNotesMap(\n      Object.assign(\n        {},\n        props.note\n          ? await props.notebook.getReferredByNotes(props.note.filePath)\n          : props.notebook.notes,\n      ) as any,\n    );\n  }, [props.notebook, props.note]);\n\n  useEffect(() => {\n    setSearchValue(\"\");\n    setFinalSearchValue(\"\");\n  }, [props.notebook]);\n\n  // Emitter\n  useEffect(() => {\n    if (!globalEmitter) {\n      return;\n    }\n    const modifiedMarkdownCallback = async (\n      data: ModifiedMarkdownEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        setNeedsToRefreshRawNotes(true);\n      }\n    };\n    const createdNoteCallback = (data: CreatedNoteEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const changedNoteFilePathCallback = (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const performedGitOperationCallback = (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const deletedNotebookCallback = (data: DeletedNotebookEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        crossnoteContainer.closeTabNode(props.tabNode.getId());\n      }\n    };\n\n    // TODO: Delay the modifiedMarkdownCallback\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.CreatedNote, createdNoteCallback);\n    globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n    globalEmitter.on(EventType.DeletedNotebook, deletedNotebookCallback);\n    globalEmitter.on(\n      EventType.ChangedNoteFilePath,\n      changedNoteFilePathCallback,\n    );\n    globalEmitter.on(\n      EventType.PerformedGitOperation,\n      performedGitOperationCallback,\n    );\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.CreatedNote, createdNoteCallback);\n      globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.off(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.off(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n      globalEmitter.off(EventType.DeletedNotebook, deletedNotebookCallback);\n    };\n  }, [refreshRawNotes, props.notebook, props.note, props.tabNode]);\n\n  useEffect(() => {\n    if (refreshRawNotes) {\n      refreshRawNotes();\n    }\n  }, [refreshRawNotes, props.note]);\n\n  useEffect(() => {\n    const notes = Object.values(rawNotesMap);\n    if (orderBy === OrderBy.ModifiedAt) {\n      if (orderDirection === OrderDirection.DESC) {\n        notes.sort(\n          (a, b) =>\n            b.config.modifiedAt.getTime() - a.config.modifiedAt.getTime(),\n        );\n      } else {\n        notes.sort(\n          (a, b) =>\n            a.config.modifiedAt.getTime() - b.config.modifiedAt.getTime(),\n        );\n      }\n    } else if (orderBy === OrderBy.CreatedAt) {\n      if (orderDirection === OrderDirection.DESC) {\n        notes.sort(\n          (a, b) => b.config.createdAt.getTime() - a.config.createdAt.getTime(),\n        );\n      } else {\n        notes.sort(\n          (a, b) => a.config.createdAt.getTime() - b.config.createdAt.getTime(),\n        );\n      }\n    } else if (orderBy === OrderBy.Title) {\n      if (orderDirection === OrderDirection.DESC) {\n        notes.sort((a, b) => b.title.localeCompare(a.title));\n      } else {\n        notes.sort((a, b) => a.title.localeCompare(b.title));\n      }\n    }\n    setNotes(notes);\n  }, [rawNotesMap, orderBy, orderDirection]);\n\n  useEffect(() => {\n    if (!container || !topPanel || !container.current || !topPanel.current) {\n      return;\n    }\n    const containerElement = container.current;\n    const scrollElement = containerElement.parentElement;\n    const scrollEvent = function () {\n      // console.log( \"onscroll: \", scrollElement.scrollTop, containerElement.offsetTop,);\n      if (scrollElement.scrollTop >= containerElement.offsetTop) {\n        setFixedTopPanel(true);\n      } else {\n        setFixedTopPanel(false);\n      }\n    };\n    scrollEvent();\n    scrollElement.addEventListener(\"scroll\", scrollEvent);\n    return () => {\n      scrollElement.removeEventListener(\"scroll\", scrollEvent);\n    };\n  }, [container, topPanel]);\n\n  useInterval(() => {\n    if (needsToRefreshRawNotes) {\n      refreshRawNotes();\n      setNeedsToRefreshRawNotes(false);\n    }\n  }, 15000);\n\n  if (props.note && !notes.length) {\n    return <Box></Box>;\n  }\n\n  return (\n    <div className={clsx(classes.notesPanel, \"notes-panel\")} ref={container}>\n      <Box\n        className={clsx(\n          classes.topPanel,\n          fixedTopPanel ? classes.fixedTopPanel : \"\",\n        )}\n      >\n        {props.title && (\n          <Typography\n            variant={\"h6\"}\n            style={{ padding: \"6px 0 7px\", color: theme.palette.text.primary }}\n          >\n            {props.title}\n          </Typography>\n        )}\n        <Box className={clsx(classes.row)}>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <Magnify />\n            </div>\n            <InputBase\n              placeholder={t(\"search/notes\")}\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              value={searchValue}\n              inputProps={{ \"aria-label\": \"search\" }}\n              onChange={onChangeSearchValue}\n              autoComplete={\"off\"}\n              autoCorrect={\"off\"}\n            />\n          </div>\n          <IconButton\n            onClick={createNewNote}\n            disabled={!crossnoteContainer.initialized || isCreatingNote}\n          >\n            <Tooltip title={t(\"general/new-note\")}>\n              <FileEditOutline></FileEditOutline>\n            </Tooltip>\n          </IconButton>\n          <IconButton\n            onClick={(event) => setSortMenuAnchorEl(event.currentTarget)}\n          >\n            <SortVariant></SortVariant>\n          </IconButton>\n        </Box>\n      </Box>\n\n      <Popover\n        anchorEl={sortMenuAnchorEl}\n        keepMounted\n        open={Boolean(sortMenuAnchorEl)}\n        onClose={() => setSortMenuAnchorEl(null)}\n      >\n        <List>\n          <ListItem\n            button\n            onClick={() => setOrderBy(OrderBy.ModifiedAt)}\n            className={clsx(\n              orderBy === OrderBy.ModifiedAt && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/date-modified\")}></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => setOrderBy(OrderBy.CreatedAt)}\n            className={clsx(\n              orderBy === OrderBy.CreatedAt && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/date-created\")}></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => setOrderBy(OrderBy.Title)}\n            className={clsx(orderBy === OrderBy.Title && classes.sortSelected)}\n          >\n            <ListItemText primary={t(\"general/title\")}></ListItemText>\n          </ListItem>\n          <Divider></Divider>\n          <ListItem\n            button\n            onClick={() => setOrderDirection(OrderDirection.DESC)}\n            className={clsx(\n              orderDirection === OrderDirection.DESC && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/Desc\")}></ListItemText>\n            <ListItemIcon style={{ marginLeft: \"8px\" }}>\n              <SortDescending></SortDescending>\n            </ListItemIcon>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => setOrderDirection(OrderDirection.ASC)}\n            className={clsx(\n              orderDirection === OrderDirection.ASC && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/Asc\")}></ListItemText>\n            <ListItemIcon style={{ marginLeft: \"8px\" }}>\n              <SortAscending></SortAscending>\n            </ListItemIcon>\n          </ListItem>\n        </List>\n      </Popover>\n\n      {crossnoteContainer.isLoadingNotebook && (\n        <CircularProgress className={clsx(classes.loading)}></CircularProgress>\n      )}\n\n      <Notes\n        tabNode={props.tabNode}\n        notes={notes}\n        referredNote={props.note}\n        searchValue={finalSearchValue}\n        scrollElement={\n          container && container.current && container.current.parentElement\n        }\n      ></Notes>\n    </div>\n  );\n}\n","import {\n  Box,\n  Button,\n  ButtonGroup,\n  Card,\n  Divider,\n  IconButton,\n  InputBase,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  Editor as CodeMirrorEditor,\n  EditorChangeLinkedList,\n  Position as CursorPosition,\n  TextMarker,\n} from \"codemirror\";\nimport { Actions, TabNode } from \"flexlayout-react\";\nimport {\n  Close,\n  CodeTags,\n  DotsVertical,\n  FilePresentationBox,\n  Pencil,\n} from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport * as path from \"path\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport EmojiDefinitions from \"vickymd/addon/emoji\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { initMathPreview } from \"../editor/views/math-preview\";\nimport { EditorMode } from \"../lib/editorMode\";\nimport {\n  ChangedNoteFilePathEventData,\n  DeletedNotebookEventData,\n  DeletedNoteEventData,\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData,\n} from \"../lib/event\";\nimport { Note } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport { setTheme } from \"../themes/manager\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport {\n  openURL,\n  postprocessPreview as previewPostprocessPreview,\n} from \"../utilities/preview\";\nimport EditImageDialog from \"./EditImageDialog\";\nimport NotePopover from \"./NotePopover\";\nimport NotesPanel from \"./NotesPanel\";\nconst VickyMD = require(\"vickymd/core\");\n\nconst previewZIndex = 99;\n\nconst HMDFold = {\n  image: true,\n  link: true,\n  math: true,\n  html: true, // maybe dangerous\n  emoji: true,\n  widget: true,\n  code: true,\n};\n\ninterface CommandHint {\n  text: string;\n  command: string;\n  description: string;\n  icon?: string;\n  render: (element: HTMLElement, data: any, current: CommandHint) => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    notePanel: {\n      height: \"100%\",\n      overflow: \"hidden\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    topPanel: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      padding: \"4px 0 0\",\n      position: \"relative\",\n      backgroundColor: \"inherit\",\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: \"0\",\n      },\n    },\n    contentPanel: {\n      position: \"relative\",\n      height: \"calc(100% - 48px - 30px)\",\n      overflow: \"auto\",\n    },\n    editorWrapper: {\n      \"flex\": 1,\n      \"overflow\": \"auto\",\n      \"backgroundColor\": \"inherit\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n      \"& .CodeMirror-code\": {\n        width: \"100%\",\n      },\n      \"& .CodeMirror\": {\n        width: \"800px\",\n        maxWidth: \"100%\",\n        margin: \"0 auto\",\n        height: \"100%\",\n        padding: theme.spacing(0, 1),\n        backgroundColor: `${theme.palette.background.paper} !important`,\n        [theme.breakpoints.down(\"sm\")]: {\n          padding: theme.spacing(1),\n        },\n      },\n      \"& .CodeMirror-vscrollbar\": {\n        // display: \"none !important\",\n      },\n      \"& .CodeMirror-placeholder\": {\n        color: theme.palette.text.hint,\n      },\n      /*\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      */\n    },\n    editor: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"inherit\",\n      border: \"none\",\n    },\n    preview: {\n      position: \"relative\",\n      left: \"0\",\n      top: \"0\",\n      width: \"800px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n      height: \"100%\",\n      border: \"none\",\n      overflow: \"auto !important\",\n      padding: theme.spacing(1, 2),\n      zIndex: previewZIndex,\n      backgroundColor: `${theme.palette.background.paper} !important`,\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n    },\n    presentation: {\n      padding: \"0 !important\",\n    },\n    controlBtn: {\n      padding: theme.spacing(0.5, 0),\n      color: theme.palette.text.secondary,\n    },\n    controlBtnSelected: {\n      color: theme.palette.primary.main,\n    },\n    controlBtnSelectedSecondary: {\n      color: theme.palette.secondary.main,\n    },\n    // math\n    floatWin: {\n      position: \"fixed\",\n      zIndex: 100,\n      background: theme.palette.background.paper,\n      borderRadius: \"5px\",\n      overflow: \"hidden\",\n      minWidth: \"200px\",\n      maxWidth: \"70%\",\n    },\n    floatWinHidden: {\n      display: \"none\",\n    },\n    floatWinTitle: {\n      display: \"flex\",\n      alignItems: \"center\",\n      background: \"#579\",\n      color: \"#eee\",\n    },\n    floatWinContent: {\n      maxHeight: \"80vh\",\n      overflow: \"auto\",\n      padding: \"10px 20px\",\n    },\n    floatWinClose: {\n      color: \"#eee\",\n    },\n    bottomPanel: {\n      position: \"absolute\",\n      bottom: \"0\",\n      width: \"100%\",\n      padding: theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      maxHeight: \"30px\",\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n    },\n    cursorPositionInfo: {\n      // position: \"absolute\",\n      // right: \"16px\",\n      // bottom: \"16px\",\n      zIndex: 150,\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n  note: Note;\n  tabNode: TabNode;\n}\nexport default function NotePanel(props: Props) {\n  const classes = useStyles(props);\n  const tabNode = props.tabNode;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const { t } = useTranslation();\n  const [noteTitle, setNoteTitle] = useState<string>(\"\");\n  const [note, setNote] = useState<Note>(props.note);\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editorMode, setEditorMode] = useState<EditorMode>(EditorMode.Preview);\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [previewIsPresentation, setPreviewIsPresentation] = useState<boolean>(\n    false,\n  );\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [cursorPosition, setCursorPosition] = useState<CursorPosition>({\n    line: 0,\n    ch: 0,\n  });\n  const mathPreviewElement = useRef<HTMLElement>(null);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [notePopoverElement, setNotePopoverElement] = useState<Element>(null);\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n\n  const confirmNoteTitle = useCallback(() => {\n    const finalNoteTitle = noteTitle.trim().replace(/\\//g, \"-\");\n    if (\n      !note ||\n      !finalNoteTitle.length ||\n      note.title.trim() === finalNoteTitle\n    ) {\n      return;\n    }\n\n    crossnoteContainer\n      .changeNoteFilePath(\n        tabNode,\n        note,\n        path.join(path.dirname(note.filePath), `${finalNoteTitle}.md`),\n      )\n      .then((note) => {\n        setNote(note);\n      })\n      .catch((error) => {\n        new Noty({\n          type: \"error\",\n          text: t(\"error/failed-to-change-file-path\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 5000,\n        }).show();\n        setNoteTitle(note.title);\n      });\n  }, [noteTitle, note, tabNode, t]);\n\n  const postprocessPreview = useCallback(\n    (previewElement: HTMLElement) => {\n      previewPostprocessPreview(previewElement, note, (flag) => {\n        setPreviewIsPresentation(flag);\n      });\n    },\n    [note],\n  );\n\n  useEffect(() => {\n    if (!note) {\n      return () => {\n        setEditor(null);\n        setTextAreaElement(null);\n        setPreviewElement(null);\n      };\n    } else {\n      if (note.markdown.length === 0) {\n        setEditorMode(EditorMode.VickyMD);\n      }\n    }\n  }, [note]);\n\n  useEffect(() => {\n    if (!note || !crossnoteContainer.layoutModel || !tabNode) {\n      return;\n    }\n    setNoteTitle(note.title);\n    crossnoteContainer.layoutModel.doAction(\n      Actions.renameTab(tabNode.getId(), `📝 ` + note.title),\n    );\n  }, [note, crossnoteContainer.layoutModel, tabNode]);\n\n  // Emitter\n  useEffect(() => {\n    if (!globalEmitter || !tabNode || !editor || !note) {\n      return;\n    }\n\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      if (data.tabId === tabNode.getId()) {\n        return;\n      }\n      if (\n        data.notebookPath === note.notebookPath &&\n        data.noteFilePath === note.filePath\n      ) {\n        note.config = data.noteConfig;\n        if (editor.getValue() !== data.markdown) {\n          editor.setValue(data.markdown);\n        }\n      }\n    };\n\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (\n        data.notebookPath === note.notebookPath &&\n        data.noteFilePath === note.filePath\n      ) {\n        crossnoteContainer.closeTabNode(tabNode.getId());\n      }\n    };\n\n    const changedNoteFilePathCallback = async (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (\n        data.notebookPath === note.notebookPath &&\n        data.oldNoteFilePath === note.filePath\n      ) {\n        const newNote = await crossnoteContainer.getNote(\n          data.notebookPath,\n          data.newNoteFilePath,\n        );\n        setNote(newNote);\n      }\n    };\n\n    const performedGitOperationCallback = async (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (data.notebookPath === note.notebookPath) {\n        const newNote = await crossnoteContainer.getNote(\n          data.notebookPath,\n          note.filePath,\n        );\n        if (newNote) {\n          setNote(newNote);\n          if (editor.getValue() !== newNote.markdown) {\n            editor.setValue(newNote.markdown);\n          }\n        } else {\n          crossnoteContainer.closeTabNode(tabNode.getId());\n        }\n      }\n    };\n\n    const deletedNotebookCallback = (data: DeletedNotebookEventData) => {\n      if (data.notebookPath === note.notebookPath) {\n        crossnoteContainer.closeTabNode(tabNode.getId());\n      }\n    };\n\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n    globalEmitter.on(\n      EventType.ChangedNoteFilePath,\n      changedNoteFilePathCallback,\n    );\n    globalEmitter.on(\n      EventType.PerformedGitOperation,\n      performedGitOperationCallback,\n    );\n    globalEmitter.on(EventType.DeletedNotebook, deletedNotebookCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.off(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.off(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n      globalEmitter.off(EventType.DeletedNotebook, deletedNotebookCallback);\n    };\n  }, [tabNode, editor, note]);\n\n  // Set editor\n  useEffect(() => {\n    if (textAreaElement && !editor && note) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\", // Break mobile device paste functionality\n        hmdFold: HMDFold,\n        keyMap: settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n        hmdClick: (info: any, cm: CodeMirrorEditor) => {\n          let { text, url } = info;\n          if (info.type === \"link\" || info.type === \"url\") {\n            const footnoteRef = text.match(/\\[[^[\\]]+\\](?:\\[\\])?$/); // bare link, footref or [foot][] . assume no escaping char inside\n            if (!footnoteRef && (info.ctrlKey || info.altKey) && url) {\n              // Hack: Fix a wikilink click bug when clicking text like \"[[haha]].\"\n              if (url.startsWith(\"[[\")) {\n                url = url.slice(2, url.length);\n                const i = url.lastIndexOf(\"]]\");\n                if (i > 0) {\n                  url = url.slice(0, i);\n                }\n              }\n\n              // just open URL\n              openURL(url, note);\n              return false; // Prevent default click event\n            }\n          }\n        },\n      });\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setValue(note.markdown || \"\");\n      editor.on(\"cursorActivity\", (instance) => {\n        const cursor = instance.getCursor();\n        if (cursor) {\n          setCursorPosition({\n            line: cursor.line,\n            ch: cursor.ch,\n          });\n        }\n      });\n      setEditor(editor);\n    }\n  }, [textAreaElement, note, editor]);\n\n  // Math preview\n  useEffect(() => {\n    if (editor && mathPreviewElement) {\n      initMathPreview(editor, mathPreviewElement.current);\n    }\n  }, [editor, mathPreviewElement]);\n\n  // Render Preview\n  useEffect(() => {\n    if (editorMode === EditorMode.Preview && editor && note && previewElement) {\n      try {\n        renderPreview(previewElement, editor.getValue());\n        postprocessPreview(previewElement);\n        previewElement.scrollTop = 0;\n      } catch (error) {\n        previewElement.innerText = error;\n      }\n    }\n  }, [editorMode, editor, previewElement, note, postprocessPreview, t]);\n\n  // Toggle editor & preview\n  useEffect(() => {\n    if (!editor || !note) return;\n    if (editorMode === EditorMode.VickyMD) {\n      VickyMD.switchToHyperMD(editor);\n      editor.setOption(\"hmdFold\", HMDFold);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (editorMode === EditorMode.SourceCode) {\n      VickyMD.switchToNormal(editor);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (editorMode === EditorMode.Preview) {\n      editor.getWrapperElement().style.display = \"none\";\n    } else if (editorMode === EditorMode.SplitView) {\n      VickyMD.switchToNormal(editor);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    }\n  }, [editorMode, editor, note]);\n\n  // Change markdown\n  useEffect(() => {\n    if (editor && note && tabNode) {\n      const changesHandler = () => {\n        if (editor.getOption(\"readOnly\")) {\n          // This line is necessary for decryption...\n          return;\n        }\n        const markdown = editor.getValue();\n\n        if (markdown === note.markdown) {\n          return;\n        }\n        setTimeout(() => {\n          if (markdown === editor.getValue()) {\n            crossnoteContainer.updateNoteMarkdown(\n              tabNode,\n              note.notebookPath,\n              note.filePath,\n              markdown,\n            );\n          }\n          if (editorMode === EditorMode.Preview && previewElement) {\n            try {\n              renderPreview(previewElement, editor.getValue());\n              postprocessPreview(previewElement);\n              previewElement.scrollTop = 0;\n            } catch (error) {\n              previewElement.innerText = error;\n            }\n          }\n        }, 300);\n      };\n      editor.on(\"changes\", changesHandler);\n\n      const imageClickedHandler = (args: any) => {\n        const marker: TextMarker = args.marker;\n        const imageElement: HTMLImageElement = args.element;\n        imageElement.setAttribute(\n          \"data-marker-position\",\n          JSON.stringify(marker.find()),\n        );\n        setEditImageElement(imageElement);\n        setEditImageTextMarker(marker);\n        setEditImageDialogOpen(true);\n      };\n      editor.on(\"imageClicked\", imageClickedHandler);\n\n      const loadImage = async (args: any) => {\n        const element = args.element;\n        const imageSrc = element.getAttribute(\"data-src\");\n        element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n      };\n      editor.on(\"imageReadyToLoad\", loadImage);\n\n      return () => {\n        editor.off(\"changes\", changesHandler);\n        editor.off(\"imageClicked\", imageClickedHandler);\n        editor.off(\"imageReadyToLoad\", loadImage);\n      };\n    }\n  }, [editor, note, tabNode, editorMode, previewElement]);\n\n  // Command\n  useEffect(() => {\n    if (!editor || !note) return;\n    const onChangeHandler = (\n      instance: CodeMirrorEditor,\n      changeObject: EditorChangeLinkedList,\n    ) => {\n      // Check commands\n      if (changeObject.text.length === 1 && changeObject.text[0] === \"/\") {\n        const aheadStr = editor\n          .getLine(changeObject.from.line)\n          .slice(0, changeObject.from.ch + 1);\n        if (!aheadStr.match(/#[^\\s]+?\\/$/)) {\n          // Not `/` inside a tag\n          editor.showHint({\n            closeOnUnfocus: false,\n            completeSingle: false,\n            hint: () => {\n              const cursor = editor.getCursor();\n              const token = editor.getTokenAt(cursor);\n              const line = cursor.line;\n              const lineStr = editor.getLine(line);\n              const end: number = cursor.ch;\n              let start = token.start;\n              if (lineStr[start] !== \"/\") {\n                start = start - 1;\n              }\n              const currentWord: string = lineStr\n                .slice(start, end)\n                .replace(/^\\//, \"\");\n\n              const render = (\n                element: HTMLElement,\n                data: CommandHint[],\n                cur: CommandHint,\n              ) => {\n                const wrapper = document.createElement(\"div\");\n                wrapper.style.padding = \"6px 0\";\n                wrapper.style.display = \"flex\";\n                wrapper.style.flexDirection = \"row\";\n                wrapper.style.alignItems = \"flex-start\";\n                wrapper.style.maxWidth = \"100%\";\n                wrapper.style.minWidth = \"200px\";\n\n                const leftPanel = document.createElement(\"div\");\n                const iconWrapper = document.createElement(\"div\");\n                iconWrapper.style.padding = \"0 6px\";\n                iconWrapper.style.marginRight = \"6px\";\n                iconWrapper.style.fontSize = \"1rem\";\n\n                const iconElement = document.createElement(\"span\");\n                iconElement.classList.add(\"mdi\");\n                iconElement.classList.add(\n                  cur.icon || \"mdi-help-circle-outline\",\n                );\n                iconWrapper.appendChild(iconElement);\n                leftPanel.appendChild(iconWrapper);\n\n                const rightPanel = document.createElement(\"div\");\n\n                const descriptionElement = document.createElement(\"p\");\n                descriptionElement.innerText = cur.description;\n                descriptionElement.style.margin = \"2px 0\";\n                descriptionElement.style.padding = \"0\";\n\n                const commandElement = document.createElement(\"p\");\n                commandElement.innerText = cur.command;\n                commandElement.style.margin = \"0\";\n                commandElement.style.padding = \"0\";\n                commandElement.style.fontSize = \"0.7rem\";\n\n                rightPanel.appendChild(descriptionElement);\n                rightPanel.appendChild(commandElement);\n\n                wrapper.appendChild(leftPanel);\n                wrapper.appendChild(rightPanel);\n                element.appendChild(wrapper);\n              };\n\n              const commands: CommandHint[] = [\n                {\n                  text: \"# \",\n                  command: \"/h1\",\n                  description: t(\"editor/toolbar/insert-header-1\"),\n                  icon: \"mdi-format-header-1\",\n                  render,\n                },\n                {\n                  text: \"## \",\n                  command: \"/h2\",\n                  description: t(\"editor/toolbar/insert-header-2\"),\n                  icon: \"mdi-format-header-2\",\n                  render,\n                },\n                {\n                  text: \"### \",\n                  command: \"/h3\",\n                  description: t(\"editor/toolbar/insert-header-3\"),\n                  icon: \"mdi-format-header-3\",\n                  render,\n                },\n                {\n                  text: \"#### \",\n                  command: \"/h4\",\n                  description: t(\"editor/toolbar/insert-header-4\"),\n                  icon: \"mdi-format-header-4\",\n                  render,\n                },\n                {\n                  text: \"##### \",\n                  command: \"/h5\",\n                  description: t(\"editor/toolbar/insert-header-5\"),\n                  icon: \"mdi-format-header-5\",\n                  render,\n                },\n                {\n                  text: \"###### \",\n                  command: \"/h6\",\n                  description: t(\"editor/toolbar/insert-header-6\"),\n                  icon: \"mdi-format-header-6\",\n                  render,\n                },\n                {\n                  text: \"> \",\n                  command: \"/blockquote\",\n                  description: t(\"editor/toolbar/insert-blockquote\"),\n                  icon: \"mdi-format-quote-open\",\n                  render,\n                },\n                {\n                  text: \"* \",\n                  command: \"/ul\",\n                  description: t(\"editor/toolbar/insert-unordered-list\"),\n                  icon: \"mdi-format-list-bulleted\",\n                  render,\n                },\n                {\n                  text: \"1. \",\n                  command: \"/ol\",\n                  description: t(\"editor/toolbar/insert-ordered-list\"),\n                  icon: \"mdi-format-list-numbered\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.image -->\\n\",\n                  command: \"/image\",\n                  description: t(\"editor/toolbar/insert-image\"),\n                  icon: \"mdi-image\",\n                  render,\n                },\n                {\n                  text: `|   |   |\n|---|---|\n|   |   |\n`,\n                  command: \"/table\",\n                  description: t(\"editor/toolbar/insert-table\"),\n                  icon: \"mdi-table\",\n                  render,\n                },\n                {\n                  text:\n                    \"<!-- @timer \" +\n                    JSON.stringify({ date: new Date().toString() })\n                      .replace(/^{/, \"\")\n                      .replace(/}$/, \"\") +\n                    \" -->\\n\",\n                  command: \"/timer\",\n                  description: t(\"editor/toolbar/insert-clock\"),\n                  icon: \"mdi-timer\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.audio -->  \\n\",\n                  command: \"/audio\",\n                  description: t(\"editor/toolbar/insert-audio\"),\n                  icon: \"mdi-music\",\n                  render,\n                },\n                /*\n                {\n                  text: \"<!-- @crossnote.netease_music -->  \\n\",\n                  displayText: `/netease - ${t(\n                    \"editor/toolbar/netease-music\",\n                  )}`,\n                },\n                */\n                {\n                  text: \"<!-- @crossnote.video -->  \\n\",\n                  command: \"/video\",\n                  description: t(\"editor/toolbar/insert-video\"),\n                  icon: \"mdi-video\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.youtube -->  \\n\",\n                  command: \"/youtube\",\n                  description: t(\"editor/toolbar/insert-youtube\"),\n                  icon: \"mdi-youtube\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.bilibili -->  \\n\",\n                  command: \"/bilibili\",\n                  description: t(\"editor/toolbar/insert-bilibili\"),\n                  icon: \"mdi-television-classic\",\n                  render,\n                },\n                {\n                  text: \"<!-- slide -->  \\n\",\n                  command: \"/slide\",\n                  description: t(\"editor/toolbar/insert-slide\"),\n                  icon: \"mdi-presentation\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.ocr -->  \\n\",\n                  command: \"/ocr\",\n                  description: t(\"editor/toolbar/insert-ocr\"),\n                  icon: \"mdi-ocr\",\n                  render,\n                },\n                {\n                  text:\n                    '<!-- @crossnote.kanban \"v\":2,\"board\":{\"columns\":[]} -->  \\n',\n                  command: \"/kanban\",\n                  description: `${t(\"editor/toolbar/insert-kanban\")} (beta)`,\n                  icon: \"mdi-developer-board\",\n                  render,\n                },\n                /*\n                {\n                  text: \"<!-- @crossnote.abc -->  \\n\",\n                  displayText: `/abc - ${t(\n                    \"editor/toolbar/insert-abc-notation\",\n                  )}`,\n                },\n                */\n                {\n                  text: \"<!-- @crossnote.github_gist -->  \\n\",\n                  command: \"/github_gist\",\n                  description: t(\"editor/toolbar/insert-github-gist\"),\n                  icon: \"mdi-github\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.comment -->  \\n\",\n                  command: \"/crossnote.comment\",\n                  description: t(\"editor/toolbar/insert-comment\"),\n                  icon: \"mdi-comment-multiple\",\n                  render,\n                },\n              ];\n              const filtered = commands.filter(\n                (item) =>\n                  (item.command + item.description)\n                    .toLocaleLowerCase()\n                    .indexOf(currentWord.toLowerCase()) >= 0,\n              );\n              return {\n                list: filtered.length ? filtered : commands,\n                from: { line, ch: start },\n                to: { line, ch: end },\n              };\n            },\n          });\n        }\n      }\n\n      // Check emoji\n      if (\n        changeObject.text.length === 1 &&\n        changeObject.text[0].length > 0 &&\n        changeObject.text[0] !== \" \" &&\n        changeObject.text[0] !== \":\" &&\n        changeObject.from.ch > 0 &&\n        editor.getLine(changeObject.from.line)[changeObject.from.ch - 1] === \":\"\n      ) {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = cursor.ch;\n            let start = token.start;\n            let doubleSemiColon = false;\n            if (lineStr[start] !== \":\") {\n              start = start - 1;\n            }\n            if (start > 0 && lineStr[start - 1] === \":\") {\n              start = start - 1;\n              doubleSemiColon = true;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(/^:+/, \"\");\n\n            const commands: { text: string; displayText: string }[] = [];\n            for (const def in EmojiDefinitions) {\n              const emoji = EmojiDefinitions[def];\n              commands.push({\n                text: doubleSemiColon ? `:${def}: ` : `${emoji} `,\n                displayText: `:${def}: ${emoji}`,\n              });\n            }\n            const filtered = commands.filter(\n              (item) =>\n                item.displayText\n                  .toLocaleLowerCase()\n                  .indexOf(currentWord.toLowerCase()) >= 0,\n            );\n            return {\n              list: filtered.length ? filtered : commands,\n              from: { line, ch: start },\n              to: { line, ch: end },\n            };\n          },\n        });\n      }\n\n      // Check tag\n      if (changeObject.text.length === 1 && changeObject.text[0] === \"#\") {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = cursor.ch;\n            let start = token.start;\n            if (lineStr[start] !== \"#\") {\n              start = start - 1;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(/^#/, \"\");\n            const searchResults = props.notebook.search.search(currentWord, {\n              fuzzy: true,\n              filter: (result: any) => {\n                const filePath = path.relative(\n                  path.dirname(path.join(note.notebookPath, note.filePath)),\n                  path.join(note.notebookPath, result[\"filePath\"]),\n                );\n                return result[\"title\"] + \".md\" === filePath;\n              },\n            });\n            const commands: {\n              text: string;\n              displayText: string;\n            }[] = searchResults.map((searchResult: any) => {\n              const val =\n                \"#\" +\n                searchResult.title +\n                (searchResult.title.match(/\\s/) ? \"#\" : \"\");\n              return {\n                text: val,\n                displayText: val,\n              };\n            });\n            return {\n              list: commands,\n              from: { line, ch: start },\n              to: { line, ch: end },\n            };\n          },\n        });\n      }\n\n      const withinWikiLink = function (line: number, ch: number) {\n        const aheadStr = editor.getLine(changeObject.from.line).slice(0, ch);\n        return aheadStr.lastIndexOf(\"[[\") > aheadStr.lastIndexOf(\"]]\");\n      };\n      // Check Wikilink\n      if (withinWikiLink(changeObject.from.line, changeObject.from.ch)) {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = lineStr.indexOf(\"]]\", cursor.ch);\n            let start = token.start;\n            while (lineStr[start] !== \"[\") {\n              start = start - 1;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(/^\\[+/, \"\");\n            const searchResults = props.notebook.search.search(currentWord, {\n              fuzzy: true,\n            });\n            const commands: {\n              text: string;\n              displayText: string;\n            }[] = searchResults.map((searchResult: any) => {\n              const filtPath = path.relative(\n                path.dirname(path.join(note.notebookPath, note.filePath)),\n                path.join(note.notebookPath, searchResult.filePath),\n              );\n              const val =\n                searchResult.title + \".md\" === filtPath\n                  ? `[[${searchResult.title}]]`\n                  : `[[${filtPath}|${searchResult.title}]]`;\n              return {\n                text: val,\n                displayText: val,\n              };\n            });\n            return {\n              list: commands,\n              from: { line, ch: start - 1 },\n              to: { line, ch: end + 2 },\n            };\n          },\n        });\n      }\n    };\n    editor.on(\"change\", onChangeHandler);\n\n    const onCursorActivityHandler = (instance: CodeMirrorEditor) => {\n      // console.log(\"cursorActivity\", editor.getCursor());\n      // console.log(\"selection: \", editor.getSelection());\n      return;\n    };\n    editor.on(\"cursorActivity\", onCursorActivityHandler);\n\n    return () => {\n      editor.off(\"change\", onChangeHandler);\n      editor.off(\"cursorActivity\", onCursorActivityHandler);\n    };\n  }, [editor, note, props.notebook]);\n\n  // Git Status\n  useEffect(() => {\n    crossnoteContainer\n      .getStatus(note.notebookPath, note.filePath)\n      .then((status) => {\n        setGitStatus(status);\n      });\n  }, [note.markdown, note.config.modifiedAt, note]);\n\n  // Set theme\n  useEffect(() => {\n    if (editor && settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: settingsContainer.theme.name,\n      });\n    }\n  }, [settingsContainer.theme, editor]);\n\n  return (\n    <Box className={clsx(classes.notePanel)}>\n      <Box\n        className={clsx(classes.topPanel, \"editor-toolbar\")}\n        style={{\n          backgroundColor:\n            settingsContainer.theme.name === \"light\" ? \"#fff\" : \"inherit\",\n        }}\n      >\n        <Box className={clsx(classes.row)} style={{ width: \"100%\" }}>\n          <InputBase\n            value={noteTitle}\n            style={{\n              fontSize: \"1.5rem\",\n              fontWeight: 400,\n              marginLeft: \"6px\",\n            }}\n            placeholder={t(\"general/title\")}\n            fullWidth={true}\n            onChange={(event) => setNoteTitle(event.currentTarget.value)}\n            onBlur={confirmNoteTitle}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                confirmNoteTitle();\n              }\n            }}\n          ></InputBase>\n          <ButtonGroup\n            variant=\"text\"\n            color=\"default\"\n            aria-label=\"editor mode\"\n            size=\"small\"\n          >\n            <Tooltip title={t(\"editor/note-control/preview\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.Preview &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.Preview ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.Preview)}\n              >\n                <FilePresentationBox></FilePresentationBox>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"general/vickymd\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.VickyMD &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.VickyMD ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.VickyMD)}\n              >\n                <Pencil></Pencil>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"editor/note-control/source-code\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.SourceCode &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.SourceCode ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.SourceCode)}\n              >\n                <CodeTags></CodeTags>\n              </Button>\n            </Tooltip>\n          </ButtonGroup>\n          <ButtonGroup\n            variant=\"text\"\n            color=\"default\"\n            aria-label=\"editor mode\"\n            size=\"small\"\n          >\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={(event) => setNotePopoverElement(event.currentTarget)}\n            >\n              <DotsVertical></DotsVertical>\n            </Button>\n          </ButtonGroup>\n        </Box>\n        <Divider></Divider>\n      </Box>\n      <Box className={clsx(classes.contentPanel)}>\n        <Box className={clsx(classes.editorWrapper)}>\n          <textarea\n            className={clsx(classes.editor, \"editor-textarea\")}\n            placeholder={t(\"editor/placeholder\")}\n            ref={(element: HTMLTextAreaElement) => {\n              setTextAreaElement(element);\n            }}\n          ></textarea>\n          {(editorMode === EditorMode.Preview ||\n            editorMode === EditorMode.SplitView) &&\n          editor ? (\n            <div\n              className={clsx(\n                classes.preview,\n                \"preview\",\n                previewIsPresentation ? classes.presentation : null,\n              )}\n              ref={(element: HTMLElement) => {\n                setPreviewElement(element);\n              }}\n            ></div>\n          ) : null}\n        </Box>\n        <React.Fragment>\n          <Box style={{ marginTop: \"32px\" }}></Box>\n          <NotesPanel\n            title={\"Linked references\"}\n            tabNode={props.tabNode}\n            notebook={props.notebook}\n            note={note}\n          ></NotesPanel>\n        </React.Fragment>\n      </Box>\n      <Box className={clsx(classes.bottomPanel, \"editor-bottom-panel\")}>\n        <Box className={clsx(classes.row)}>\n          <Typography\n            variant={\"caption\"}\n            className={clsx(classes.filePath)}\n            color={\"textPrimary\"}\n          >\n            {note.filePath +\n              (gitStatus ? \" - \" + t(`git/status/${gitStatus}`) : \"\")}\n          </Typography>\n        </Box>\n        {editorMode !== EditorMode.Preview && (\n          <Box className={clsx(classes.cursorPositionInfo)}>\n            <Typography variant={\"caption\"} color={\"textPrimary\"}>\n              {`${t(\"editor/ln\")} ${cursorPosition.line + 1}, ${t(\n                \"editor/col\",\n              )} ${cursorPosition.ch}`}\n            </Typography>\n          </Box>\n        )}\n      </Box>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n\n      <NotePopover\n        tabNode={props.tabNode}\n        note={note}\n        anchorElement={notePopoverElement}\n        onClose={() => setNotePopoverElement(null)}\n      ></NotePopover>\n\n      <Card\n        id=\"math-preview\"\n        className={clsx(classes.floatWin, \"float-win\", \"float-win-hidden\")}\n        ref={mathPreviewElement}\n      >\n        <Box className={clsx(classes.floatWinTitle, \"float-win-title\")}>\n          <IconButton\n            className={clsx(classes.floatWinClose, \"float-win-close\")}\n          >\n            <Close></Close>\n          </IconButton>\n          <Typography>{t(\"general/math-preview\")}</Typography>\n        </Box>\n        <Box\n          className={clsx(classes.floatWinContent, \"float-win-content\")}\n          id=\"math-preview-content\"\n        ></Box>\n      </Card>\n    </Box>\n  );\n}\n","import { FloatWin } from \"./float-win\";\n\nexport function initMathPreview(\n  cm: CodeMirror.Editor,\n  winElement: HTMLElement,\n) {\n  let mathRenderer: any = null;\n  const win = new FloatWin(winElement);\n  var supressed = false;\n\n  win.closeBtn.addEventListener(\n    \"click\",\n    function () {\n      supressed = true; // for current TeX block\n    },\n    false,\n  );\n\n  function updatePreview(expr: string) {\n    if (supressed) return;\n\n    if (!mathRenderer) {\n      // initialize renderer and preview window\n      mathRenderer = cm.hmd.FoldMath.createRenderer(\n        document.getElementById(\"math-preview-content\"),\n        \"display\",\n      );\n      mathRenderer.onChanged = function () {\n        // finished rendering. show the window\n        if (!win.visible) {\n          var cursorPos = cm.charCoords(cm.getCursor(), \"window\");\n          win.moveTo(cursorPos.left, cursorPos.bottom);\n        }\n        win.show();\n      };\n    }\n\n    // console.log(\"[MathPreview] \" + expr);\n\n    if (!mathRenderer.isReady()) return;\n    mathRenderer.startRender(expr);\n  }\n\n  function hidePreview() {\n    // console.log(\"[MathPreview] (exit)\");\n\n    win.hide();\n    supressed = false;\n  }\n\n  cm.setOption(\"hmdFoldMath\", {\n    onPreview: updatePreview,\n    onPreviewEnd: hidePreview,\n  });\n}\n","export default {\"logMessage\": \"3210726 Wikilink autosuggest (#191)\",\"hash\":\"3210726ed92a910fbb5463829bf073e52f602e1c\"}\n","import {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  Chip,\n  IconButton,\n  Link,\n  MenuItem,\n  Popover,\n  Select,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  Github,\n  ImagePlus,\n  Keyboard,\n  ThemeLightDark,\n  Translate,\n} from \"mdi-material-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport { SketchPicker } from \"react-color\";\nimport { useTranslation } from \"react-i18next\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport {\n  useGitHubUserQuery,\n  useUnlinkGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { KeyMap } from \"../lib/keymap\";\nimport { themeManager } from \"../themes/manager\";\nimport { smmsUploadImages } from \"../utilities/image_uploader\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\nimport GitCommit from \"../_git_commit\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    settingsPanel: {\n      height: \"100%\",\n      overflow: \"hidden\",\n      backgroundColor: theme.palette.background.default,\n    },\n    settingsCard: {\n      padding: theme.spacing(2),\n      width: \"600px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      margin: `${theme.spacing(4)}px auto`,\n      height: \"fit-content\",\n      [theme.breakpoints.down(\"sm\")]: {\n        top: \"0\",\n        margin: \"0\",\n        height: \"100%\",\n        overflow: \"auto\",\n      },\n    },\n    cover: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      marginTop: theme.spacing(2),\n      paddingTop: \"30%\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundColor: \"#fade79\",\n      [theme.breakpoints.down(\"sm\")]: {\n        paddingTop: \"50%\",\n      },\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    loggedInSection: {\n      position: \"relative\",\n      padding: theme.spacing(0, 2),\n      border: `1px solid ${theme.palette.primary.light}`,\n      marginBottom: theme.spacing(4),\n      marginTop: theme.spacing(2),\n      borderRadius: \"4px\",\n    },\n    avatar: {\n      marginTop: theme.spacing(2),\n      width: \"64px\",\n      height: \"64px\",\n      borderRadius: \"4px\",\n    },\n    saveBtn: {\n      marginBottom: theme.spacing(2),\n    },\n    logoutBtn: {\n      position: \"absolute\",\n      top: \"16px\",\n      right: \"16px\",\n    },\n    section: {\n      marginTop: theme.spacing(1),\n    },\n    swatch: {\n      padding: \"4px\",\n      backgroundColor: \"#fff\",\n      borderRadius: \"1px\",\n      boxShadow: \"0 0 0 1px rgba(0,0,0,0.1)\",\n      display: \"inline-block\",\n      cursor: \"pointer\",\n    },\n    color: {\n      width: \"36px\",\n      height: \"18px\",\n      borderRadius: \"2px\",\n    },\n    editorText: {\n      marginLeft: theme.spacing(4),\n    },\n    editorCursor: {\n      borderLeftStyle: \"solid\",\n      borderLeftWidth: \"2px\",\n      padding: \"0\",\n      position: \"relative\",\n    },\n  }),\n);\n\ninterface RGBA {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\nfunction getRGBA(inputStr: string = \"\"): RGBA {\n  if (!inputStr || !inputStr.length || !inputStr.match(/^rgba\\(/)) {\n    return {\n      r: 51,\n      g: 51,\n      b: 51,\n      a: 1,\n    };\n  } else {\n    const match = inputStr.match(\n      /^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/,\n    );\n    if (!match) {\n      return {\n        r: 51,\n        g: 51,\n        b: 51,\n        a: 1,\n      };\n    } else {\n      return {\n        r: parseInt(match[1], 10),\n        g: parseInt(match[2], 10),\n        b: parseInt(match[3], 10),\n        a: parseInt(match[4], 10),\n      };\n    }\n  }\n}\n\ninterface Props {}\nexport function Settings(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [colorPickerAnchorElement, setColorPickerAnchorElement] = useState<\n    HTMLElement\n  >(null);\n  const [imageUploaderElement, setImageUploaderElement] = useState<\n    HTMLInputElement\n  >(null);\n  const displayColorPicker = Boolean(colorPickerAnchorElement);\n  const settingsContainer = SettingsContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [avatar, setAvatar] = useState<string>(\n    (cloudContainer.viewer && cloudContainer.viewer.avatar) || \"\",\n  );\n  const [uploadingAvatar, setUploadingAvatar] = useState<boolean>(false);\n  const [resGitHubUser] = useGitHubUserQuery();\n  const [\n    resUnlinkGitHubAccount,\n    executeUnlinkGitHubAccount,\n  ] = useUnlinkGitHubAccountMutation();\n\n  function uploadAvatar(\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n  ) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (!imageUploaderElement) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: \"Uploading avatar image\",\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      smmsUploadImages(files)\n        .then((urls) => {\n          setUploadingAvatar(false);\n          setAvatar(urls[0] || \"\");\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          new Noty({\n            type: \"error\",\n            text: \"Failed to upload image\",\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n          setUploadingAvatar(false);\n        });\n    };\n    setUploadingAvatar(true);\n    imageUploaderElement.click();\n  }\n\n  useEffect(() => {\n    if (cloudContainer.viewer) {\n      setAvatar((avatar) => avatar || cloudContainer.viewer.avatar);\n    }\n  }, [cloudContainer.viewer]);\n\n  useEffect(() => {\n    if (resUnlinkGitHubAccount.data) {\n      window.location.reload();\n    }\n  }, [resUnlinkGitHubAccount]);\n\n  return (\n    <Box className={clsx(classes.settingsPanel)}>\n      <Card className={clsx(classes.settingsCard)}>\n        <Box\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n          }}\n        >\n          <Typography variant={\"h6\"}>{t(\"general/Settings\")}</Typography>\n        </Box>\n        {cloudContainer.loggedIn ? (\n          <Box className={clsx(classes.loggedInSection)}>\n            <Box className={clsx(classes.section)}>\n              <Box className={clsx(classes.row)}>\n                <img\n                  src=\"/logo.svg\"\n                  style={{ width: \"48px\", height: \"48px\" }}\n                  alt={\"Crossnote\"}\n                ></img>\n                <Typography variant={\"h6\"}>\n                  @{cloudContainer.viewer.username}\n                </Typography>\n              </Box>\n              <Typography>{cloudContainer.viewer.email}</Typography>\n              <Typography variant={\"caption\"}>\n                {t(\"settings/created-cloud-widgets-count\") +\n                  `: ${cloudContainer.viewer.widgetsCount}/∞`}\n              </Typography>\n            </Box>\n            <Box className={clsx(classes.section)}>\n              <Avatar\n                className={clsx(classes.avatar)}\n                variant={\"rounded\"}\n                src={\n                  avatar ||\n                  \"data:image/png;base64,\" +\n                    new Identicon(\n                      sha256(\n                        cloudContainer.viewer && cloudContainer.viewer.username,\n                      ),\n                      80,\n                    ).toString()\n                }\n              ></Avatar>\n              <Box className={clsx(classes.row)}>\n                <TextField\n                  label={t(\"settings/Avatar\")}\n                  style={{ marginTop: 8 }}\n                  placeholder=\"https://.../xxx.png\"\n                  helperText={t(\"settings/enter-avatar-image-url\")}\n                  fullWidth\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  value={avatar}\n                  onChange={(event) => setAvatar(event.currentTarget.value)}\n                />\n                <Tooltip title={t(\"settings/upload-image\")}>\n                  <IconButton disabled={uploadingAvatar} onClick={uploadAvatar}>\n                    <ImagePlus></ImagePlus>\n                  </IconButton>\n                </Tooltip>\n              </Box>\n            </Box>\n            <Box\n              className={clsx(classes.section)}\n              style={{ marginBottom: \"16px\" }}\n            >\n              {resGitHubUser.data &&\n              resGitHubUser.data.viewer &&\n              resGitHubUser.data.viewer.githubUser ? (\n                <Chip\n                  color={\"primary\"}\n                  avatar={\n                    <Avatar\n                      src={resGitHubUser.data.viewer.githubUser.avatar}\n                    ></Avatar>\n                  }\n                  label={\n                    t(\"settings/linked-with-github-account\") +\n                    \": \" +\n                    resGitHubUser.data.viewer.githubUser.login\n                  }\n                  onClick={() => {\n                    window.open(\n                      \"https://github.com/\" +\n                        resGitHubUser.data.viewer.githubUser.login,\n                      \"_blank\",\n                    );\n                  }}\n                  disabled={resUnlinkGitHubAccount.fetching}\n                  onDelete={() => {\n                    executeUnlinkGitHubAccount();\n                  }}\n                />\n              ) : (\n                <Chip\n                  color={\"default\"}\n                  disabled={resGitHubUser.fetching}\n                  icon={<Github></Github>}\n                  onClick={() => startGitHubOAuth()}\n                  label={t(\"settings/link-with-github-account\")}\n                ></Chip>\n              )}\n            </Box>\n            <Box className={clsx(classes.section)}>\n              <Button\n                variant={\"contained\"}\n                color={\"primary\"}\n                className={clsx(classes.saveBtn)}\n                onClick={() => {\n                  cloudContainer.setUserInfo({\n                    name: settingsContainer.authorName,\n                    cover: \"\",\n                    avatar,\n                    editorCursorColor: settingsContainer.editorCursorColor,\n                    language: settingsContainer.language,\n                  });\n                }}\n                disabled={cloudContainer.resSetUserInfo.fetching}\n              >\n                {t(\"general/upload-the-profile\")}\n              </Button>\n            </Box>\n            <Button\n              variant={\"outlined\"}\n              color=\"secondary\"\n              className={clsx(classes.logoutBtn)}\n              onClick={() => {\n                cloudContainer.logout();\n              }}\n            >\n              {t(\"settings/log-out\")}\n            </Button>\n          </Box>\n        ) : null}\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n            }}\n          >\n            <Translate style={{ marginRight: \"8px\" }}></Translate>\n            {\"Languages/语言\"}\n          </Typography>\n          <Select\n            variant={\"standard\"}\n            value={settingsContainer.language}\n            onChange={(event) =>\n              settingsContainer.setLanguage(event.target.value as string)\n            }\n          >\n            <MenuItem value={\"en-US\"}>English</MenuItem>\n            <MenuItem value={\"zh-CN\"}>简体中文</MenuItem>\n            <MenuItem value={\"zh-TW\"}>繁体中文</MenuItem>\n            <MenuItem value={\"ja-JP\"}>日本語</MenuItem>\n          </Select>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <TextField\n            label={t(\"settings/author-name\")}\n            placeholder={t(\"account/Anonymous\")}\n            fullWidth\n            margin=\"normal\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            value={settingsContainer.authorName}\n            onChange={(event) =>\n              settingsContainer.setAuthorName(event.currentTarget.value)\n            }\n          ></TextField>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <TextField\n            label={t(\"settings/author-email\")}\n            placeholder={\"anonymous@crossnote.app\"}\n            fullWidth\n            margin=\"normal\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            value={settingsContainer.authorEmail}\n            onChange={(event) =>\n              settingsContainer.setAuthorEmail(event.currentTarget.value)\n            }\n          ></TextField>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n              marginTop: \"16px\",\n            }}\n          >\n            <ThemeLightDark style={{ marginRight: \"8px\" }}></ThemeLightDark>\n            {t(\"settings/theme\") + \" (beta)\"}\n          </Typography>\n          <Select\n            value={settingsContainer.theme.name}\n            onChange={(event) => {\n              settingsContainer.setTheme(event.target.value as string);\n            }}\n          >\n            {themeManager.themes.map((theme) => {\n              return (\n                <MenuItem key={theme.name} value={theme.name}>\n                  {theme.name}\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n              marginTop: \"16px\",\n            }}\n          >\n            {t(\"settings/editor-cursor-color\") + \" (beta)\"}\n          </Typography>\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n            }}\n          >\n            <Box\n              className={clsx(classes.swatch)}\n              onClick={(event: React.MouseEvent<HTMLElement>) =>\n                setColorPickerAnchorElement(event.currentTarget)\n              }\n            >\n              <Box\n                className={clsx(classes.color)}\n                style={{ backgroundColor: settingsContainer.editorCursorColor }}\n              ></Box>\n            </Box>\n            <div className={clsx(classes.editorText)}>\n              {t(\"settings/hello\")}\n              <span\n                className={clsx(classes.editorCursor)}\n                style={{\n                  borderLeftColor:\n                    settingsContainer.editorCursorColor || \"#4A90E2\",\n                }}\n              ></span>\n              {t(\"settings/world\")}\n            </div>\n          </Box>\n          <Popover\n            open={displayColorPicker}\n            anchorEl={colorPickerAnchorElement}\n            onClose={() => {\n              setColorPickerAnchorElement(null);\n            }}\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"center\",\n            }}\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"center\",\n            }}\n          >\n            <SketchPicker\n              color={getRGBA(settingsContainer.editorCursorColor)}\n              onChange={(color) => {\n                const cursorColor = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`;\n                settingsContainer.setEditorCursorColor(cursorColor);\n              }}\n            ></SketchPicker>\n          </Popover>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n              marginTop: \"16px\",\n            }}\n          >\n            <Keyboard style={{ marginRight: \"8px\" }}></Keyboard>\n            {t(\"settings/key-map\") + \" (beta)\"}\n          </Typography>\n          <Select\n            value={settingsContainer.keyMap}\n            onChange={(event) => {\n              settingsContainer.setKeyMap(event.target.value as KeyMap);\n            }}\n          >\n            <MenuItem value={KeyMap.DEFAULT}>{t(\"general/Default\")}</MenuItem>\n            <MenuItem value={KeyMap.VIM}>{t(\"general/Vim\")}</MenuItem>\n            <MenuItem value={KeyMap.EMACS}>{t(\"general/Emacs\")}</MenuItem>\n          </Select>\n        </Box>\n        <Box className={clsx(classes.section)} style={{ marginTop: \"32px\" }}>\n          <Link\n            href={\n              \"https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md\"\n            }\n            target={\"_blank\"}\n          >\n            <Typography variant={\"caption\"}>\n              {\"🤔 \" + t(\"settings/about-this-project\")}\n            </Typography>\n          </Link>\n          <br></br>\n          <Link\n            href={`https://github.com/0xGG/crossnote/issues`}\n            target={\"_blank\"}\n          >\n            <Typography variant={\"caption\"}>\n              {\"👀 \" + t(\"settings/issues-and-feature-requests\")}\n            </Typography>\n          </Link>\n          <br></br>\n          <Link\n            href={`https://github.com/0xGG/crossnote/commit/${GitCommit.hash}`}\n            target={\"_blank\"}\n          >\n            <Typography variant={\"caption\"}>\n              {\"🛠 Build \" + GitCommit.logMessage}\n            </Typography>\n          </Link>\n          <br></br>\n          <Link\n            onClick={(event: any) => {\n              event.preventDefault();\n              crossnoteContainer.addTabNode({\n                type: \"tab\",\n                name: \"🔏 Privacy policy\",\n                component: \"Privacy\",\n                id: \"Privacy\",\n                config: {\n                  singleton: true,\n                },\n              });\n            }}\n            href=\"\"\n          >\n            <Typography variant={\"caption\"}>{\"🔏 Privacy policy\"}</Typography>\n          </Link>\n        </Box>\n        {!cloudContainer.loggedIn && (\n          <Button\n            variant={\"outlined\"}\n            color={\"primary\"}\n            className={clsx(classes.logoutBtn)}\n            onClick={() => cloudContainer.setAuthDialogOpen(true)}\n          >\n            {t(\"general/sign-in\")}\n          </Button>\n        )}\n        <input\n          type=\"file\"\n          multiple\n          style={{ display: \"none\" }}\n          ref={(element: HTMLInputElement) => {\n            setImageUploaderElement(element);\n          }}\n        ></input>\n      </Card>\n    </Box>\n  );\n}\n","import { Box } from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport FlexLayout, { TabNode } from \"flexlayout-react\";\nimport \"flexlayout-react/style/light.css\";\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { TabNodeComponent, TabNodeConfig } from \"../lib/tabNode\";\nimport { PrivacyPolicy } from \"../pages/Privacy\";\nimport GraphView from \"./GraphView\";\nimport NotePanel from \"./NotePanel\";\nimport NotesPanel from \"./NotesPanel\";\nimport { Settings } from \"./Settings\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    mainPanel: {\n      \"position\": \"relative\",\n      \"display\": \"flex\",\n      \"flexDirection\": \"row\",\n      \"flexGrow\": 1,\n      \"overflow\": \"auto\",\n      // overright the flexlayout style\n      \"& .flexlayout__tabset\": {\n        backgroundColor: theme.palette.background.paper,\n      },\n      \"& .flexlayout__tabset_tabbar_outer.flexlayout__tabset_tabbar_outer_top\": {\n        backgroundColor: darken(theme.palette.background.default, 0.04),\n        borderColor: theme.palette.divider,\n      },\n      \"& .flexlayout__tab_button\": {\n        color: theme.palette.text.primary,\n      },\n      \"& .flexlayout__tab_button.flexlayout__tab_button--selected\": {\n        backgroundColor: theme.palette.background.paper,\n      },\n      \"& .flexlayout__tab_button:hover\": {\n        backgroundColor: theme.palette.background.paper,\n      },\n      \"& .flexlayout__splitter\": {\n        backgroundColor: darken(theme.palette.background.default, 0.04),\n      },\n      \"& .flexlayout__tab\": {\n        backgroundColor: theme.palette.background.paper,\n      },\n      \"& .flexlayout__popup_menu_container\": {\n        color: theme.palette.text.primary,\n        backgroundColor: theme.palette.background.paper,\n        borderColor: theme.palette.divider,\n      },\n      \"& .flexlayout__popup_menu_container .flexlayout__popup_menu_item:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.1),\n        cursor: \"pointer\",\n      },\n      \"& .flexlayout__outline_rect\": {\n        borderColor: theme.palette.primary.main,\n      },\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport function MainPanel(props: Props) {\n  const classes = useStyles();\n  const container = useRef<HTMLDivElement>(null);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const { t } = useTranslation();\n\n  const factory = useCallback(\n    (node: TabNode) => {\n      const config: TabNodeConfig = node.getConfig();\n      console.log(\n        \"render component: \\n\",\n        `* id: ${node.getId()}\\n`,\n        `* name: ${node.getName()}\\n`,\n        `* config: `,\n        node.getConfig(),\n      );\n\n      const component: TabNodeComponent = node.getComponent() as TabNodeComponent;\n      let renderElement = <Box></Box>;\n      if (component === \"Settings\") {\n        renderElement = <Settings></Settings>;\n      } else if (component === \"Notes\") {\n        renderElement = (\n          <NotesPanel\n            tabNode={node}\n            notebook={config.notebook}\n            title={t(\"general/notes\")}\n          ></NotesPanel>\n        );\n      } else if (component === \"Privacy\") {\n        renderElement = (\n          <PrivacyPolicy toggleDrawer={props.toggleDrawer}></PrivacyPolicy>\n        );\n      } else if (component === \"Note\") {\n        renderElement = (\n          <NotePanel\n            notebook={config.notebook}\n            note={config.note}\n            tabNode={node}\n          ></NotePanel>\n        );\n      } else if (component === \"Graph\") {\n        renderElement = (\n          <GraphView notebook={config.notebook} tabNode={node}></GraphView>\n        );\n      }\n      return (\n        <ThemeProvider theme={settingsContainer.theme.muiTheme}>\n          {renderElement}\n        </ThemeProvider>\n      );\n    },\n    [props.toggleDrawer, t, settingsContainer.theme.muiTheme],\n  );\n\n  useEffect(() => {\n    console.log(\"render MainPanel\");\n  }, [container, crossnoteContainer.layoutModel]);\n\n  return (\n    <div className={clsx(classes.mainPanel)} ref={container} id=\"main-panel\">\n      <FlexLayout.Layout\n        model={crossnoteContainer.layoutModel}\n        factory={factory}\n      ></FlexLayout.Layout>\n    </div>\n  );\n}\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Input,\n  InputAdornment,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { ChevronDown } from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Notebook } from \"../lib/notebook\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nconst MaxClickDeleteCount = 3;\nexport default function ConfigureNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [gitURL, setGitURL] = useState<string>(\"\");\n  const [gitBranch, setGitBranch] = useState<string>(\"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [autoFetchPeriod, setAutoFetchPeriod] = useState<number>(0);\n  const [clickDeleteCount, setClickDeleteCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const [clickHardResetCount, setClickHardResetCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n    setClickHardResetCount(MaxClickDeleteCount);\n  }, [props.open]);\n\n  useEffect(() => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      return;\n    }\n    setNotebookName(notebook.name);\n    setGitURL(notebook.gitURL);\n    setGitBranch(notebook.gitBranch || \"master\");\n    setGitUsername(notebook.gitUsername);\n    setGitPassword(notebook.gitPassword);\n    setGitCorsProxy(notebook.gitCorsProxy);\n    setAutoFetchPeriod(notebook.autoFetchPeriod / 60000);\n  }, [props.notebook]);\n\n  const updateNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      props.onClose();\n      return;\n    }\n    notebook.name = notebookName.trim();\n    notebook.gitURL = gitURL.trim();\n    notebook.gitBranch = gitBranch.trim();\n    notebook.gitUsername = gitUsername.trim();\n    notebook.gitPassword = gitPassword;\n    notebook.gitCorsProxy = gitCorsProxy.trim();\n    notebook.autoFetchPeriod = Math.max(autoFetchPeriod * 60000, 0);\n    try {\n      await crossnoteContainer.updateNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [\n    props,\n    props.notebook,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    gitCorsProxy,\n    autoFetchPeriod,\n  ]);\n\n  const deleteNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.deleteNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [props.notebook]);\n\n  const hardResetNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.hardResetNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [props.notebook]);\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n  }, [props.notebook]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={!clickDeleteCount ? null : props.onClose}\n    >\n      <DialogTitle>{t(\"general/configure-the-notebook\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        {!props.notebook.isLocal && (\n          <ExpansionPanel\n            elevation={2}\n            expanded={expanded}\n            onChange={() => setExpanded(!expanded)}\n          >\n            <ExpansionPanelSummary expandIcon={<ChevronDown></ChevronDown>}>\n              <Typography>{`${t(\"general/git-repository\")} (${t(\n                \"general/optional\",\n              )})`}</Typography>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails>\n              <Box>\n                <TextField\n                  label={t(\"general/url\")}\n                  placeholder={\"https://abc/def.git\"}\n                  disabled={true}\n                  fullWidth={true}\n                  value={gitURL}\n                  onChange={(event) => setGitURL(event.target.value)}\n                ></TextField>\n                <TextField\n                  label={t(\"general/branch\")}\n                  placeholder={\"master\"}\n                  disabled={true}\n                  fullWidth={true}\n                  value={gitBranch}\n                  onChange={(event) => setGitBranch(event.target.value)}\n                ></TextField>\n                <TextField\n                  label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                  placeholder={`${t(\"general/Username\")} (${t(\n                    \"general/optional\",\n                  )})`}\n                  fullWidth={true}\n                  value={gitUsername}\n                  onChange={(event) => setGitUsername(event.target.value)}\n                ></TextField>\n                <TextField\n                  label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                  placeholder={`${t(\"general/Password\")} (${t(\n                    \"general/optional\",\n                  )})`}\n                  type={\"password\"}\n                  fullWidth={true}\n                  value={gitPassword}\n                  onChange={(event) => setGitPassword(event.target.value)}\n                ></TextField>\n                <TextField\n                  label={t(\"general/cors-proxy\")}\n                  placeholder={\"https://crossnote.app/cors/\"}\n                  fullWidth={true}\n                  value={gitCorsProxy}\n                  onChange={(event) => setGitCorsProxy(event.target.value)}\n                ></TextField>\n                <Link\n                  href={\n                    \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                  }\n                  target={\"_blank\"}\n                >\n                  {t(\"general/why-cors-proxy\")}\n                </Link>\n                {props.notebook && props.notebook.gitURL ? (\n                  <Box style={{ marginTop: \"16px\" }}>\n                    <Typography>\n                      {t(\"general/check-notebook-updates-periodically\")}\n                    </Typography>\n                    <Input\n                      value={autoFetchPeriod}\n                      onChange={(event) => {\n                        try {\n                          const value = parseFloat(event.target.value || \"0\");\n                          if (!isNaN(value)) {\n                            setAutoFetchPeriod(value);\n                          }\n                        } catch (error) {}\n                      }}\n                      endAdornment={\n                        <InputAdornment position=\"end\">\n                          {t(\"general/minutes\")}\n                        </InputAdornment>\n                      }\n                    ></Input>\n                  </Box>\n                ) : null}\n              </Box>\n            </ExpansionPanelDetails>\n          </ExpansionPanel>\n        )}\n      </DialogContent>\n      <DialogActions>\n        {crossnoteContainer.notebooks.length > 1 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickDeleteCount}\n            onClick={() => {\n              if (clickDeleteCount === 1) {\n                deleteNotebook();\n                setClickDeleteCount(clickDeleteCount - 1);\n              } else {\n                setClickDeleteCount(clickDeleteCount - 1);\n              }\n            }}\n          >\n            {(props.notebook.isLocal\n              ? t(\"general/close\")\n              : t(\"general/Delete\")) +\n              (clickDeleteCount < MaxClickDeleteCount\n                ? ` ${clickDeleteCount}`\n                : \"\")}\n          </Button>\n        )}\n        {props.notebook && props.notebook.gitURL.length > 0 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickHardResetCount || !clickDeleteCount}\n            onClick={() => {\n              if (clickHardResetCount === 1) {\n                hardResetNotebook();\n                setClickHardResetCount(clickHardResetCount - 1);\n              } else {\n                setClickHardResetCount(clickHardResetCount - 1);\n              }\n            }}\n          >\n            {t(\"general/hard-reset\") +\n              (clickHardResetCount < MaxClickDeleteCount\n                ? ` ${clickHardResetCount}`\n                : \"\")}\n          </Button>\n        )}\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={updateNotebook}\n          disabled={!clickDeleteCount}\n        >\n          {t(\"general/Save\")}\n        </Button>\n        <Button onClick={props.onClose} disabled={!clickDeleteCount}>\n          {t(\"general/cancel\")}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { Notebook } from \"../lib/notebook\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    textField: {\n      marginBottom: theme.spacing(2),\n    },\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nexport default function PushNotebookDialog(props: Props) {\n  const classes = useStyles(props);\n  const notebook = props.notebook;\n  const [gitUsername, setGitUsername] = useState<string>(notebook.gitUsername);\n  const [gitPassword, setGitPassword] = useState<string>(notebook.gitPassword);\n  const [commitMessage, setCommitMessage] = useState<string>(\n    \"doc: Updated docs\",\n  );\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const pushNotebook = useCallback(() => {\n    crossnoteContainer\n      .pushNotebook({\n        notebook,\n        authorName: settingsContainer.authorEmail,\n        authorEmail: settingsContainer.authorEmail,\n        username: gitUsername,\n        password: gitPassword,\n        message: commitMessage,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        props.onClose();\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-uploaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error: Error) => {\n        console.log(error);\n        props.onClose();\n        new Noty({\n          type: \"error\",\n          text: error.message.match(/^error\\//)\n            ? t(error.message)\n            : t(\"error/failed-to-upload-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [\n    settingsContainer.authorName,\n    settingsContainer.authorEmail,\n    gitUsername,\n    gitPassword,\n    notebook,\n    commitMessage,\n    props,\n    t,\n    crossnoteContainer.pushNotebook,\n  ]);\n\n  useEffect(() => {\n    setGitUsername(notebook.gitUsername);\n  }, [notebook.gitUsername, props.open]);\n\n  useEffect(() => {\n    setGitPassword(notebook.gitPassword);\n  }, [notebook.gitPassword, props.open]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isPushingNotebook) {\n          props.onClose();\n        }\n      }}\n    >\n      <DialogTitle>\n        {`${t(\"general/upload-notebook\")} \"${notebook.name}\"`}\n        <Box>\n          <Typography variant={\"caption\"}>\n            {notebook.gitURL + \":\" + notebook.gitBranch}\n          </Typography>\n        </Box>\n      </DialogTitle>\n      <DialogContent>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-name\")}\n          fullWidth={true}\n          value={settingsContainer.authorName}\n          onChange={(event) =>\n            settingsContainer.setAuthorName(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-email\")}\n          fullWidth={true}\n          value={settingsContainer.authorEmail}\n          onChange={(event) =>\n            settingsContainer.setAuthorEmail(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"general/commit-message\")}\n          fullWidth={true}\n          value={commitMessage}\n          onChange={(event) => setCommitMessage(event.target.value)}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Username\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Username\",\n          )} (${t(\"general/optional\")})`}\n          fullWidth={true}\n          value={gitUsername}\n          onChange={(event) => setGitUsername(event.target.value)}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Password\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Password\",\n          )} (${t(\"general/optional\")})`}\n          type={\"password\"}\n          fullWidth={true}\n          value={gitPassword}\n          onChange={(event) => setGitPassword(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          disabled={crossnoteContainer.isPushingNotebook}\n          onClick={pushNotebook}\n        >\n          {crossnoteContainer.isPushingNotebook\n            ? t(\"general/Uploading\")\n            : t(\"general/Upload\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { Box, IconButton, Tooltip, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport { TreeItem, TreeView } from \"@material-ui/lab\";\nimport clsx from \"clsx\";\nimport { ChevronDown, ChevronRight } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer, HomeSection } from \"../containers/crossnote\";\nimport {\n  ChangedNoteFilePathEventData,\n  DeletedNoteEventData,\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData,\n} from \"../lib/event\";\nimport { Notes } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport ConfigureNotebookDialog from \"./ConfigureNotebookDialog\";\nimport PushNotebookDialog from \"./PushNotebookDialog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    treeItemRoot: {\n      \"paddingLeft\": \"4px\",\n      // color: theme.palette.text.secondary,\n      \"&:focus > $treeItemContent\": {\n        color: theme.palette.text.primary,\n        backgroundColor: darken(theme.palette.background.paper, 0.05),\n      },\n      \"&:focus > $treeItemLabelIcon\": {\n        color: theme.palette.text.primary,\n      },\n    },\n    treeItemContent: {\n      \"cursor\": \"default\",\n      \"color\": theme.palette.text.primary,\n      // paddingLeft: theme.spacing(1),\n      // paddingRight: theme.spacing(1),\n      \"userSelect\": \"none\",\n      \"fontWeight\": theme.typography.fontWeightMedium,\n      \"$treeItemExpanded > &\": {\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n    },\n    treeItemGroup: {\n      \"marginLeft\": 0,\n      \"& $treeItemContent\": {\n        // paddingLeft: theme.spacing(2)\n      },\n    },\n    treeItemExpanded: {},\n    treeItemLabel: {\n      fontWeight: \"inherit\",\n      color: \"inherit\",\n      backgroundColor: \"transparent !important\",\n    },\n    treeItemLabelRoot: {\n      display: \"flex\",\n      alignItems: \"center\",\n      padding: theme.spacing(1, 0),\n    },\n    treeItemLabelIcon: {},\n    treeItemLabelText: {\n      paddingLeft: \"12px\",\n      flexGrow: 1,\n    },\n    disabled: {\n      color: theme.palette.text.disabled,\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n  onCloseDrawer: () => void;\n}\nexport default function NotebookTreeView(props: Props) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState<string[]>([]);\n  const [\n    notebookConfigurationDialogOpen,\n    setNotebookConfigurationDialogOpen,\n  ] = useState<boolean>(false);\n  const [pushNotebookDialogOpen, setPushNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [favoritedNotes, setFavoritedNotes] = useState<Notes>({});\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const { t } = useTranslation();\n\n  const refreshQuickAccessNotes = useCallback((notes: Notes) => {\n    const favoritedNotes: Notes = {};\n    for (let filePath in notes) {\n      const note = notes[filePath];\n      if (note.config.favorited) {\n        favoritedNotes[note.filePath] = note;\n      }\n    }\n    setFavoritedNotes(favoritedNotes);\n  }, []);\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<{}>, nodes: string[]) => {\n      event.stopPropagation();\n      const element = event.target as HTMLElement;\n      if (\n        element &&\n        element.tagName &&\n        element.tagName.toUpperCase().match(/^(SVG|PATH|BUTTON)$/)\n      ) {\n        props.notebook\n          .refreshNotesIfNotLoaded({\n            dir: \"./\",\n            includeSubdirectories: true,\n          })\n          .then((notes) => {\n            refreshQuickAccessNotes(notes);\n            globalEmitter.emit(EventType.PerformedGitOperation, {\n              notebookPath: props.notebook.dir,\n            });\n          });\n\n        setExpanded(nodes);\n      }\n    },\n    [props.notebook, refreshQuickAccessNotes],\n  );\n\n  // Emitter\n  useEffect(() => {\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      if (!(data.noteFilePath in props.notebook.notes)) {\n        return;\n      }\n      const isFavorited = data.noteFilePath in favoritedNotes;\n      if (data.noteConfig.favorited !== isFavorited) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      }\n      // refreshQuickAccessNotes(props.notebook.notes);\n    };\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      }\n    };\n    const changedNoteFilePathCallback = (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      }\n    };\n    const performedGitOperationCallback = (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      }\n    };\n\n    if (globalEmitter) {\n      globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.on(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.on(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n    }\n\n    return () => {\n      if (globalEmitter) {\n        globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n        globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n        globalEmitter.off(\n          EventType.ChangedNoteFilePath,\n          changedNoteFilePathCallback,\n        );\n        globalEmitter.off(\n          EventType.PerformedGitOperation,\n          performedGitOperationCallback,\n        );\n      }\n    };\n  }, [props.notebook, refreshQuickAccessNotes, favoritedNotes]);\n\n  useEffect(() => {\n    if (crossnoteContainer.homeSection !== HomeSection.Notebooks) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.homeSection]);\n\n  useEffect(() => {\n    refreshQuickAccessNotes(props.notebook.notes);\n  }, [props.notebook, refreshQuickAccessNotes]);\n\n  /*\n  useEffect(() => {\n    if (crossnoteContainer.selectedNotebook !== props.notebook) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.selectedNotebook, props.notebook]);\n  */\n\n  return (\n    <React.Fragment>\n      <TreeView\n        defaultExpandIcon={\n          <IconButton\n            disableFocusRipple={true}\n            disableRipple={true}\n            size={\"medium\"}\n          >\n            <ChevronRight></ChevronRight>\n          </IconButton>\n        }\n        defaultCollapseIcon={\n          <IconButton\n            disableFocusRipple={true}\n            disableRipple={true}\n            size={\"medium\"}\n          >\n            <ChevronDown></ChevronDown>\n          </IconButton>\n        }\n        defaultEndIcon={<div style={{ width: 24 }} />}\n        expanded={expanded}\n        onNodeToggle={handleChange}\n        style={{ width: \"100%\" }}\n      >\n        <TreeItem\n          nodeId={\"notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                props.notebook\n                  .refreshNotesIfNotLoaded({\n                    dir: \"./\",\n                    includeSubdirectories: true,\n                  })\n                  .then((notes) => {\n                    refreshQuickAccessNotes(notes);\n                    globalEmitter.emit(EventType.PerformedGitOperation, {\n                      notebookPath: props.notebook.dir,\n                    });\n                    /*\n                    crossnoteContainer.addTabNode({\n                      type: \"tab\",\n                      component: \"Notes\",\n                      id: \"Notes: \" + props.notebook.dir,\n                      name: \"📔 \" + props.notebook.name,\n                      config: {\n                        singleton: true,\n                        notebook: props.notebook,\n                      },\n                    });\n                    */\n                  });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <Typography\n                color={\"inherit\"}\n                variant={\"body1\"}\n                className={clsx(classes.treeItemLabelText)}\n                style={{ paddingLeft: \"4px\" }}\n              >\n                <span role=\"img\" style={{ paddingRight: \"8px\" }}>\n                  {props.notebook.isLocal\n                    ? \"🗂️ \"\n                    : props.notebook.localSha === props.notebook.remoteSha\n                    ? \"☁️ \"\n                    : \"🔔 \"}\n                </span>\n                {props.notebook.name}\n              </Typography>\n            </Box>\n          }\n        >\n          <TreeItem\n            nodeId={\"today-notes\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.openTodayNote(props.notebook);\n                  props.onCloseDrawer();\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label=\"today-notes\">\n                  {\"📅\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/today\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          <TreeItem\n            nodeId={\"graph-view\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Graph\",\n                    id: \"Graph: \" + props.notebook.dir,\n                    name: \"🕸 \" + t(\"general/graph-view\"),\n                    config: {\n                      singleton: true,\n                      notebook: props.notebook,\n                    },\n                  });\n                  props.onCloseDrawer();\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label=\"todo-notes\">\n                  {\"🕸\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/graph-view\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          <TreeItem\n            nodeId={\"all-notes\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Notes\",\n                    id: \"Notes: \" + props.notebook.dir,\n                    name: \"📔 \" + props.notebook.name,\n                    config: {\n                      singleton: true,\n                      notebook: props.notebook,\n                    },\n                  });\n                  props.onCloseDrawer();\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label=\"Notes\">\n                  {\"📔\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/notes\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          {Object.values(favoritedNotes).map((note) => {\n            return (\n              <TreeItem\n                key={`${note.notebookPath}/${note.filePath}`}\n                nodeId={`${note.notebookPath}/${note.filePath}`}\n                classes={{\n                  root: classes.treeItemRoot,\n                  content: classes.treeItemContent,\n                  expanded: classes.treeItemExpanded,\n                  group: classes.treeItemGroup,\n                  label: classes.treeItemLabel,\n                }}\n                label={\n                  <Box\n                    onClick={() => {\n                      crossnoteContainer.addTabNode({\n                        type: \"tab\",\n                        component: \"Note\",\n                        config: {\n                          singleton: false,\n                          note,\n                          notebook: props.notebook,\n                        },\n                        name: `📝 ` + note.title,\n                      });\n                      props.onCloseDrawer();\n                    }}\n                    className={clsx(classes.treeItemLabelRoot)}\n                  >\n                    <span role=\"img\" aria-label=\"quick-access\">\n                      {\"⭐️\"}\n                    </span>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {note.title}\n                    </Typography>\n                  </Box>\n                }\n              ></TreeItem>\n            );\n          })}\n          <TreeItem\n            nodeId={\"settings\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => setNotebookConfigurationDialogOpen(true)}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label={t(\"general/Settings\")}>\n                  {\"⚙️\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/Settings\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          {props.notebook.gitURL && (\n            <TreeItem\n              nodeId={\"upload\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() => setPushNotebookDialogOpen(true)}\n                  className={clsx(classes.treeItemLabelRoot)}\n                >\n                  <span role=\"img\" aria-label={t(\"general/Upload\")}>\n                    {\"📤\"}\n                  </span>\n                  <Tooltip title={t(\"general/upload-push\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/Upload\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {props.notebook.isLocal && (\n            <TreeItem\n              nodeId={\"reload\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() =>\n                    crossnoteContainer.refreshNotebook(props.notebook)\n                  }\n                  className={clsx(classes.treeItemLabelRoot)}\n                >\n                  <span role=\"img\" aria-label={t(\"general/refresh\")}>\n                    {\"🔄\"}\n                  </span>\n                  <Tooltip title={t(\"general/refresh\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/refresh\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {props.notebook.gitURL && (\n            <TreeItem\n              nodeId={\"download\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() => {\n                    if (\n                      crossnoteContainer.isPullingNotebook ||\n                      crossnoteContainer.isPushingNotebook\n                    ) {\n                      return;\n                    }\n                    crossnoteContainer\n                      .pullNotebook({\n                        notebook: props.notebook,\n                        onAuthFailure: () => {\n                          new Noty({\n                            type: \"error\",\n                            text: t(\"error/authentication-failed\"),\n                            layout: \"topRight\",\n                            theme: \"relax\",\n                            timeout: 5000,\n                          }).show();\n                        },\n                      })\n                      .then(() => {\n                        new Noty({\n                          type: \"success\",\n                          text: t(\"success/notebook-downloaded\"),\n                          layout: \"topRight\",\n                          theme: \"relax\",\n                          timeout: 2000,\n                        }).show();\n                      })\n                      .catch((error) => {\n                        console.log(error);\n                        new Noty({\n                          type: \"error\",\n                          text: t(\"error/failed-to-download-notebook\"),\n                          layout: \"topRight\",\n                          theme: \"relax\",\n                          timeout: 2000,\n                        }).show();\n                      });\n                  }}\n                  className={clsx(\n                    classes.treeItemLabelRoot,\n                    crossnoteContainer.isPullingNotebook ||\n                      crossnoteContainer.isPushingNotebook\n                      ? classes.disabled\n                      : null,\n                  )}\n                >\n                  <span role=\"img\" aria-label={t(\"general/Download\")}>\n                    {\"📥\"}\n                  </span>\n                  <Tooltip title={t(\"general/download-pull\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/Download\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {/*<TreeItem\n          nodeId={\"conflicted-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.addTabNode({\n                  type: \"tab\",\n                  component: \"Conflicted\",\n                  id: \"Conflicted: \" + props.notebook.dir,\n                  name: t(\"general/conflicted\"),\n                  config: {\n                    singleton: true,\n                    notebook: props.notebook,\n                  },\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"conflicted-notes\">\n                {\"⚠️\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/conflicted\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        */}\n        </TreeItem>\n      </TreeView>\n      <ConfigureNotebookDialog\n        open={notebookConfigurationDialogOpen}\n        onClose={() => setNotebookConfigurationDialogOpen(false)}\n        notebook={props.notebook}\n      ></ConfigureNotebookDialog>\n      <PushNotebookDialog\n        notebook={props.notebook}\n        open={pushNotebookDialogOpen}\n        onClose={() => setPushNotebookDialogOpen(false)}\n      ></PushNotebookDialog>\n    </React.Fragment>\n  );\n}\n","import {\n  Avatar,\n  Badge,\n  Box,\n  CircularProgress,\n  CssBaseline,\n  Divider,\n  Drawer,\n  Fab,\n  Hidden,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  fade,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  Bell,\n  Cog as SettingsIcon,\n  Menu,\n  Notebook,\n  PlusCircleOutline,\n} from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport AddNotebookDialog from \"../components/AddNotebookDialog\";\nimport { AuthDialog } from \"../components/AuthDialog\";\nimport LanguageSelectorDialog from \"../components/LanguageSelectorDialog\";\nimport { MainPanel } from \"../components/MainPanel\";\nimport NotebookTreeView from \"../components/NotebookTreeView\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { CrossnoteContainer, HomeSection } from \"../containers/crossnote\";\nimport { globalContainers } from \"../containers/global\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { browserHistory } from \"../utilities/history\";\nconst is = require(\"is_js\");\n\nconst drawerWidth = 200;\nconst notesPanelWidth = 350;\nconst notesPanelMinWidth = 220;\nconst notesPanelMaxWidth = 400;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    page: {\n      display: \"flex\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      boxShadow: \"none\",\n    },\n    toolBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        marginLeft: theme.spacing(3),\n        width: \"auto\",\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        width: 200,\n      },\n    },\n    displayNone: {\n      display: \"none\",\n    },\n    drawer: {\n      [theme.breakpoints.up(\"sm\")]: {\n        width: drawerWidth,\n        flexShrink: 0,\n      },\n    },\n    drawerPaper: {\n      width: drawerWidth,\n      backgroundColor: theme.palette.background.default,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      overflow: \"hidden\",\n    },\n    notebooksSection: {\n      overflowY: \"auto\",\n    },\n    controllersSection: {\n      // flex: 1,\n    },\n    listItemIcon: {\n      color: theme.palette.text.secondary,\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    selectedSection: {\n      backgroundColor: \"#ccc\",\n    },\n    left: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n      /*\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\"\n      }\n      */\n    },\n    notesPanel: {\n      maxWidth: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n      },\n    },\n    editorPanel: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"md\")]: {\n        // width: `calc(100% - ${notesPanelWidth}px)`,\n        // left: `${notesPanelWidth}px`\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\",\n        top: \"0\",\n        left: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n      },\n    },\n    toolBarSpace: theme.mixins.toolbar,\n    fab: {\n      position: \"fixed\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      zIndex: 999,\n    },\n  }),\n);\n\ninterface QueryParams {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath?: string;\n}\n\ninterface Props {\n  section: HomeSection;\n  queryParams: QueryParams;\n}\n\nexport function Home(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  // const isMobile = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const [addNotebookDialogOpen, setAddNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [addNotebookRepo, setAddNotebookRepo] = useState<string>(\"\");\n  const [addNotebookBranch, setAddNotebookBranch] = useState<string>(\"\");\n\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false);\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  // HACK: Register globalContainers for widgets use\n  globalContainers.cloudContainer = cloudContainer;\n  globalContainers.settingsContainer = settingsContainer;\n  globalContainers.crossnoteContainer = crossnoteContainer;\n\n  const toggleDrawer = useCallback(() => {\n    setDrawerOpen(!drawerOpen);\n  }, [drawerOpen]);\n\n  useEffect(() => {\n    if (!crossnoteContainer.initialized) {\n      return;\n    }\n    if (props.section === HomeSection.Notebooks) {\n      if (props.queryParams) {\n        if (props.queryParams.repo && props.queryParams.branch) {\n          const repo = decodeURIComponent(props.queryParams.repo || \"\");\n          const branch = decodeURIComponent(props.queryParams.branch || \"\");\n          const filePath = decodeURIComponent(props.queryParams.filePath || \"\");\n          const notebook = crossnoteContainer.notebooks.find(\n            (nb) => nb.gitURL === repo && nb.gitBranch === branch,\n          );\n          if (notebook) {\n            notebook\n              .refreshNotesIfNotLoaded({\n                dir: \"./\",\n                includeSubdirectories: true,\n              })\n              .then((notes) => {\n                if (filePath) {\n                  const note = notes[filePath];\n                  if (note) {\n                    crossnoteContainer.addTabNode({\n                      type: \"tab\",\n                      component: \"Note\",\n                      config: {\n                        singleton: false,\n                        note,\n                        notebook: notebook,\n                      },\n                      name: `📝 ` + note.title,\n                    });\n                  } else {\n                    //note not found\n                    crossnoteContainer.addTabNode({\n                      type: \"tab\",\n                      component: \"Notes\",\n                      id: \"Notes: \" + notebook.dir,\n                      name: \"📔 \" + notebook.name,\n                      config: {\n                        singleton: true,\n                        notebook: notebook,\n                      },\n                    });\n                  }\n                } else {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Notes\",\n                    id: \"Notes: \" + notebook.dir,\n                    name: \"📔 \" + notebook.name,\n                    config: {\n                      singleton: true,\n                      notebook: notebook,\n                    },\n                  });\n                }\n              });\n          } else {\n            // Show dialog\n            setAddNotebookRepo(repo);\n            setAddNotebookBranch(branch);\n            setAddNotebookDialogOpen(true);\n          }\n        }\n      }\n    }\n  }, [props.section, props.queryParams, crossnoteContainer.initialized]);\n\n  useEffect(() => {\n    crossnoteContainer.setHomeSection(props.section);\n  }, [props.section]);\n\n  const drawer = (\n    <React.Fragment>\n      <Box\n        className={clsx(classes.notebooksSection)}\n        style={{\n          overflowY: crossnoteContainer.initialized ? \"auto\" : \"hidden\",\n        }}\n      >\n        <List disablePadding={true}>\n          <ListItem>\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <Notebook></Notebook>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Notebooks\")}></ListItemText>\n            <ListItemSecondaryAction style={{ right: \"0\" }}>\n              {crossnoteContainer.initialized && (\n                <Tooltip title={t(\"general/add-a-notebook\")}>\n                  <IconButton\n                    className={clsx(classes.listItemIcon)}\n                    onClick={() => setAddNotebookDialogOpen(true)}\n                  >\n                    <PlusCircleOutline></PlusCircleOutline>\n                  </IconButton>\n                </Tooltip>\n              )}\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n        <List disablePadding={true} style={{ marginBottom: theme.spacing(16) }}>\n          {crossnoteContainer.notebooks.map((notebook) => {\n            return (\n              <ListItem\n                disableGutters={true}\n                style={{ padding: \"0\" }}\n                key={notebook._id}\n              >\n                <NotebookTreeView\n                  notebook={notebook}\n                  onCloseDrawer={() => setDrawerOpen(false)}\n                ></NotebookTreeView>\n              </ListItem>\n            );\n          })}\n          {!crossnoteContainer.initialized && (\n            <ListItem>\n              <CircularProgress style={{ margin: \"0 auto\" }}></CircularProgress>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n\n      <Box className={clsx(classes.controllersSection)}>\n        <Divider></Divider>\n        <List disablePadding={true}>\n          {/*\n          <ListItem\n            button\n            onClick={() => {\n              browserHistory.push(`/explore`);\n              setDrawerOpen(false);\n            }}\n            style={{ display: is.online() ? \"flex\" : \"none\" }}\n          >\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"28px\", height: \"28px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Explore\")}></ListItemText>\n          </ListItem>\n          */}\n          <ListItem\n            button\n            onClick={() => {\n              // browserHistory.push(`/settings`);\n              // setDrawerOpen(false);\n              crossnoteContainer.addTabNode({\n                type: \"tab\",\n                component: \"Settings\",\n                name: \"⚙️ \" + t(\"general/Settings\"),\n                id: \"Settings\",\n                config: {\n                  singleton: true,\n                },\n              });\n              setDrawerOpen(false);\n            }}\n          >\n            {cloudContainer.viewer ? (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <Avatar\n                  className={clsx(classes.avatar)}\n                  variant={\"rounded\"}\n                  src={\n                    cloudContainer.viewer.avatar ||\n                    \"data:image/png;base64,\" +\n                      new Identicon(\n                        sha256(\n                          cloudContainer.viewer &&\n                            cloudContainer.viewer.username,\n                        ),\n                        80,\n                      ).toString()\n                  }\n                ></Avatar>\n              </ListItemIcon>\n            ) : (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <SettingsIcon></SettingsIcon>\n              </ListItemIcon>\n            )}\n            <ListItemText primary={t(\"general/Settings\")}></ListItemText>\n          </ListItem>\n          {cloudContainer.loggedIn && (\n            <ListItem\n              button\n              onClick={() => {\n                browserHistory.push(`/notifications`);\n                setDrawerOpen(false);\n              }}\n            >\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                {cloudContainer.viewer.notifications.totalCount > 0 ? (\n                  <Badge\n                    color={\"secondary\"}\n                    badgeContent={\n                      cloudContainer.viewer.notifications.totalCount || \"\"\n                    }\n                  >\n                    <Bell></Bell>\n                  </Badge>\n                ) : (\n                  <Bell></Bell>\n                )}\n              </ListItemIcon>\n              <ListItemText primary={t(\"general/Notifications\")}></ListItemText>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n    </React.Fragment>\n  );\n\n  return (\n    <Box className={clsx(classes.page)}>\n      <CssBaseline></CssBaseline>\n      <nav className={clsx(classes.drawer, \"drawer\")}>\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            open={drawerOpen}\n            onClose={toggleDrawer}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden smUp implementation=\"css\">\n          <Fab\n            color=\"primary\"\n            size=\"small\"\n            onClick={toggleDrawer}\n            className={clsx(classes.fab)}\n          >\n            <Menu></Menu>\n          </Fab>\n        </Hidden>\n      </nav>\n      <MainPanel toggleDrawer={toggleDrawer}></MainPanel>\n      <AddNotebookDialog\n        open={addNotebookDialogOpen}\n        onClose={() => setAddNotebookDialogOpen(false)}\n        canCancel={true}\n        gitURL={addNotebookRepo}\n        gitBranch={addNotebookBranch}\n      ></AddNotebookDialog>\n      <AuthDialog\n        open={cloudContainer.authDialogOpen}\n        onClose={() => cloudContainer.setAuthDialogOpen(false)}\n      ></AuthDialog>\n      <LanguageSelectorDialog></LanguageSelectorDialog>\n    </Box>\n  );\n}\n","import { ThemeProvider } from \"@material-ui/styles\";\nimport * as qs from \"qs\";\nimport React, { FC, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n// @ts-ignore\nimport PWAPrompt from \"react-ios-pwa-prompt\";\nimport { Route, Router, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport { GitHubOAuthCallback } from \"./components/GitHubOAuthCallback\";\nimport ServiceWorkerWrapper from \"./components/ServiceWorkerWrapper\";\nimport { HomeSection } from \"./containers/crossnote\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport \"./editor\";\nimport { Home } from \"./pages/Home\";\nimport { browserHistory } from \"./utilities/history\";\nconst is = require(\"is_js\");\n\nconst App: FC = () => {\n  const { t } = useTranslation();\n  const settingsContainer = SettingsContainer.useContainer();\n  useEffect(() => {\n    const handler = (event: any) => {\n      try {\n        event.preventDefault();\n        event.prompt();\n        event.userChoice.then((choiceResult: any) => {\n          console.log(choiceResult);\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    window.addEventListener(\"beforeinstallprompt\", handler);\n    return () => {\n      window.removeEventListener(\"beforeinstallprompt\", handler);\n    };\n  }, []);\n  return (\n    <ThemeProvider theme={settingsContainer.theme.muiTheme}>\n      <div className=\"App\">\n        <Router history={browserHistory}>\n          <Switch>\n            {/*\n            <Route\n              path={`/settings`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Settings} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/explore`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Explore} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/notifications`}\n              exact={true}\n              render={(props) => (\n                <Home\n                  section={HomeSection.Notifications}\n                  queryParams={{}}\n                ></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/privacy`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Privacy} queryParams={{}}></Home>\n              )}\n            ></Route>\n              */}\n            <Route\n              exact={true}\n              path={`/github_oauth_callback`}\n              render={(props) => (\n                <GitHubOAuthCallback\n                  code={\n                    (qs.parse(props.location.search.replace(/^\\?/, \"\"))[\n                      \"code\"\n                    ] as string) || \"\"\n                  }\n                ></GitHubOAuthCallback>\n              )}\n            ></Route>\n            <Route\n              path={`/`}\n              render={(props) => (\n                <Home\n                  section={HomeSection.Notebooks}\n                  queryParams={qs.parse(\n                    props.location.search.replace(/^\\?/, \"\"),\n                  )}\n                ></Home>\n              )}\n            ></Route>\n          </Switch>\n        </Router>\n        <ServiceWorkerWrapper></ServiceWorkerWrapper>\n        {is.safari() ? (\n          <PWAPrompt\n            copyTitle={t(\"react-ios-pwa-prompt/copy-title\")}\n            copyBody={t(\"react-ios-pwa-prompt/copy-body\")}\n            copyShareButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-share-button-label\",\n            )}\n            copyAddHomeButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-add-home-button-label\",\n            )}\n            copyClosePrompt={t(\"general/cancel\")}\n          ></PWAPrompt>\n        ) : null}\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import Noty from \"noty\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { createContainer } from \"unstated-next\";\nimport {\n  Notification,\n  PageInfo,\n  useDeleteAllNotificationsMutation,\n  useDeleteNotificationMutation,\n  useNotificationsQuery,\n} from \"../generated/graphql\";\nimport { EmptyPageInfo } from \"../utilities/note\";\n\ninterface InitialState {}\n\nfunction useNotificationsContainer(initialState: InitialState) {\n  const [pageInfo, setPageInfo] = useState<PageInfo>(EmptyPageInfo);\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [needsRefetch, setNeedsRefetch] = useState<boolean>(false);\n  const [resNotifications, executeNotificationsQuery] = useNotificationsQuery({\n    variables: {\n      before: pageInfo.startCursor,\n      after: pageInfo.endCursor,\n      first: 0,\n      last: 20,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resDeleteNotification,\n    executeDeleteNotificationMutation,\n  ] = useDeleteNotificationMutation();\n  const [\n    resDeleteAllNotifications,\n    executeDeleteAllNotificationsMutation,\n  ] = useDeleteAllNotificationsMutation();\n\n  const fetchMoreNotifications = useCallback(() => {\n    executeNotificationsQuery({\n      requestPolicy: \"network-only\",\n    });\n  }, [executeNotificationsQuery]);\n\n  const deleteNotification = useCallback(\n    (notificationID: string) => {\n      setNotifications((notifications) => {\n        if (\n          pageInfo.hasPreviousPage &&\n          pageInfo.startCursor === notificationID\n        ) {\n          const notification = notifications[1];\n          if (notification) {\n            setPageInfo({\n              startCursor: notification.id,\n              endCursor: pageInfo.endCursor,\n              hasPreviousPage: pageInfo.hasPreviousPage,\n              hasNextPage: pageInfo.hasNextPage,\n            });\n          }\n        }\n        return notifications.filter((n) => n.id !== notificationID);\n      });\n      executeDeleteNotificationMutation({\n        notificationID: notificationID,\n      });\n    },\n    [executeDeleteNotificationMutation, pageInfo],\n  );\n\n  const deleteAllNotifications = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    executeDeleteAllNotificationsMutation();\n  }, [executeDeleteAllNotificationsMutation]);\n\n  const refresh = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    setNeedsRefetch(true);\n  }, [executeNotificationsQuery]);\n\n  useEffect(() => {\n    if (resNotifications.fetching) {\n    } /*else if (resNotifications.error) {\n      // There might be records that are not found because origin(user) undo the action.\n      new Noty({\n        type: \"error\",\n        text: resNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n    } */ else if (\n      resNotifications.data &&\n      resNotifications.data.viewer.notifications\n    ) {\n      const ns = resNotifications.data.viewer.notifications;\n      const pageInfo = ns.pageInfo;\n      const edges = ns.edges;\n      const newNotifications = (edges || [])\n        .map((edge) => {\n          if (edge) {\n            return edge.node as any;\n          } else {\n            return null;\n          }\n        })\n        .reverse()\n        .filter((x) => x);\n      setNotifications((notifications) =>\n        [...notifications, ...newNotifications].filter(\n          (notification, index, self) =>\n            index === self.findIndex((m) => m.id === notification.id),\n        ),\n      );\n      setPageInfo(pageInfo);\n    }\n  }, [resNotifications]);\n\n  useEffect(() => {\n    if (resDeleteNotification.fetching) {\n    } else if (resDeleteNotification.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteNotification.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteNotification.data &&\n      resDeleteNotification.data.deleteNotification\n    ) {\n    }\n  }, [resDeleteNotification]);\n\n  useEffect(() => {\n    if (resDeleteAllNotifications.fetching) {\n    } else if (resDeleteAllNotifications.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteAllNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteAllNotifications.data &&\n      resDeleteAllNotifications.data.deleteAllNotifications\n    ) {\n      setNotifications([]);\n      setPageInfo(EmptyPageInfo);\n    }\n  }, [resDeleteAllNotifications]);\n\n  useEffect(() => {\n    if (needsRefetch) {\n      fetchMoreNotifications();\n      setNeedsRefetch(false);\n    }\n  }, [needsRefetch, fetchMoreNotifications]);\n\n  return {\n    fetching: resNotifications.fetching,\n    notifications,\n    pageInfo,\n    fetchMoreNotifications,\n    deleteNotification,\n    deleteAllNotifications,\n    refresh,\n  };\n}\n\nexport const NotificationsContainer = createContainer(\n  useNotificationsContainer,\n);\n","import \"@mdi/font/css/materialdesignicons.min.css\";\nimport \"noty/lib/noty.css\";\nimport \"noty/lib/themes/relax.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"typeface-noto-sans-sc\";\nimport \"typeface-roboto\";\nimport { Provider } from \"urql\";\nimport App from \"./App\";\nimport { CloudContainer } from \"./containers/cloud\";\nimport { CrossnoteContainer } from \"./containers/crossnote\";\nimport { NotificationsContainer } from \"./containers/notifications\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport \"./i18n/i18n\";\nimport \"./index.css\";\nimport Crossnote from \"./lib/crossnote\";\nimport \"./lib/fs\";\nimport \"./themes/manager\";\nimport { GraphQLClient } from \"./utilities/client\";\n\n// Hack for GoldenLayout\nwindow[\"React\"] = React;\nwindow[\"ReactDOM\"] = ReactDOM;\n\ntry {\n  const crossnote = new Crossnote();\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <CrossnoteContainer.Provider\n        initialState={{\n          crossnote: crossnote,\n        }}\n      >\n        <SettingsContainer.Provider initialState={{}}>\n          <CloudContainer.Provider initialState={{}}>\n            <NotificationsContainer.Provider initialState={{}}>\n              <App />\n            </NotificationsContainer.Provider>\n          </CloudContainer.Provider>\n        </SettingsContainer.Provider>\n      </CrossnoteContainer.Provider>\n    </Provider>,\n    document.getElementById(\"root\"),\n  );\n} catch (error) {\n  console.log(error);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n//// serviceWorker.register();\n"],"sourceRoot":""}